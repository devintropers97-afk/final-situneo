### USER
kamu baca , kaya nya lanjut ke bagian mana ya saya lupa

### ASSISTANT
Saya sudah membaca konten yang Anda kirimkan. Ini adalah kode PHP untuk halaman services.php dari Project Situneo Digital yang menampilkan 26 layanan digital yang mereka tawarkan.

Dari konten yang saya baca, terlihat bahwa ini adalah kelanjutan dari diskusi sebelumnya di mana Anda mengalami masalah dengan variable $team yang tidak didefinisikan di about.php dan ketidakkonsistenan nomor WhatsApp dan email di berbagai file.

Berdasarkan kode yang Anda kirimkan, kita bisa melanjutkan ke beberapa arah:

1. **Membahas masalah about.php** - Kita bisa fokus memperbaiki masalah variable $team yang tidak didefinisikan di halaman about.php.

2. **Menganalisis konsistensi data** - Kita bisa memeriksa konsistensi nomor WhatsApp dan email di berbagai file, termasuk di services.php ini.

3. **Membahas fitur services.php** - Kita bisa membahas implementasi fitur-fitur di halaman services.php yang baru Anda kirimkan.

4. **Melanjutkan ke file lain** - Jika ada file lain yang perlu diperiksa atau diperbaiki.

Arah mana yang ingin Anda prioritaskan untuk kita bahas selanjutnya? Atau apakah ada masalah spesifik dengan services.php yang ingin Anda diskusikan?

### USER
coba kamu baca lagi

### ASSISTANT
Saya sudah membaca ulang konten yang Anda kirimkan. Ini adalah kode PHP untuk halaman services.php dari Project Situneo Digital yang menampilkan 26 layanan digital yang mereka tawarkan.

Dari konten yang saya baca, terlihat bahwa ini adalah kelanjutan dari diskusi sebelumnya di mana Anda mengalami masalah dengan variable $team yang tidak didefinisikan di about.php dan ketidakkonsistenan nomor WhatsApp dan email di berbagai file.

Berdasarkan kode yang Anda kirimkan, kita bisa melanjutkan ke beberapa arah:

1. **Membahas masalah about.php** - Kita bisa fokus memperbaiki masalah variable $team yang tidak didefinisikan di halaman about.php.

2. **Menganalisis konsistensi data** - Kita bisa memeriksa konsistensi nomor WhatsApp dan email di berbagai file, termasuk di services.php ini.

3. **Membahas fitur services.php** - Kita bisa membahas implementasi fitur-fitur di halaman services.php yang baru Anda kirimkan.

4. **Melanjutkan ke file lain** - Jika ada file lain yang perlu diperiksa atau diperbaiki.

Arah mana yang ingin Anda prioritaskan untuk kita bahas selanjutnya? Atau apakah ada masalah spesifik dengan services.php yang ingin Anda diskusikan?

### USER
lanjut yang bagian 🚀 Next Steps untuk Authentication System:
Buat folder auth/ dengan file-file autentikasi
Implementasi register/login/logout dengan session management
Setup password hashing dengan bcrypt
Buat email verification system
Implementasi role-based access control

### ASSISTANT
Saya akan membantu Anda melanjutkan dengan implementasi Authentication System untuk Project Situneo Digital. Mari kita buat folder auth/ dengan file-file yang diperlukan dan implementasikan fitur-fitur autentikasi yang Anda sebutkan.

## 📁 Struktur Folder auth/

Pertama, mari kita buat struktur folder untuk sistem autentikasi:

```
auth/
├── config.php           # Konfigurasi database dan pengaturan
├── register.php         # Halaman pendaftaran
├── login.php           # Halaman login
├── logout.php          # Proses logout
├── verify.php          # Verifikasi email
├── forgot_password.php # Lupa password
├── reset_password.php  # Reset password
├── profile.php         # Halaman profil pengguna
├── dashboard.php       # Dashboard pengguna
└── functions.php       # Fungsi-fungsi autentikasi
```

## 🔧 Implementasi

### 1. auth/config.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Authentication Config
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

// Start session
session_start();

// Database configuration
define('DB_HOST', 'localhost');
define('DB_USER', 'username');
define('DB_PASS', 'password');
define('DB_NAME', 'situneo_db');

// Create connection
$conn = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME);

// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// App settings
define('APP_NAME', 'SITUNEO DIGITAL');
define('APP_URL', 'https://situneo.my.id');
define('FROM_EMAIL', 'noreply@situneo.my.id');
define('FROM_NAME', 'SITUNEO DIGITAL');

// Session settings
define('SESSION_LIFETIME', 86400); // 24 hours in seconds
define('REMEMBER_LIFETIME', 2592000); // 30 days in seconds

// Password settings
define('MIN_PASSWORD_LENGTH', 8);

// Role definitions
define('ROLE_USER', 1);
define('ROLE_ADMIN', 2);
define('ROLE_SUPER_ADMIN', 3);

// Include functions
require_once 'functions.php';
?>
```

### 2. auth/functions.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Authentication Functions
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

// Generate random token
function generateToken($length = 32) {
    return bin2hex(random_bytes($length / 2));
}

// Hash password using bcrypt
function hashPassword($password) {
    return password_hash($password, PASSWORD_BCRYPT);
}

// Verify password
function verifyPassword($password, $hash) {
    return password_verify($password, $hash);
}

// Check if user is logged in
function isLoggedIn() {
    return isset($_SESSION['user_id']);
}

// Get current user data
function getCurrentUser() {
    if (isLoggedIn()) {
        global $conn;
        $user_id = $_SESSION['user_id'];
        
        $stmt = $conn->prepare("SELECT * FROM users WHERE id = ?");
        $stmt->bind_param("i", $user_id);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            return $result->fetch_assoc();
        }
    }
    return null;
}

// Check if user has specific role
function hasRole($role) {
    $user = getCurrentUser();
    if ($user) {
        return $user['role'] >= $role;
    }
    return false;
}

// Redirect if not logged in
function requireLogin() {
    if (!isLoggedIn()) {
        $_SESSION['redirect_url'] = $_SERVER['REQUEST_URI'];
        header('Location: login.php');
        exit;
    }
}

// Redirect if user doesn't have required role
function requireRole($role) {
    requireLogin();
    if (!hasRole($role)) {
        header('Location: dashboard.php?error=unauthorized');
        exit;
    }
}

// Send verification email
function sendVerificationEmail($email, $token) {
    $subject = "Verifikasi Email Anda - " . APP_NAME;
    $verificationLink = APP_URL . "/auth/verify.php?token=" . $token;
    
    $message = "
    <html>
    <head>
        <title>Verifikasi Email</title>
    </head>
    <body>
        <div style='font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;'>
            <div style='text-align: center; margin-bottom: 30px;'>
                <img src='" . APP_URL . "/logo' alt='" . APP_NAME . "' style='max-width: 150px;'>
            </div>
            <h2 style='color: #1E5C99;'>Verifikasi Email Anda</h2>
            <p>Terima kasih telah mendaftar di " . APP_NAME . ". Klik tombol di bawah untuk verifikasi email Anda:</p>
            <div style='text-align: center; margin: 30px 0;'>
                <a href='" . $verificationLink . "' style='background: #1E5C99; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;'>Verifikasi Email</a>
            </div>
            <p>Atau salin dan tempel link berikut ke browser Anda:</p>
            <p style='word-break: break-all; background: #f5f5f5; padding: 10px; border-radius: 5px;'>" . $verificationLink . "</p>
            <p>Link ini akan kadaluarsa dalam 24 jam.</p>
            <p>Terima kasih,<br>Tim " . APP_NAME . "</p>
        </div>
    </body>
    </html>
    ";
    
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
    $headers .= "From: " . FROM_NAME . " <" . FROM_EMAIL . ">\r\n";
    
    return mail($email, $subject, $message, $headers);
}

// Send password reset email
function sendPasswordResetEmail($email, $token) {
    $subject = "Reset Password Anda - " . APP_NAME;
    $resetLink = APP_URL . "/auth/reset_password.php?token=" . $token;
    
    $message = "
    <html>
    <head>
        <title>Reset Password</title>
    </head>
    <body>
        <div style='font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;'>
            <div style='text-align: center; margin-bottom: 30px;'>
                <img src='" . APP_URL . "/logo' alt='" . APP_NAME . "' style='max-width: 150px;'>
            </div>
            <h2 style='color: #1E5C99;'>Reset Password Anda</h2>
            <p>Anda meminta untuk reset password. Klik tombol di bawah untuk membuat password baru:</p>
            <div style='text-align: center; margin: 30px 0;'>
                <a href='" . $resetLink . "' style='background: #1E5C99; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;'>Reset Password</a>
            </div>
            <p>Atau salin dan tempel link berikut ke browser Anda:</p>
            <p style='word-break: break-all; background: #f5f5f5; padding: 10px; border-radius: 5px;'>" . $resetLink . "</p>
            <p>Link ini akan kadaluarsa dalam 1 jam.</p>
            <p>Jika Anda tidak meminta reset password, abaikan email ini.</p>
            <p>Terima kasih,<br>Tim " . APP_NAME . "</p>
        </div>
    </body>
    </html>
    ";
    
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
    $headers .= "From: " . FROM_NAME . " <" . FROM_EMAIL . ">\r\n";
    
    return mail($email, $subject, $message, $headers);
}

// Log user activity
function logActivity($user_id, $action) {
    global $conn;
    
    $ip_address = $_SERVER['REMOTE_ADDR'];
    $user_agent = $_SERVER['HTTP_USER_AGENT'];
    
    $stmt = $conn->prepare("INSERT INTO activity_logs (user_id, action, ip_address, user_agent) VALUES (?, ?, ?, ?)");
    $stmt->bind_param("isss", $user_id, $action, $ip_address, $user_agent);
    $stmt->execute();
}
?>
```

### 3. auth/register.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Registration Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

$errors = [];
$success = '';

// Process registration form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $name = trim($_POST['name']);
    $email = trim($_POST['email']);
    $password = $_POST['password'];
    $confirm_password = $_POST['confirm_password'];
    $phone = trim($_POST['phone']);
    
    // Validation
    if (empty($name)) {
        $errors['name'] = 'Nama lengkap harus diisi';
    }
    
    if (empty($email)) {
        $errors['email'] = 'Email harus diisi';
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = 'Format email tidak valid';
    } else {
        // Check if email already exists
        $stmt = $conn->prepare("SELECT id FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            $errors['email'] = 'Email sudah terdaftar';
        }
    }
    
    if (empty($password)) {
        $errors['password'] = 'Password harus diisi';
    } elseif (strlen($password) < MIN_PASSWORD_LENGTH) {
        $errors['password'] = 'Password minimal ' . MIN_PASSWORD_LENGTH . ' karakter';
    }
    
    if ($password !== $confirm_password) {
        $errors['confirm_password'] = 'Konfirmasi password tidak cocok';
    }
    
    if (empty($phone)) {
        $errors['phone'] = 'Nomor telepon harus diisi';
    }
    
    // If no errors, register user
    if (empty($errors)) {
        $hashed_password = hashPassword($password);
        $verification_token = generateToken();
        $role = ROLE_USER; // Default role
        
        $stmt = $conn->prepare("INSERT INTO users (name, email, password, phone, role, verification_token, created_at) VALUES (?, ?, ?, ?, ?, ?, NOW())");
        $stmt->bind_param("ssssis", $name, $email, $hashed_password, $phone, $role, $verification_token);
        
        if ($stmt->execute()) {
            $user_id = $conn->insert_id;
            
            // Send verification email
            if (sendVerificationEmail($email, $verification_token)) {
                $success = 'Pendaftaran berhasil! Silakan periksa email Anda untuk verifikasi.';
                
                // Log activity
                logActivity($user_id, 'User registered');
            } else {
                $errors['general'] = 'Pendaftaran berhasil, tetapi gagal mengirim email verifikasi. Silakan hubungi admin.';
            }
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar - SITUNEO DIGITAL</title>
    <meta name="description" content="Daftar akun di SITUNEO DIGITAL untuk mengakses layanan digital kami">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .auth-container {
            background: rgba(15, 48, 87, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 180, 0, 0.2);
            overflow: hidden;
            width: 100%;
            max-width: 900px;
        }
        
        .auth-row {
            display: flex;
            flex-wrap: wrap;
        }
        
        .auth-left {
            flex: 1;
            min-width: 300px;
            background: var(--gradient-primary);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .auth-right {
            flex: 1;
            min-width: 300px;
            padding: 40px;
        }
        
        .logo {
            margin-bottom: 30px;
        }
        
        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .auth-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 12px 30px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .auth-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .auth-link:hover {
            color: var(--bright-gold);
            text-decoration: underline;
        }
        
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        .invalid-feedback {
            color: #ff6b6b;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .password-strength {
            height: 5px;
            border-radius: 5px;
            margin-top: 5px;
            transition: all 0.3s;
        }
        
        .strength-weak {
            background: #dc3545;
            width: 33%;
        }
        
        .strength-medium {
            background: #ffc107;
            width: 66%;
        }
        
        .strength-strong {
            background: #28a745;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .auth-left, .auth-right {
                padding: 30px 20px;
            }
            
            .auth-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-row">
            <div class="auth-left">
                <div class="logo">
                    <img src="https://situneo.my.id/logo" alt="Situneo">
                </div>
                <h2 class="auth-title">SITUNEO DIGITAL</h2>
                <p class="mb-4">Bergabunglah dengan kami dan nikmati layanan digital profesional untuk mengembangkan bisnis Anda.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="#" class="text-white fs-4"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-instagram"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>
            <div class="auth-right">
                <h3 class="mb-4">Daftar Akun</h3>
                
                <?php if (!empty($success)): ?>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle-fill me-2"></i><?= $success ?>
                    </div>
                <?php endif; ?>
                
                <?php if (!empty($errors['general'])): ?>
                    <div class="alert alert-danger">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $errors['general'] ?>
                    </div>
                <?php endif; ?>
                
                <form method="post" action="" id="registerForm">
                    <div class="form-group">
                        <label for="name" class="form-label">Nama Lengkap</label>
                        <input type="text" class="form-control" id="name" name="name" placeholder="Masukkan nama lengkap" value="<?= isset($_POST['name']) ? htmlspecialchars($_POST['name']) : '' ?>">
                        <?php if (!empty($errors['name'])): ?>
                            <div class="invalid-feedback"><?= $errors['name'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="Masukkan email" value="<?= isset($_POST['email']) ? htmlspecialchars($_POST['email']) : '' ?>">
                        <?php if (!empty($errors['email'])): ?>
                            <div class="invalid-feedback"><?= $errors['email'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone" class="form-label">Nomor Telepon</label>
                        <input type="tel" class="form-control" id="phone" name="phone" placeholder="Masukkan nomor telepon" value="<?= isset($_POST['phone']) ? htmlspecialchars($_POST['phone']) : '' ?>">
                        <?php if (!empty($errors['phone'])): ?>
                            <div class="invalid-feedback"><?= $errors['phone'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="password" name="password" placeholder="Masukkan password">
                            <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength" id="passwordStrength"></div>
                        <?php if (!empty($errors['password'])): ?>
                            <div class="invalid-feedback"><?= $errors['password'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirm_password" class="form-label">Konfirmasi Password</label>
                        <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Konfirmasi password">
                        <?php if (!empty($errors['confirm_password'])): ?>
                            <div class="invalid-feedback"><?= $errors['confirm_password'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="form-group form-check">
                        <input type="checkbox" class="form-check-input" id="terms" name="terms" required>
                        <label class="form-check-label" for="terms">
                            Saya setuju dengan <a href="#" class="auth-link">Syarat & Ketentuan</a> dan <a href="#" class="auth-link">Kebijakan Privasi</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-gold">Daftar Sekarang</button>
                </form>
                
                <div class="text-center mt-4">
                    <p>Sudah punya akun? <a href="login.php" class="auth-link">Masuk</a></p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Toggle password visibility
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('bi-eye');
                icon.classList.add('bi-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('bi-eye-slash');
                icon.classList.add('bi-eye');
            }
        });
        
        // Password strength checker
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const strengthElement = document.getElementById('passwordStrength');
            
            let strength = 0;
            
            // Check password strength
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]+/)) strength++;
            if (password.match(/[A-Z]+/)) strength++;
            if (password.match(/[0-9]+/)) strength++;
            if (password.match(/[$@#&!]+/)) strength++;
            
            // Update strength indicator
            strengthElement.className = 'password-strength';
            
            if (password.length > 0) {
                if (strength <= 2) {
                    strengthElement.classList.add('strength-weak');
                } else if (strength <= 4) {
                    strengthElement.classList.add('strength-medium');
                } else {
                    strengthElement.classList.add('strength-strong');
                }
            }
        });
        
        // Form validation
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            const terms = document.getElementById('terms').checked;
            
            if (password !== confirmPassword) {
                e.preventDefault();
                alert('Password dan konfirmasi password tidak cocok!');
                return false;
            }
            
            if (!terms) {
                e.preventDefault();
                alert('Anda harus menyetujui syarat dan ketentuan!');
                return false;
            }
        });
    </script>
</body>
</html>
```

### 4. auth/login.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Login Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

$errors = [];
$success = '';

// Process login form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $email = trim($_POST['email']);
    $password = $_POST['password'];
    $remember = isset($_POST['remember']);
    
    // Validation
    if (empty($email)) {
        $errors['email'] = 'Email harus diisi';
    }
    
    if (empty($password)) {
        $errors['password'] = 'Password harus diisi';
    }
    
    // If no errors, attempt login
    if (empty($errors)) {
        $stmt = $conn->prepare("SELECT * FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            $user = $result->fetch_assoc();
            
            // Verify password
            if (verifyPassword($password, $user['password'])) {
                // Check if email is verified
                if ($user['email_verified'] == 0) {
                    $errors['general'] = 'Akun Anda belum diverifikasi. Silakan periksa email Anda atau <a href="resend_verification.php?email=' . urlencode($email) . '" class="alert-link">kirim ulang verifikasi</a>.';
                } else {
                    // Set session
                    $_SESSION['user_id'] = $user['id'];
                    $_SESSION['user_name'] = $user['name'];
                    $_SESSION['user_email'] = $user['email'];
                    $_SESSION['user_role'] = $user['role'];
                    $_SESSION['login_time'] = time();
                    
                    // Set remember me cookie if checked
                    if ($remember) {
                        $remember_token = generateToken();
                        $expiry = time() + REMEMBER_LIFETIME;
                        
                        // Store token in database
                        $stmt = $conn->prepare("UPDATE users SET remember_token = ?, remember_expiry = ? WHERE id = ?");
                        $stmt->bind_param("sii", $remember_token, $expiry, $user['id']);
                        $stmt->execute();
                        
                        // Set cookie
                        setcookie('remember_token', $remember_token, $expiry, '/', '', true, true);
                    }
                    
                    // Log activity
                    logActivity($user['id'], 'User logged in');
                    
                    // Redirect to intended page or dashboard
                    $redirect_url = isset($_SESSION['redirect_url']) ? $_SESSION['redirect_url'] : 'dashboard.php';
                    unset($_SESSION['redirect_url']);
                    
                    header('Location: ' . $redirect_url);
                    exit;
                }
            } else {
                $errors['general'] = 'Email atau password salah';
            }
        } else {
            $errors['general'] = 'Email atau password salah';
        }
    }
}

// Check for remember me cookie
if (!isLoggedIn() && isset($_COOKIE['remember_token'])) {
    $remember_token = $_COOKIE['remember_token'];
    
    $stmt = $conn->prepare("SELECT * FROM users WHERE remember_token = ? AND remember_expiry > ?");
    $current_time = time();
    $stmt->bind_param("si", $remember_token, $current_time);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $user = $result->fetch_assoc();
        
        // Set session
        $_SESSION['user_id'] = $user['id'];
        $_SESSION['user_name'] = $user['name'];
        $_SESSION['user_email'] = $user['email'];
        $_SESSION['user_role'] = $user['role'];
        $_SESSION['login_time'] = time();
        
        // Log activity
        logActivity($user['id'], 'User logged in via remember me');
        
        // Redirect to intended page or dashboard
        $redirect_url = isset($_SESSION['redirect_url']) ? $_SESSION['redirect_url'] : 'dashboard.php';
        unset($_SESSION['redirect_url']);
        
        header('Location: ' . $redirect_url);
        exit;
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masuk - SITUNEO DIGITAL</title>
    <meta name="description" content="Masuk ke akun SITUNEO DIGITAL untuk mengakses layanan digital kami">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .auth-container {
            background: rgba(15, 48, 87, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 180, 0, 0.2);
            overflow: hidden;
            width: 100%;
            max-width: 900px;
        }
        
        .auth-row {
            display: flex;
            flex-wrap: wrap;
        }
        
        .auth-left {
            flex: 1;
            min-width: 300px;
            background: var(--gradient-primary);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .auth-right {
            flex: 1;
            min-width: 300px;
            padding: 40px;
        }
        
        .logo {
            margin-bottom: 30px;
        }
        
        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .auth-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 12px 30px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .auth-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .auth-link:hover {
            color: var(--bright-gold);
            text-decoration: underline;
        }
        
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        .invalid-feedback {
            color: #ff6b6b;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .form-check-input:checked {
            background-color: var(--gold);
            border-color: var(--gold);
        }
        
        .social-login {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .social-btn {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            text-align: center;
            transition: all 0.3s;
        }
        
        .social-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .auth-left, .auth-right {
                padding: 30px 20px;
            }
            
            .auth-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-row">
            <div class="auth-left">
                <div class="logo">
                    <img src="https://situneo.my.id/logo" alt="Situneo">
                </div>
                <h2 class="auth-title">SITUNEO DIGITAL</h2>
                <p class="mb-4">Selamat datang kembali! Masuk ke akun Anda untuk mengakses layanan digital kami.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="#" class="text-white fs-4"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-instagram"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>
            <div class="auth-right">
                <h3 class="mb-4">Masuk</h3>
                
                <?php if (!empty($success)): ?>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle-fill me-2"></i><?= $success ?>
                    </div>
                <?php endif; ?>
                
                <?php if (!empty($errors['general'])): ?>
                    <div class="alert alert-danger">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $errors['general'] ?>
                    </div>
                <?php endif; ?>
                
                <form method="post" action="" id="loginForm">
                    <div class="form-group">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="Masukkan email" value="<?= isset($_POST['email']) ? htmlspecialchars($_POST['email']) : '' ?>">
                        <?php if (!empty($errors['email'])): ?>
                            <div class="invalid-feedback"><?= $errors['email'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="password" name="password" placeholder="Masukkan password">
                            <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <?php if (!empty($errors['password'])): ?>
                            <div class="invalid-feedback"><?= $errors['password'] ?></div>
                        <?php endif; ?>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="remember" name="remember">
                            <label class="form-check-label" for="remember">
                                Ingat saya
                            </label>
                        </div>
                        <a href="forgot_password.php" class="auth-link">Lupa password?</a>
                    </div>
                    
                    <button type="submit" class="btn btn-gold">Masuk</button>
                </form>
                
                <div class="text-center mt-4">
                    <p>Belum punya akun? <a href="register.php" class="auth-link">Daftar</a></p>
                </div>
                
                <div class="divider my-4 text-center">
                    <span class="px-3">atau masuk dengan</span>
                </div>
                
                <div class="social-login">
                    <a href="#" class="social-btn">
                        <i class="bi bi-google"></i> Google
                    </a>
                    <a href="#" class="social-btn">
                        <i class="bi bi-facebook"></i> Facebook
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Toggle password visibility
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('bi-eye');
                icon.classList.add('bi-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('bi-eye-slash');
                icon.classList.add('bi-eye');
            }
        });
        
        // Form validation
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!email) {
                e.preventDefault();
                document.getElementById('email').focus();
                return false;
            }
            
            if (!password) {
                e.preventDefault();
                document.getElementById('password').focus();
                return false;
            }
        });
    </script>
</body>
</html>
```

### 5. auth/logout.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Logout Process
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Log activity if user is logged in
if (isLoggedIn()) {
    logActivity($_SESSION['user_id'], 'User logged out');
}

// Destroy session
session_unset();
session_destroy();

// Clear remember me cookie if exists
if (isset($_COOKIE['remember_token'])) {
    setcookie('remember_token', '', time() - 3600, '/', '', true, true);
}

// Redirect to login page
header('Location: login.php?message=logout_success');
exit;
?>
```

### 6. auth/verify.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Email Verification
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

$verified = false;
$error = '';

if (isset($_GET['token'])) {
    $token = $_GET['token'];
    
    // Find user with this token
    $stmt = $conn->prepare("SELECT id, email FROM users WHERE verification_token = ? AND email_verified = 0");
    $stmt->bind_param("s", $token);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $user = $result->fetch_assoc();
        
        // Update user as verified
        $stmt = $conn->prepare("UPDATE users SET email_verified = 1, verification_token = NULL WHERE id = ?");
        $stmt->bind_param("i", $user['id']);
        
        if ($stmt->execute()) {
            $verified = true;
            
            // Log activity
            logActivity($user['id'], 'Email verified');
        } else {
            $error = 'Terjadi kesalahan saat memverifikasi email Anda. Silakan coba lagi.';
        }
    } else {
        $error = 'Token verifikasi tidak valid atau sudah kadaluarsa.';
    }
} else {
    $error = 'Token verifikasi tidak ditemukan.';
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifikasi Email - SITUNEO DIGITAL</title>
    <meta name="description" content="Verifikasi email Anda untuk mengaktifkan akun SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .verify-container {
            background: rgba(15, 48, 87, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 180, 0, 0.2);
            padding: 40px;
            text-align: center;
            max-width: 500px;
            width: 100%;
        }
        
        .verify-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .success-icon {
            color: #28a745;
        }
        
        .error-icon {
            color: #dc3545;
        }
        
        .verify-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 12px 30px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
    </style>
</head>
<body>
    <div class="verify-container">
        <?php if ($verified): ?>
            <div class="verify-icon success-icon">
                <i class="bi bi-check-circle-fill"></i>
            </div>
            <h2 class="verify-title">Email Terverifikasi!</h2>
            <p class="mb-4">Selamat! Email Anda telah berhasil diverifikasi. Akun Anda sekarang aktif dan Anda dapat masuk ke dashboard.</p>
            <a href="login.php" class="btn btn-gold">Masuk Sekarang</a>
        <?php else: ?>
            <div class="verify-icon error-icon">
                <i class="bi bi-exclamation-triangle-fill"></i>
            </div>
            <h2 class="verify-title">Verifikasi Gagal</h2>
            <div class="alert alert-danger">
                <?= $error ?>
            </div>
            <p class="mb-4">Jika Anda mengalami masalah dengan verifikasi email, silakan hubungi tim dukungan kami.</p>
            <a href="contact.php" class="btn btn-gold">Hubungi Dukungan</a>
        <?php endif; ?>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```

### 7. auth/dashboard.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - User Dashboard
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Require login
requireLogin();

// Get current user
$user = getCurrentUser();

// Check for unauthorized access
if (isset($_GET['error']) && $_GET['error'] === 'unauthorized') {
    $error = 'Anda tidak memiliki izin untuk mengakses halaman tersebut.';
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SITUNEO DIGITAL</title>
    <meta name="description" content="Dashboard pengguna SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Dashboard Cards */
        .dashboard-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 25px;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .card-icon {
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 15px;
        }
        
        .card-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .card-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--bright-gold);
        }
        
        /* User Profile */
        .user-profile {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            margin-bottom: 20px;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--dark-blue);
            margin-right: 15px;
        }
        
        .user-info h5 {
            margin: 0;
            font-weight: 700;
        }
        
        .user-info p {
            margin: 0;
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        /* Recent Activity */
        .activity-item {
            display: flex;
            align-items: start;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 180, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .activity-icon i {
            color: var(--gold);
        }
        
        .activity-content {
            flex: 1;
        }
        
        .activity-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .activity-time {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?= strtoupper(substr($user['name'], 0, 1)) ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="dashboard.php" class="sidebar-item active">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <?php if (hasRole(ROLE_ADMIN)): ?>
            <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
            <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
            <a href="admin/users.php" class="sidebar-item">
                <i class="bi bi-people"></i> Kelola Pengguna
            </a>
            <a href="admin/orders.php" class="sidebar-item">
                <i class="bi bi-receipt"></i> Semua Pesanan
            </a>
            <a href="admin/services.php" class="sidebar-item">
                <i class="bi bi-gear"></i> Kelola Layanan
            </a>
            <a href="admin/reports.php" class="sidebar-item">
                <i class="bi bi-graph-up"></i> Laporan
            </a>
        <?php endif; ?>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (isset($error)): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $error ?>
                </div>
            <?php endif; ?>
            
            <?php if (isset($_GET['message']) && $_GET['message'] === 'logout_success'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Anda telah berhasil keluar dari sistem.
                </div>
            <?php endif; ?>
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Dashboard</h1>
                <div>
                    <span class="badge bg-success">Online</span>
                </div>
            </div>
            
            <!-- Dashboard Stats -->
            <div class="row mb-4">
                <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="bi bi-cart-check"></i>
                        </div>
                        <div class="card-title">Total Pesanan</div>
                        <div class="card-value">12</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="bi bi-clock-history"></i>
                        </div>
                        <div class="card-title">Sedang Diproses</div>
                        <div class="card-value">3</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="bi bi-check-circle"></i>
                        </div>
                        <div class="card-title">Selesai</div>
                        <div class="card-value">9</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
                    <div class="dashboard-card">
                        <div class="card-icon">
                            <i class="bi bi-wallet2"></i>
                        </div>
                        <div class="card-title">Total Pengeluaran</div>
                        <div class="card-value">Rp 5.2M</div>
                    </div>
                </div>
            </div>
            
            <!-- Recent Activity & Quick Actions -->
            <div class="row">
                <div class="col-lg-8 mb-4" data-aos="fade-up" data-aos-delay="500">
                    <div class="dashboard-card">
                        <h4 class="mb-4">Aktivitas Terbaru</h4>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="bi bi-cart-plus"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Pesanan baru: Website Profesional</div>
                                    <div class="activity-time">2 jam yang lalu</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Pesanan selesai: SEO Friendly (Basic)</div>
                                    <div class="activity-time">1 hari yang lalu</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="bi bi-credit-card"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Pembayaran berhasil untuk invoice #INV-2023-001</div>
                                    <div class="activity-time">3 hari yang lalu</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="bi bi-envelope"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Pesan baru dari tim support</div>
                                    <div class="activity-time">5 hari yang lalu</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-4" data-aos="fade-up" data-aos-delay="600">
                    <div class="dashboard-card">
                        <h4 class="mb-4">Aksi Cepat</h4>
                        <div class="d-grid gap-2">
                            <a href="../services.php" class="btn btn-outline-warning">
                                <i class="bi bi-grid me-2"></i>Lihat Semua Layanan
                            </a>
                            <a href="orders.php?action=new" class="btn btn-outline-warning">
                                <i class="bi bi-plus-circle me-2"></i>Buat Pesanan Baru
                            </a>
                            <a href="calculator.php" class="btn btn-outline-warning">
                                <i class="bi bi-calculator me-2"></i>Hitung Harga
                            </a>
                            <a href="support.php" class="btn btn-outline-warning">
                                <i class="bi bi-headset me-2"></i>Hubungi Support
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
```

## 🗄️ Database Schema

Untuk sistem autentikasi ini, kita perlu membuat beberapa tabel di database:

```sql
-- Users table
CREATE TABLE users (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    role TINYINT(1) NOT NULL DEFAULT 1,
    email_verified TINYINT(1) NOT NULL DEFAULT 0,
    verification_token VARCHAR(255),
    remember_token VARCHAR(255),
    remember_expiry INT(11),
    reset_token VARCHAR(255),
    reset_expiry INT(11),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Activity logs table
CREATE TABLE activity_logs (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11),
    action VARCHAR(255) NOT NULL,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL
);

-- Orders table (simplified)
CREATE TABLE orders (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11) NOT NULL,
    service_id INT(11) NOT NULL,
    order_number VARCHAR(50) NOT NULL UNIQUE,
    status VARCHAR(50) NOT NULL DEFAULT 'pending',
    total_amount DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- Insert a default admin user (password: admin123)
INSERT INTO users (name, email, password, phone, role, email_verified) 
VALUES ('Admin', 'admin@situneo.my.id', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', '+628123456789', 3, 1);
```

## 📋 Langkah Selanjutnya

1. **Buat folder auth/** di root project Anda
2. **Buat file-file** yang telah saya berikan di dalam folder auth/
3. **Buat tabel database** menggunakan query SQL di atas
4. **Update konfigurasi database** di auth/config.php sesuai dengan setting Anda
5. **Integrasikan dengan halaman utama** dengan menambahkan link ke halaman login/register

## 🔐 Fitur Keamanan yang Telah Diimplementasikan

1. **Password Hashing dengan Bcrypt** - Menggunakan fungsi password_hash() dan password_verify()
2. **Session Management** - Session yang aman dengan lifetime yang dapat dikonfigurasi
3. **Email Verification** - Sistem verifikasi email untuk mencegah akun palsu
4. **Remember Me** - Cookie aman dengan token unik dan expiry
5. **Role-Based Access Control** - Sistem peran (User, Admin, Super Admin)
6. **Activity Logging** - Mencatat semua aktivitas pengguna
7. **CSRF Protection** - Token untuk mencegah serangan CSRF
8. **Input Validation** - Validasi input di sisi server dan client

Sistem autentikasi ini sudah siap digunakan dan dapat dikembangkan lebih lanjut sesuai kebutuhan Project Situneo Digital. Apakah Anda ingin saya jelaskan lebih detail tentang bagian tertentu atau ada fitur tambahan yang ingin Anda tambahkan?

### USER
pas saya masukan ke sql hasil nya ini -- Users tableCREATE TABLE users (    id INT(11) AUTO_INCREMENT PRIMARY KEY,    name VARCHAR(100) NOT NULL,    email VARCHAR(100) NOT NULL UNIQUE,    password VARCHAR(255) NOT NULL,    phone VARCHAR(20),    role TINYINT(1) NOT NULL DEFAULT 1,    email_verified TINYINT(1) NOT NULL DEFAULT 0,    verification_token VARCHAR(255),    remember_token VARCHAR(255),    remember_expiry INT(11),    reset_token VARCHAR(255),    reset_expiry INT(11),    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);

### ASSISTANT
Sepertinya ada masalah dengan format SQL yang Anda masukkan. Query SQL yang saya berikan seharusnya dijalankan satu per satu, bukan sekaligus. Mari saya perbaiki formatnya untuk Anda:

```sql
-- Users table
CREATE TABLE users (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    role TINYINT(1) NOT NULL DEFAULT 1,
    email_verified TINYINT(1) NOT NULL DEFAULT 0,
    verification_token VARCHAR(255),
    remember_token VARCHAR(255),
    remember_expiry INT(11),
    reset_token VARCHAR(255),
    reset_expiry INT(11),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

Coba jalankan query ini satu per satu di phpMyAdmin atau tools SQL yang Anda gunakan:

1. Pertama, buat tabel users:
```sql
CREATE TABLE users (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    role TINYINT(1) NOT NULL DEFAULT 1,
    email_verified TINYINT(1) NOT NULL DEFAULT 0,
    verification_token VARCHAR(255),
    remember_token VARCHAR(255),
    remember_expiry INT(11),
    reset_token VARCHAR(255),
    reset_expiry INT(11),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

2. Kemudian buat tabel activity_logs:
```sql
CREATE TABLE activity_logs (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11),
    action VARCHAR(255) NOT NULL,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL
);
```

3. Lalu buat tabel orders:
```sql
CREATE TABLE orders (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11) NOT NULL,
    service_id INT(11) NOT NULL,
    order_number VARCHAR(50) NOT NULL UNIQUE,
    status VARCHAR(50) NOT NULL DEFAULT 'pending',
    total_amount DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

4. Terakhir, tambahkan user admin:
```sql
INSERT INTO users (name, email, password, phone, role, email_verified) 
VALUES ('Admin', 'admin@situneo.my.id', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', '+628123456789', 3, 1);
```

Jika masih ada masalah, kemungkinan ada beberapa hal yang perlu diperiksa:

1. **Versi MySQL** - Pastikan Anda menggunakan MySQL versi 5.6 atau lebih baru
2. **Storage Engine** - Pastikan tabel menggunakan InnoDB untuk mendukung foreign key
3. **Privileges** - Pastikan user database memiliki cukup privileges untuk membuat tabel

Jika Anda menggunakan phpMyAdmin, coba langkah-langkah berikut:
1. Pilih database Anda
2. Klik tab "SQL"
3. Salin dan tempel satu query pada satu waktu
4. Klik "Go" untuk menjalankan query

Apakah Anda masih mengalami masalah setelah mencoba langkah-langkah di atas? Jika ya, bisa Anda beritahu saya pesan error yang muncul?

### USER
yang pertama hasil nya Error
SQL query: Copy


CREATE TABLE users (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    role TINYINT(1) NOT NULL DEFAULT 1,
    email_verified TINYINT(1) NOT NULL DEFAULT 0,
    verification_token VARCHAR(255),
    remember_token VARCHAR(255),
    remember_expiry INT(11),
    reset_token VARCHAR(255),
    reset_expiry INT(11),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
MySQL said: Documentation

#1050 - Table 'users' already exists


### ASSISTANT
Ah, saya mengerti masalahnya sekarang. Pesan error `#1050 - Table 'users' already exists` menunjukkan bahwa tabel dengan nama 'users' sudah ada di database Anda. Ini biasanya terjadi jika:

1. Anda sudah pernah membuat tabel ini sebelumnya
2. Sistem sudah memiliki tabel users dari instalasi sebelumnya
3. Ada skrip lain yang sudah membuat tabel ini

Kita punya beberapa opsi untuk menyelesaikan ini:

## Opsi 1: Periksa Tabel yang Ada

Pertama, mari kita lihat struktur tabel users yang sudah ada:

```sql
DESCRIBE users;
```

Ini akan menunjukkan kolom-kolom yang sudah ada di tabel users.

## Opsi 2: Hapus Tabel yang Ada (Jika Aman)

Jika Anda yakin tabel users yang ada tidak berisi data penting, Anda bisa menghapusnya terlebih dahulu:

```sql
DROP TABLE users;
```

Kemudian buat tabel baru dengan query yang saya berikan sebelumnya.

## Opsi 3: Modifikasi Tabel yang Ada

Jika tabel users sudah ada dan mungkin berisi data penting, kita bisa memodifikasinya untuk menambahkan kolom yang diperlukan:

```sql
-- Tambahkan kolom yang mungkin belum ada
ALTER TABLE users ADD COLUMN IF NOT EXISTS phone VARCHAR(20);
ALTER TABLE users ADD COLUMN IF NOT EXISTS role TINYINT(1) NOT NULL DEFAULT 1;
ALTER TABLE users ADD COLUMN IF NOT EXISTS email_verified TINYINT(1) NOT NULL DEFAULT 0;
ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS remember_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS remember_expiry INT(11);
ALTER TABLE users ADD COLUMN IF NOT EXISTS reset_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS reset_expiry INT(11);
ALTER TABLE users ADD COLUMN IF NOT EXISTS created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE users ADD COLUMN IF NOT EXISTS updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
```

## Opsi 4: Gunakan Nama Tabel Berbeda

Jika Anda ingin tetap mempertahankan tabel users yang ada, kita bisa membuat tabel baru dengan nama berbeda:

```sql
CREATE TABLE auth_users (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    role TINYINT(1) NOT NULL DEFAULT 1,
    email_verified TINYINT(1) NOT NULL DEFAULT 0,
    verification_token VARCHAR(255),
    remember_token VARCHAR(255),
    remember_expiry INT(11),
    reset_token VARCHAR(255),
    reset_expiry INT(11),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

Jika Anda menggunakan opsi 4, Anda perlu mengupdate file `auth/config.php` untuk mengubah nama tabel dari `users` menjadi `auth_users`.

## Rekomendasi Saya

Saya sarankan Anda mencoba Opsi 3 terlebih dahulu (memodifikasi tabel yang ada) karena ini adalah pendekatan yang paling aman jika tabel users sudah berisi data.

Setelah memodifikasi tabel users, lanjutkan dengan membuat tabel activity_logs dan orders seperti yang saya berikan sebelumnya.

Opsi mana yang ingin Anda coba? Atau Anda bisa memberi tahu saya hasil dari query `DESCRIBE users;` agar saya bisa memberikan solusi yang lebih spesifik.

### USER
ini sql saya

### ASSISTANT
Terima kasih telah membagikan struktur SQL Anda. Saya melihat bahwa Anda sudah memiliki tabel `users` dengan struktur yang cukup lengkap untuk sistem autentikasi. Mari saya analisis struktur yang ada dan berikan solusi yang tepat.

## Analisis Struktur Tabel Users yang Ada

Berdasarkan struktur yang Anda berikan, tabel `users` Anda sudah memiliki:
- Kolom dasar seperti `id`, `name`, `email`, `password`, dll.
- Beberapa kolom untuk sistem autentikasi seperti `email_verified`, `verification_token`, dll.
- Kolom `role` untuk sistem peran

## Solusi yang Tepat

Karena tabel `users` sudah ada, kita tidak perlu membuatnya lagi. Sebagai gantinya, kita perlu:

1. **Memodifikasi tabel users** (jika ada kolom yang kurang)
2. **Membuat tabel activity_logs** (untuk mencatat aktivitas pengguna)
3. **Membuat tabel orders** (untuk sistem pesanan)

### 1. Modifikasi Tabel Users (Jika Diperlukan)

Mari kita periksa apakah ada kolom yang kurang dari struktur yang kita butuhkan:

```sql
-- Tambahkan kolom yang mungkin belum ada
ALTER TABLE users ADD COLUMN IF NOT EXISTS remember_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS remember_expiry INT(11);
ALTER TABLE users ADD COLUMN IF NOT EXISTS reset_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS reset_expiry INT(11);
```

### 2. Buat Tabel Activity Logs

```sql
CREATE TABLE activity_logs (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11),
    action VARCHAR(255) NOT NULL,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL
);
```

### 3. Buat Tabel Orders

```sql
CREATE TABLE orders (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11) NOT NULL,
    service_id INT(11) NOT NULL,
    order_number VARCHAR(50) NOT NULL UNIQUE,
    status VARCHAR(50) NOT NULL DEFAULT 'pending',
    total_amount DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

### 4. Tambahkan User Admin (Jika Belum Ada)

```sql
-- Periksa apakah user admin sudah ada
SELECT * FROM users WHERE email = 'admin@situneo.my.id';

-- Jika belum ada, tambahkan user admin
INSERT INTO users (name, email, password, phone, role, email_verified) 
VALUES ('Admin', 'admin@situneo.my.id', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', '+628123456789', 3, 1);
```

## Update File Konfigurasi

Berdasarkan struktur tabel yang ada, pastikan file `auth/config.php` Anda sudah sesuai:

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Authentication Config
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

// Start session
session_start();

// Database configuration
define('DB_HOST', 'localhost');
define('DB_USER', 'username'); // Sesuaikan dengan setting Anda
define('DB_PASS', 'password'); // Sesuaikan dengan setting Anda
define('DB_NAME', 'situneo_db'); // Sesuaikan dengan nama database Anda

// Create connection
$conn = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME);

// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// App settings
define('APP_NAME', 'SITUNEO DIGITAL');
define('APP_URL', 'https://situneo.my.id');
define('FROM_EMAIL', 'noreply@situneo.my.id');
define('FROM_NAME', 'SITUNEO DIGITAL');

// Session settings
define('SESSION_LIFETIME', 86400); // 24 hours in seconds
define('REMEMBER_LIFETIME', 2592000); // 30 days in seconds

// Password settings
define('MIN_PASSWORD_LENGTH', 8);

// Role definitions (sesuaikan dengan struktur tabel Anda)
define('ROLE_USER', 1);
define('ROLE_ADMIN', 2);
define('ROLE_SUPER_ADMIN', 3);

// Include functions
require_once 'functions.php';
?>
```

## Langkah Selanjutnya

1. Jalankan query untuk memodifikasi tabel users (jika diperlukan)
2. Buat tabel activity_logs
3. Buat tabel orders
4. Periksa apakah user admin sudah ada, jika belum tambahkan
5. Update file konfigurasi database di `auth/config.php`
6. Test sistem autentikasi dengan mencoba login

Apakah Anda ingin saya bantu dengan query lainnya atau ada bagian tertentu dari sistem autentikasi yang perlu kita sesuaikan dengan struktur tabel yang sudah ada?

### USER
// Database credentials
define('DB_HOST', 'localhost');
define('DB_USER', 'nrrskfvk_user_situneo_digital');
define('DB_PASS', 'Devin1922$');
define('DB_NAME', 'nrrskfvk_situneo_digital');


### ASSISTANT
Terima kasih telah berbagikan kredensial database Anda. Sekarang saya bisa membantu Anda dengan konfigurasi yang tepat untuk sistem autentikasi Project Situneo Digital.

## Update File Konfigurasi

Berdasarkan kredensial yang Anda berikan, mari kita update file `auth/config.php`:

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Authentication Config
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

// Start session
session_start();

// Database configuration
define('DB_HOST', 'localhost');
define('DB_USER', 'nrrskfvk_user_situneo_digital');
define('DB_PASS', 'Devin1922$');
define('DB_NAME', 'nrrskfvk_situneo_digital');

// Create connection
$conn = mysqli_connect(DB_HOST, DB_USER, DB_PASS, DB_NAME);

// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}

// Set charset to utf8mb4 for full Unicode support
mysqli_set_charset($conn, "utf8mb4");

// App settings
define('APP_NAME', 'SITUNEO DIGITAL');
define('APP_URL', 'https://situneo.my.id');
define('FROM_EMAIL', 'noreply@situneo.my.id');
define('FROM_NAME', 'SITUNEO DIGITAL');

// Session settings
define('SESSION_LIFETIME', 86400); // 24 hours in seconds
define('REMEMBER_LIFETIME', 2592000); // 30 days in seconds

// Password settings
define('MIN_PASSWORD_LENGTH', 8);

// Role definitions (sesuaikan dengan struktur tabel Anda)
define('ROLE_USER', 1);
define('ROLE_ADMIN', 2);
define('ROLE_SUPER_ADMIN', 3);

// Include functions
require_once 'functions.php';
?>
```

## Query SQL untuk Tabel yang Diperlukan

Berdasarkan struktur database yang Anda miliki, mari kita buat tabel yang diperlukan untuk sistem autentikasi:

### 1. Modifikasi Tabel Users (Jika Diperlukan)

```sql
-- Tambahkan kolom yang mungkin belum ada
ALTER TABLE users ADD COLUMN IF NOT EXISTS remember_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS remember_expiry INT(11);
ALTER TABLE users ADD COLUMN IF NOT EXISTS reset_token VARCHAR(255);
ALTER TABLE users ADD COLUMN IF NOT EXISTS reset_expiry INT(11);
```

### 2. Buat Tabel Activity Logs

```sql
CREATE TABLE IF NOT EXISTS activity_logs (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11),
    action VARCHAR(255) NOT NULL,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL
);
```

### 3. Buat Tabel Orders

```sql
CREATE TABLE IF NOT EXISTS orders (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    user_id INT(11) NOT NULL,
    service_id INT(11) NOT NULL,
    order_number VARCHAR(50) NOT NULL UNIQUE,
    status VARCHAR(50) NOT NULL DEFAULT 'pending',
    total_amount DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

### 4. Tambahkan User Admin (Jika Belum Ada)

```sql
-- Periksa apakah user admin sudah ada
SELECT * FROM users WHERE email = 'admin@situneo.my.id';

-- Jika belum ada, tambahkan user admin
INSERT IGNORE INTO users (name, email, password, phone, role, email_verified) 
VALUES ('Admin', 'admin@situneo.my.id', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', '+628123456789', 3, 1);
```

## Integrasi dengan Sistem yang Ada

Berdasarkan struktur database yang Anda miliki, kita perlu menyesuaikan beberapa hal:

### 1. Update File `auth/functions.php`

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Authentication Functions
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

// Generate random token
function generateToken($length = 32) {
    return bin2hex(random_bytes($length / 2));
}

// Hash password using bcrypt
function hashPassword($password) {
    return password_hash($password, PASSWORD_BCRYPT);
}

// Verify password
function verifyPassword($password, $hash) {
    return password_verify($password, $hash);
}

// Check if user is logged in
function isLoggedIn() {
    return isset($_SESSION['user_id']);
}

// Get current user data
function getCurrentUser() {
    if (isLoggedIn()) {
        global $conn;
        $user_id = $_SESSION['user_id'];
        
        $stmt = $conn->prepare("SELECT * FROM users WHERE id = ?");
        $stmt->bind_param("i", $user_id);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            return $result->fetch_assoc();
        }
    }
    return null;
}

// Check if user has specific role
function hasRole($role) {
    $user = getCurrentUser();
    if ($user) {
        return $user['role'] >= $role;
    }
    return false;
}

// Redirect if not logged in
function requireLogin() {
    if (!isLoggedIn()) {
        $_SESSION['redirect_url'] = $_SERVER['REQUEST_URI'];
        header('Location: login.php');
        exit;
    }
}

// Redirect if user doesn't have required role
function requireRole($role) {
    requireLogin();
    if (!hasRole($role)) {
        header('Location: dashboard.php?error=unauthorized');
        exit;
    }
}

// Send verification email
function sendVerificationEmail($email, $token) {
    $subject = "Verifikasi Email Anda - " . APP_NAME;
    $verificationLink = APP_URL . "/auth/verify.php?token=" . $token;
    
    $message = "
    <html>
    <head>
        <title>Verifikasi Email</title>
    </head>
    <body>
        <div style='font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;'>
            <div style='text-align: center; margin-bottom: 30px;'>
                <img src='" . APP_URL . "/logo' alt='" . APP_NAME . "' style='max-width: 150px;'>
            </div>
            <h2 style='color: #1E5C99;'>Verifikasi Email Anda</h2>
            <p>Terima kasih telah mendaftar di " . APP_NAME . ". Klik tombol di bawah untuk verifikasi email Anda:</p>
            <div style='text-align: center; margin: 30px 0;'>
                <a href='" . $verificationLink . "' style='background: #1E5C99; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;'>Verifikasi Email</a>
            </div>
            <p>Atau salin dan tempel link berikut ke browser Anda:</p>
            <p style='word-break: break-all; background: #f5f5f5; padding: 10px; border-radius: 5px;'>" . $verificationLink . "</p>
            <p>Link ini akan kadaluarsa dalam 24 jam.</p>
            <p>Terima kasih,<br>Tim " . APP_NAME . "</p>
        </div>
    </body>
    </html>
    ";
    
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
    $headers .= "From: " . FROM_NAME . " <" . FROM_EMAIL . ">\r\n";
    
    return mail($email, $subject, $message, $headers);
}

// Send password reset email
function sendPasswordResetEmail($email, $token) {
    $subject = "Reset Password Anda - " . APP_NAME;
    $resetLink = APP_URL . "/auth/reset_password.php?token=" . $token;
    
    $message = "
    <html>
    <head>
        <title>Reset Password</title>
    </head>
    <body>
        <div style='font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;'>
            <div style='text-align: center; margin-bottom: 30px;'>
                <img src='" . APP_URL . "/logo' alt='" . APP_NAME . "' style='max-width: 150px;'>
            </div>
            <h2 style='color: #1E5C99;'>Reset Password Anda</h2>
            <p>Anda meminta untuk reset password. Klik tombol di bawah untuk membuat password baru:</p>
            <div style='text-align: center; margin: 30px 0;'>
                <a href='" . $resetLink . "' style='background: #1E5C99; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;'>Reset Password</a>
            </div>
            <p>Atau salin dan tempel link berikut ke browser Anda:</p>
            <p style='word-break: break-all; background: #f5f5f5; padding: 10px; border-radius: 5px;'>" . $resetLink . "</p>
            <p>Link ini akan kadaluarsa dalam 1 jam.</p>
            <p>Jika Anda tidak meminta reset password, abaikan email ini.</p>
            <p>Terima kasih,<br>Tim " . APP_NAME . "</p>
        </div>
    </body>
    </html>
    ";
    
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
    $headers .= "From: " . FROM_NAME . " <" . FROM_EMAIL . ">\r\n";
    
    return mail($email, $subject, $message, $headers);
}

// Log user activity
function logActivity($user_id, $action) {
    global $conn;
    
    $ip_address = $_SERVER['REMOTE_ADDR'];
    $user_agent = $_SERVER['HTTP_USER_AGENT'];
    
    $stmt = $conn->prepare("INSERT INTO activity_logs (user_id, action, ip_address, user_agent) VALUES (?, ?, ?, ?)");
    $stmt->bind_param("isss", $user_id, $action, $ip_address, $user_agent);
    $stmt->execute();
}

// Get user orders
function getUserOrders($user_id, $limit = 10) {
    global $conn;
    
    $stmt = $conn->prepare("SELECT o.*, s.name as service_name FROM orders o LEFT JOIN services s ON o.service_id = s.id WHERE o.user_id = ? ORDER BY o.created_at DESC LIMIT ?");
    $stmt->bind_param("ii", $user_id, $limit);
    $stmt->execute();
    $result = $stmt->get_result();
    
    $orders = [];
    while ($row = $result->fetch_assoc()) {
        $orders[] = $row;
    }
    
    return $orders;
}
?>
```

### 2. Update File `auth/register.php`

Sesuaikan dengan struktur tabel yang ada:

```php
<?php
// ... (bagian atas file tetap sama)

// Process registration form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $name = trim($_POST['name']);
    $email = trim($_POST['email']);
    $password = $_POST['password'];
    $confirm_password = $_POST['confirm_password'];
    $phone = trim($_POST['phone']);
    
    // Validation
    if (empty($name)) {
        $errors['name'] = 'Nama lengkap harus diisi';
    }
    
    if (empty($email)) {
        $errors['email'] = 'Email harus diisi';
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = 'Format email tidak valid';
    } else {
        // Check if email already exists
        $stmt = $conn->prepare("SELECT id FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            $errors['email'] = 'Email sudah terdaftar';
        }
    }
    
    if (empty($password)) {
        $errors['password'] = 'Password harus diisi';
    } elseif (strlen($password) < MIN_PASSWORD_LENGTH) {
        $errors['password'] = 'Password minimal ' . MIN_PASSWORD_LENGTH . ' karakter';
    }
    
    if ($password !== $confirm_password) {
        $errors['confirm_password'] = 'Konfirmasi password tidak cocok';
    }
    
    if (empty($phone)) {
        $errors['phone'] = 'Nomor telepon harus diisi';
    }
    
    // If no errors, register user
    if (empty($errors)) {
        $hashed_password = hashPassword($password);
        $verification_token = generateToken();
        $role = ROLE_USER; // Default role
        $referral_code = strtoupper(substr(md5(time()), 0, 6));
        
        $stmt = $conn->prepare("INSERT INTO users (name, email, password, phone, role, email_verified, verification_token, referral_code, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, NOW())");
        $email_verified = 0;
        $stmt->bind_param("ssssisss", $name, $email, $hashed_password, $phone, $role, $email_verified, $verification_token, $referral_code);
        
        if ($stmt->execute()) {
            $user_id = $conn->insert_id;
            
            // Send verification email
            if (sendVerificationEmail($email, $verification_token)) {
                $success = 'Pendaftaran berhasil! Silakan periksa email Anda untuk verifikasi.';
                
                // Log activity
                logActivity($user_id, 'User registered');
            } else {
                $errors['general'] = 'Pendaftaran berhasil, tetapi gagal mengirim email verifikasi. Silakan hubungi admin.';
            }
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// ... (bagian bawah file tetap sama)
?>
```

## Langkah Selanjutnya

1. Update file `auth/config.php` dengan kredensial database yang benar
2. Jalankan query SQL untuk membuat tabel yang diperlukan
3. Update file `auth/functions.php` dan `auth/register.php` sesuai dengan struktur tabel yang ada
4. Test sistem autentikasi dengan mencoba mendaftar dan login

Apakah Anda ingin saya bantu dengan file lainnya atau ada bagian tertentu dari sistem autentikasi yang perlu kita sesuaikan lebih lanjut?

### USER
ok lanjut

### ASSISTANT
Baik, mari kita lanjutkan dengan implementasi file-file autentikasi lainnya. Saya akan membantu Anda membuat file `auth/forgot_password.php` dan `auth/reset_password.php` untuk fitur lupa password.

### 8. auth/forgot_password.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Forgot Password Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

$errors = [];
$success = '';

// Process forgot password form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $email = trim($_POST['email']);
    
    // Validation
    if (empty($email)) {
        $errors['email'] = 'Email harus diisi';
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = 'Format email tidak valid';
    } else {
        // Check if email exists
        $stmt = $conn->prepare("SELECT id, name FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            $user = $result->fetch_assoc();
            
            // Generate reset token
            $reset_token = generateToken();
            $reset_expiry = time() + 3600; // 1 hour from now
            
            // Update user with reset token
            $stmt = $conn->prepare("UPDATE users SET reset_token = ?, reset_expiry = ? WHERE id = ?");
            $stmt->bind_param("sii", $reset_token, $reset_expiry, $user['id']);
            
            if ($stmt->execute()) {
                // Send reset email
                if (sendPasswordResetEmail($email, $reset_token)) {
                    $success = 'Link reset password telah dikirim ke email Anda. Silakan periksa inbox atau folder spam.';
                    
                    // Log activity
                    logActivity($user['id'], 'Password reset requested');
                } else {
                    $errors['general'] = 'Terjadi kesalahan saat mengirim email. Silakan coba lagi.';
                }
            } else {
                $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
            }
        } else {
            // Don't reveal if email exists or not for security
            $success = 'Jika email terdaftar, link reset password akan dikirim ke email Anda.';
        }
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lupa Password - SITUNEO DIGITAL</title>
    <meta name="description" content="Reset password akun SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .auth-container {
            background: rgba(15, 48, 87, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 180, 0, 0.2);
            overflow: hidden;
            width: 100%;
            max-width: 900px;
        }
        
        .auth-row {
            display: flex;
            flex-wrap: wrap;
        }
        
        .auth-left {
            flex: 1;
            min-width: 300px;
            background: var(--gradient-primary);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .auth-right {
            flex: 1;
            min-width: 300px;
            padding: 40px;
        }
        
        .logo {
            margin-bottom: 30px;
        }
        
        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .auth-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 12px 30px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .auth-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .auth-link:hover {
            color: var(--bright-gold);
            text-decoration: underline;
        }
        
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        .invalid-feedback {
            color: #ff6b6b;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        @media (max-width: 768px) {
            .auth-left, .auth-right {
                padding: 30px 20px;
            }
            
            .auth-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-row">
            <div class="auth-left">
                <div class="logo">
                    <img src="https://situneo.my.id/logo" alt="Situneo">
                </div>
                <h2 class="auth-title">SITUNEO DIGITAL</h2>
                <p class="mb-4">Lupa password? Jangan khawatir, kami akan membantu Anda mereset password akun Anda.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="#" class="text-white fs-4"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-instagram"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>
            <div class="auth-right">
                <h3 class="mb-4">Lupa Password</h3>
                
                <?php if (!empty($success)): ?>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle-fill me-2"></i><?= $success ?>
                    </div>
                <?php endif; ?>
                
                <?php if (!empty($errors['general'])): ?>
                    <div class="alert alert-danger">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $errors['general'] ?>
                    </div>
                <?php endif; ?>
                
                <?php if (empty($success)): ?>
                    <form method="post" action="" id="forgotPasswordForm">
                        <div class="form-group">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Masukkan email terdaftar" value="<?= isset($_POST['email']) ? htmlspecialchars($_POST['email']) : '' ?>">
                            <?php if (!empty($errors['email'])): ?>
                                <div class="invalid-feedback"><?= $errors['email'] ?></div>
                            <?php endif; ?>
                        </div>
                        
                        <button type="submit" class="btn btn-gold">Kirim Link Reset</button>
                    </form>
                <?php endif; ?>
                
                <div class="text-center mt-4">
                    <p>Ingat password Anda? <a href="login.php" class="auth-link">Masuk</a></p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Form validation
        document.getElementById('forgotPasswordForm').addEventListener('submit', function(e) {
            const email = document.getElementById('email').value;
            
            if (!email) {
                e.preventDefault();
                document.getElementById('email').focus();
                return false;
            }
        });
    </script>
</body>
</html>
```

### 9. auth/reset_password.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Reset Password Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

$errors = [];
$success = '';
$token_valid = false;

// Check if token is provided
if (isset($_GET['token'])) {
    $token = $_GET['token'];
    $current_time = time();
    
    // Find user with this token and valid expiry
    $stmt = $conn->prepare("SELECT id, email FROM users WHERE reset_token = ? AND reset_expiry > ?");
    $stmt->bind_param("si", $token, $current_time);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $user = $result->fetch_assoc();
        $token_valid = true;
        
        // Process reset password form
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $password = $_POST['password'];
            $confirm_password = $_POST['confirm_password'];
            
            // Validation
            if (empty($password)) {
                $errors['password'] = 'Password harus diisi';
            } elseif (strlen($password) < MIN_PASSWORD_LENGTH) {
                $errors['password'] = 'Password minimal ' . MIN_PASSWORD_LENGTH . ' karakter';
            }
            
            if ($password !== $confirm_password) {
                $errors['confirm_password'] = 'Konfirmasi password tidak cocok';
            }
            
            // If no errors, reset password
            if (empty($errors)) {
                $hashed_password = hashPassword($password);
                
                // Update user password and clear reset token
                $stmt = $conn->prepare("UPDATE users SET password = ?, reset_token = NULL, reset_expiry = NULL WHERE id = ?");
                $stmt->bind_param("si", $hashed_password, $user['id']);
                
                if ($stmt->execute()) {
                    $success = 'Password berhasil direset! Anda sekarang dapat masuk dengan password baru.';
                    
                    // Log activity
                    logActivity($user['id'], 'Password reset completed');
                    
                    // Redirect to login after 3 seconds
                    header('refresh:3;url=login.php?message=password_reset_success');
                } else {
                    $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
                }
            }
        }
    } else {
        $errors['general'] = 'Token reset tidak valid atau sudah kadaluarsa. Silakan minta link reset password baru.';
    }
} else {
    $errors['general'] = 'Token reset tidak ditemukan. Silakan minta link reset password baru.';
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - SITUNEO DIGITAL</title>
    <meta name="description" content="Reset password akun SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .auth-container {
            background: rgba(15, 48, 87, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 180, 0, 0.2);
            overflow: hidden;
            width: 100%;
            max-width: 900px;
        }
        
        .auth-row {
            display: flex;
            flex-wrap: wrap;
        }
        
        .auth-left {
            flex: 1;
            min-width: 300px;
            background: var(--gradient-primary);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .auth-right {
            flex: 1;
            min-width: 300px;
            padding: 40px;
        }
        
        .logo {
            margin-bottom: 30px;
        }
        
        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .auth-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 12px 30px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .auth-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .auth-link:hover {
            color: var(--bright-gold);
            text-decoration: underline;
        }
        
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        .invalid-feedback {
            color: #ff6b6b;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .password-strength {
            height: 5px;
            border-radius: 5px;
            margin-top: 5px;
            transition: all 0.3s;
        }
        
        .strength-weak {
            background: #dc3545;
            width: 33%;
        }
        
        .strength-medium {
            background: #ffc107;
            width: 66%;
        }
        
        .strength-strong {
            background: #28a745;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .auth-left, .auth-right {
                padding: 30px 20px;
            }
            
            .auth-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-row">
            <div class="auth-left">
                <div class="logo">
                    <img src="https://situneo.my.id/logo" alt="Situneo">
                </div>
                <h2 class="auth-title">SITUNEO DIGITAL</h2>
                <p class="mb-4">Buat password baru yang kuat untuk melindungi akun Anda.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="#" class="text-white fs-4"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-instagram"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="text-white fs-4"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>
            <div class="auth-right">
                <h3 class="mb-4">Reset Password</h3>
                
                <?php if (!empty($success)): ?>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle-fill me-2"></i><?= $success ?>
                    </div>
                    <div class="text-center mt-4">
                        <p>Anda akan dialihkan ke halaman login dalam beberapa detik...</p>
                        <a href="login.php" class="btn btn-gold">Masuk Sekarang</a>
                    </div>
                <?php else: ?>
                    <?php if (!empty($errors['general'])): ?>
                        <div class="alert alert-danger">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $errors['general'] ?>
                        </div>
                    <?php endif; ?>
                    
                    <?php if ($token_valid): ?>
                        <form method="post" action="" id="resetPasswordForm">
                            <div class="form-group">
                                <label for="password" class="form-label">Password Baru</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="password" name="password" placeholder="Masukkan password baru">
                                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                                <div class="password-strength" id="passwordStrength"></div>
                                <?php if (!empty($errors['password'])): ?>
                                    <div class="invalid-feedback"><?= $errors['password'] ?></div>
                                <?php endif; ?>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirm_password" class="form-label">Konfirmasi Password Baru</label>
                                <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Konfirmasi password baru">
                                <?php if (!empty($errors['confirm_password'])): ?>
                                    <div class="invalid-feedback"><?= $errors['confirm_password'] ?></div>
                                <?php endif; ?>
                            </div>
                            
                            <button type="submit" class="btn btn-gold">Reset Password</button>
                        </form>
                    <?php else: ?>
                        <div class="text-center mt-4">
                            <a href="forgot_password.php" class="btn btn-gold">Minta Link Reset Baru</a>
                        </div>
                    <?php endif; ?>
                <?php endif; ?>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Toggle password visibility
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('bi-eye');
                icon.classList.add('bi-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('bi-eye-slash');
                icon.classList.add('bi-eye');
            }
        });
        
        // Password strength checker
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const strengthElement = document.getElementById('passwordStrength');
            
            let strength = 0;
            
            // Check password strength
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]+/)) strength++;
            if (password.match(/[A-Z]+/)) strength++;
            if (password.match(/[0-9]+/)) strength++;
            if (password.match(/[$@#&!]+/)) strength++;
            
            // Update strength indicator
            strengthElement.className = 'password-strength';
            
            if (password.length > 0) {
                if (strength <= 2) {
                    strengthElement.classList.add('strength-weak');
                } else if (strength <= 4) {
                    strengthElement.classList.add('strength-medium');
                } else {
                    strengthElement.classList.add('strength-strong');
                }
            }
        });
        
        // Form validation
        document.getElementById('resetPasswordForm').addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            
            if (password !== confirmPassword) {
                e.preventDefault();
                alert('Password dan konfirmasi password tidak cocok!');
                return false;
            }
        });
    </script>
</body>
</html>
```

### 10. auth/profile.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - User Profile Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Require login
requireLogin();

// Get current user
$user = getCurrentUser();

$errors = [];
$success = '';

// Process profile update form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $name = trim($_POST['name']);
    $phone = trim($_POST['phone']);
    $address = trim($_POST['address']);
    
    // Validation
    if (empty($name)) {
        $errors['name'] = 'Nama lengkap harus diisi';
    }
    
    if (empty($phone)) {
        $errors['phone'] = 'Nomor telepon harus diisi';
    }
    
    // If no errors, update profile
    if (empty($errors)) {
        $stmt = $conn->prepare("UPDATE users SET name = ?, phone = ?, address = ? WHERE id = ?");
        $stmt->bind_param("sssi", $name, $phone, $address, $user['id']);
        
        if ($stmt->execute()) {
            $success = 'Profil berhasil diperbarui!';
            
            // Update session data
            $_SESSION['user_name'] = $name;
            
            // Log activity
            logActivity($user['id'], 'Profile updated');
            
            // Refresh user data
            $user = getCurrentUser();
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// Process password change form
if (isset($_POST['change_password'])) {
    $current_password = $_POST['current_password'];
    $new_password = $_POST['new_password'];
    $confirm_password = $_POST['confirm_password'];
    
    // Validation
    if (empty($current_password)) {
        $errors['current_password'] = 'Password saat ini harus diisi';
    } elseif (!verifyPassword($current_password, $user['password'])) {
        $errors['current_password'] = 'Password saat ini salah';
    }
    
    if (empty($new_password)) {
        $errors['new_password'] = 'Password baru harus diisi';
    } elseif (strlen($new_password) < MIN_PASSWORD_LENGTH) {
        $errors['new_password'] = 'Password minimal ' . MIN_PASSWORD_LENGTH . ' karakter';
    }
    
    if ($new_password !== $confirm_password) {
        $errors['confirm_password'] = 'Konfirmasi password tidak cocok';
    }
    
    // If no errors, change password
    if (empty($errors)) {
        $hashed_password = hashPassword($new_password);
        
        $stmt = $conn->prepare("UPDATE users SET password = ? WHERE id = ?");
        $stmt->bind_param("si", $hashed_password, $user['id']);
        
        if ($stmt->execute()) {
            $success = 'Password berhasil diubah!';
            
            // Log activity
            logActivity($user['id'], 'Password changed');
            
            // Refresh user data
            $user = getCurrentUser();
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// Process avatar upload
if (isset($_FILES['avatar']) && $_FILES['avatar']['error'] === UPLOAD_ERR_OK) {
    $avatar = $_FILES['avatar'];
    $avatar_name = $avatar['name'];
    $avatar_tmp = $avatar['tmp_name'];
    $avatar_size = $avatar['size'];
    $avatar_type = $avatar['type'];
    
    // Validation
    $allowed_types = ['image/jpeg', 'image/png', 'image/gif'];
    $max_size = 2 * 1024 * 1024; // 2MB
    
    if (!in_array($avatar_type, $allowed_types)) {
        $errors['avatar'] = 'Format avatar harus JPEG, PNG, atau GIF';
    } elseif ($avatar_size > $max_size) {
        $errors['avatar'] = 'Ukuran avatar maksimal 2MB';
    } else {
        // Generate unique filename
        $avatar_ext = pathinfo($avatar_name, PATHINFO_EXTENSION);
        $avatar_new_name = 'avatar_' . $user['id'] . '_' . time() . '.' . $avatar_ext;
        $avatar_path = '../uploads/avatars/' . $avatar_new_name;
        
        // Create directory if not exists
        if (!is_dir('../uploads/avatars/')) {
            mkdir('../uploads/avatars/', 0777, true);
        }
        
        // Upload file
        if (move_uploaded_file($avatar_tmp, $avatar_path)) {
            // Update user avatar in database
            $stmt = $conn->prepare("UPDATE users SET avatar = ? WHERE id = ?");
            $stmt->bind_param("si", $avatar_new_name, $user['id']);
            
            if ($stmt->execute()) {
                $success = 'Avatar berhasil diperbarui!';
                
                // Log activity
                logActivity($user['id'], 'Avatar updated');
                
                // Refresh user data
                $user = getCurrentUser();
            } else {
                $errors['general'] = 'Terjadi kesalahan saat memperbarui avatar.';
            }
        } else {
            $errors['avatar'] = 'Terjadi kesalahan saat mengupload avatar.';
        }
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Saya - SITUNEO DIGITAL</title>
    <meta name="description" content="Kelola profil pengguna SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Profile Card */
        .profile-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .avatar-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
        }
        
        .avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--gold);
        }
        
        .avatar-placeholder {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--gradient-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 700;
            color: var(--dark-blue);
            border: 4px solid var(--gold);
        }
        
        .avatar-upload {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--gradient-gold);
            color: var(--dark-blue);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .avatar-upload:hover {
            transform: scale(1.1);
        }
        
        .profile-name {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 10px;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .profile-email {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 20px;
        }
        
        .profile-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        /* Form Card */
        .form-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .form-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .form-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--gold);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 12px 30px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        .invalid-feedback {
            color: #ff6b6b;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="profile.php" class="sidebar-item active">
            <i class="bi bi-person"></i> Profil Saya
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <?php if (hasRole(ROLE_ADMIN)): ?>
            <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
            <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
            <a href="admin/users.php" class="sidebar-item">
                <i class="bi bi-people"></i> Kelola Pengguna
            </a>
            <a href="admin/orders.php" class="sidebar-item">
                <i class="bi bi-receipt"></i> Semua Pesanan
            </a>
            <a href="admin/services.php" class="sidebar-item">
                <i class="bi bi-gear"></i> Kelola Layanan
            </a>
            <a href="admin/reports.php" class="sidebar-item">
                <i class="bi bi-graph-up"></i> Laporan
            </a>
        <?php endif; ?>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (!empty($success)): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i><?= $success ?>
                </div>
            <?php endif; ?>
            
            <?php if (!empty($errors['general'])): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $errors['general'] ?>
                </div>
            <?php endif; ?>
            
            <div class="row">
                <div class="col-lg-4 mb-4" data-aos="fade-up" data-aos-delay="100">
                    <div class="profile-card text-center">
                        <div class="avatar-container">
                            <?php if ($user['avatar']): ?>
                                <img src="../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>" class="avatar">
                            <?php else: ?>
                                <div class="avatar-placeholder"><?= strtoupper(substr($user['name'], 0, 1)) ?></div>
                            <?php endif; ?>
                            <label for="avatar" class="avatar-upload">
                                <i class="bi bi-camera-fill"></i>
                            </label>
                            <input type="file" id="avatar" name="avatar" accept="image/*" style="display: none;">
                        </div>
                        <h3 class="profile-name"><?= htmlspecialchars($user['name']) ?></h3>
                        <p class="profile-email"><?= htmlspecialchars($user['email']) ?></p>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <div class="stat-value"><?= getUserOrders($user['id']) ? count(getUserOrders($user['id'])) : 0 ?></div>
                                <div class="stat-label">Pesanan</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value"><?= $user['role'] == 3 ? 'Admin' : ($user['role'] == 2 ? 'Staff' : 'User') ?></div>
                                <div class="stat-label">Role</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value"><?= date('d M Y', strtotime($user['created_at'])) ?></div>
                                <div class="stat-label">Bergabung</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-8 mb-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="form-card">
                        <h4 class="form-title">Informasi Profil</h4>
                        <form method="post" action="">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="name" class="form-label">Nama Lengkap</label>
                                        <input type="text" class="form-control" id="name" name="name" value="<?= htmlspecialchars($user['name']) ?>">
                                        <?php if (!empty($errors['name'])): ?>
                                            <div class="invalid-feedback"><?= $errors['name'] ?></div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" name="email" value="<?= htmlspecialchars($user['email']) ?>" readonly>
                                        <small class="form-text text-muted">Email tidak dapat diubah. Hubungi admin untuk mengubah email.</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="phone" class="form-label">Nomor Telepon</label>
                                        <input type="tel" class="form-control" id="phone" name="phone" value="<?= htmlspecialchars($user['phone']) ?>">
                                        <?php if (!empty($errors['phone'])): ?>
                                            <div class="invalid-feedback"><?= $errors['phone'] ?></div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="referral_code" class="form-label">Kode Referral</label>
                                        <input type="text" class="form-control" id="referral_code" value="<?= htmlspecialchars($user['referral_code']) ?>" readonly>
                                        <small class="form-text text-muted">Bagikan kode ini kepada teman Anda.</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="address" class="form-label">Alamat</label>
                                <textarea class="form-control" id="address" name="address" rows="3"><?= htmlspecialchars($user['address']) ?></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-gold">Simpan Perubahan</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-lg-12 mb-4" data-aos="fade-up" data-aos-delay="300">
                    <div class="form-card">
                        <h4 class="form-title">Ubah Password</h4>
                        <form method="post" action="">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="current_password" class="form-label">Password Saat Ini</label>
                                        <input type="password" class="form-control" id="current_password" name="current_password">
                                        <?php if (!empty($errors['current_password'])): ?>
                                            <div class="invalid-feedback"><?= $errors['current_password'] ?></div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="new_password" class="form-label">Password Baru</label>
                                        <input type="password" class="form-control" id="new_password" name="new_password">
                                        <?php if (!empty($errors['new_password'])): ?>
                                            <div class="invalid-feedback"><?= $errors['new_password'] ?></div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="confirm_password" class="form-label">Konfirmasi Password Baru</label>
                                        <input type="password" class="form-control" id="confirm_password" name="confirm_password">
                                        <?php if (!empty($errors['confirm_password'])): ?>
                                            <div class="invalid-feedback"><?= $errors['confirm_password'] ?></div>
                                        <?php endif; ?>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" name="change_password" class="btn btn-gold">Ubah Password</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Avatar upload
        document.getElementById('avatar').addEventListener('change', function() {
            const form = document.createElement('form');
            form.method = 'post';
            form.enctype = 'multipart/form-data';
            
            const avatarInput = document.createElement('input');
            avatarInput.type = 'file';
            avatarInput.name = 'avatar';
            avatarInput.files = this.files;
            
            form.appendChild(avatarInput);
            document.body.appendChild(form);
            form.submit();
        });
        
        // Form validation
        document.querySelector('form').addEventListener('submit', function(e) {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            
            if (!name) {
                e.preventDefault();
                document.getElementById('name').focus();
                return false;
            }
            
            if (!phone) {
                e.preventDefault();
                document.getElementById('phone').focus();
                return false;
            }
        });
        
        // Password change form validation
        document.querySelector('form[name="change_password"]').addEventListener('submit', function(e) {
            const currentPassword = document.getElementById('current_password').value;
            const newPassword = document.getElementById('new_password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                e.preventDefault();
                alert('Semua field password harus diisi!');
                return false;
            }
            
            if (newPassword !== confirmPassword) {
                e.preventDefault();
                alert('Password baru dan konfirmasi password tidak cocok!');
                return false;
            }
            
            if (newPassword.length < 8) {
                e.preventDefault();
                alert('Password baru minimal 8 karakter!');
                return false;
            }
        });
    </script>
</body>
</html>
```

## Integrasi dengan Halaman Utama

Sekarang kita perlu mengintegrasikan sistem autentikasi dengan halaman utama Project Situneo Digital. Mari kita update beberapa file:

### 1. Update `index.php`

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Home Page
 * 26 Layanan Digital Lengkap
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

session_start();
date_default_timezone_set('Asia/Jakarta');

// Multi-language content
$text = [
    'id' => [
        'page_title' => 'SITUNEO DIGITAL - Solusi Digital Terlengkap',
        'page_subtitle' => '26 Layanan Digital Profesional untuk Mengembangkan Bisnis Anda',
        'hero_title' => 'Digital Harmony for a Modern World',
        'hero_subtitle' => 'Solusi digital terlengkap untuk mengembangkan bisnis Anda di era modern',
        'btn_get_started' => 'Mulai Sekarang',
        'btn_view_services' => 'Lihat Layanan',
        'btn_login' => 'Masuk',
        'btn_register' => 'Daftar',
        'section_services_title' => 'Layanan Unggulan',
        'section_services_subtitle' => 'Pilih dari 26 layanan digital profesional kami',
        'section_portfolio_title' => 'Portfolio Kami',
        'section_portfolio_subtitle' => 'Hasil kerja kami untuk klien-klien terbaik',
        'section_testimonial_title' => 'Testimoni Klien',
        'section_testimonial_subtitle' => 'Apa kata klien tentang layanan kami',
        'section_pricing_title' => 'Paket Harga',
        'section_pricing_subtitle' => 'Pilih paket yang sesuai dengan kebutuhan Anda',
        'section_contact_title' => 'Hubungi Kami',
        'section_contact_subtitle' => 'Siap membantu mengembangkan bisnis digital Anda',
        'footer_about' => 'SITUNEO DIGITAL adalah penyedia layanan digital terlengkap di Indonesia. Kami menyediakan 26 layanan digital profesional untuk membantu mengembangkan bisnis Anda.',
        'footer_services' => 'Layanan',
        'footer_company' => 'Perusahaan',
        'footer_support' => 'Dukungan',
        'footer_copyright' => '© 2023 SITUNEO DIGITAL. All rights reserved.',
        'nav_home' => 'Beranda',
        'nav_about' => 'Tentang Kami',
        'nav_services' => 'Layanan',
        'nav_portfolio' => 'Portfolio',
        'nav_pricing' => 'Harga',
        'nav_contact' => 'Hubungi',
        'nav_calculator' => 'Hitung Harga',
        'nav_dashboard' => 'Dashboard',
        'nav_logout' => 'Keluar',
    ],
    'en' => [
        'page_title' => 'SITUNEO DIGITAL - Complete Digital Solutions',
        'page_subtitle' => '26 Professional Digital Services to Grow Your Business',
        'hero_title' => 'Digital Harmony for a Modern World',
        'hero_subtitle' => 'Complete digital solutions to grow your business in the modern era',
        'btn_get_started' => 'Get Started',
        'btn_view_services' => 'View Services',
        'btn_login' => 'Login',
        'btn_register' => 'Register',
        'section_services_title' => 'Featured Services',
        'section_services_subtitle' => 'Choose from our 26 professional digital services',
        'section_portfolio_title' => 'Our Portfolio',
        'section_portfolio_subtitle' => 'Our work for the best clients',
        'section_testimonial_title' => 'Client Testimonials',
        'section_testimonial_subtitle' => 'What our clients say about our services',
        'section_pricing_title' => 'Pricing Plans',
        'section_pricing_subtitle' => 'Choose the plan that suits your needs',
        'section_contact_title' => 'Contact Us',
        'section_contact_subtitle' => 'Ready to help develop your digital business',
        'footer_about' => 'SITUNEO DIGITAL is the most complete digital service provider in Indonesia. We provide 26 professional digital services to help grow your business.',
        'footer_services' => 'Services',
        'footer_company' => 'Company',
        'footer_support' => 'Support',
        'footer_copyright' => '© 2023 SITUNEO DIGITAL. All rights reserved.',
        'nav_home' => 'Home',
        'nav_about' => 'About Us',
        'nav_services' => 'Services',
        'nav_portfolio' => 'Portfolio',
        'nav_pricing' => 'Pricing',
        'nav_contact' => 'Contact',
        'nav_calculator' => 'Price Calculator',
        'nav_dashboard' => 'Dashboard',
        'nav_logout' => 'Logout',
    ]
];

$lang = $_GET['lang'] ?? $_SESSION['lang'] ?? 'id';
$_SESSION['lang'] = $lang;
$t = $text[$lang];

// Check if user is logged in
$isLoggedIn = isset($_SESSION['user_id']);
$userName = $isLoggedIn ? $_SESSION['user_name'] : '';
$userRole = $isLoggedIn ? $_SESSION['user_role'] : 0;
?>

<!DOCTYPE html>
<html lang="<?= $lang ?>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?= $t['page_title'] ?></title>
    <meta name="description" content="<?= $t['page_subtitle'] ?>">
    <meta name="keywords" content="digital services, web development, SEO, digital marketing, SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            overflow-x: hidden;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Language Switcher */
        .lang-switcher {
            display: flex;
            gap: 5px;
        }

        .lang-btn {
            padding: 5px 12px;
            border-radius: 20px;
            background: rgba(255,180,0,0.1);
            border: 1px solid rgba(255,180,0,0.3);
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .lang-btn:hover, .lang-btn.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
            font-weight: 700;
        }
        
        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 150px 20px 80px;
            position: relative;
            background: radial-gradient(ellipse at top, rgba(255, 180, 0, 0.1) 0%, transparent 50%);
        }
        
        .hero-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            margin-bottom: 1.5rem;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            max-width: 700px;
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 15px 35px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
            margin-right: 15px;
            margin-bottom: 15px;
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 2px solid var(--gold);
            padding: 15px 35px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            margin-right: 15px;
            margin-bottom: 15px;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
        }
        
        /* Section Styles */
        .section {
            padding: 80px 0;
            position: relative;
        }
        
        .section-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 800;
            text-align: center;
            margin-bottom: 1rem;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--text-light);
            max-width: 700px;
            margin: 0 auto 3rem;
        }
        
        /* Service Card */
        .service-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.3);
            border-color: var(--gold);
        }
        
        .service-icon {
            font-size: 3rem;
            color: var(--gold);
            margin-bottom: 20px;
        }
        
        .service-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .service-description {
            color: var(--text-light);
            margin-bottom: 20px;
        }
        
        /* Portfolio Card */
        .portfolio-card {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            height: 300px;
            margin-bottom: 30px;
            transition: all 0.4s;
        }
        
        .portfolio-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .portfolio-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .portfolio-card:hover .portfolio-image {
            transform: scale(1.1);
        }
        
        .portfolio-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.2) 50%, transparent 100%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .portfolio-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .portfolio-category {
            color: var(--gold);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .portfolio-link {
            color: var(--white);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s;
        }
        
        .portfolio-link:hover {
            color: var(--gold);
            transform: translateX(5px);
        }
        
        /* Testimonial Card */
        .testimonial-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .testimonial-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.3);
            border-color: var(--gold);
        }
        
        .testimonial-content {
            font-style: italic;
            color: var(--text-light);
            margin-bottom: 20px;
            position: relative;
        }
        
        .testimonial-content::before {
            content: '"';
            font-size: 4rem;
            color: var(--gold);
            position: absolute;
            top: -20px;
            left: -10px;
            opacity: 0.3;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
        }
        
        .testimonial-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
        }
        
        .testimonial-name {
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .testimonial-position {
            color: var(--gold);
            font-size: 0.9rem;
        }
        
        /* Pricing Card */
        .pricing-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
            position: relative;
        }
        
        .pricing-card.featured {
            border-color: var(--gold);
            transform: scale(1.05);
        }
        
        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.3);
            border-color: var(--gold);
        }
        
        .pricing-card.featured:hover {
            transform: scale(1.05) translateY(-10px);
        }
        
        .pricing-badge {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-gold);
            color: var(--dark-blue);
            padding: 5px 20px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.8rem;
        }
        
        .pricing-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .pricing-price {
            font-size: 3rem;
            font-weight: 800;
            color: var(--gold);
            text-align: center;
            margin-bottom: 5px;
        }
        
        .pricing-period {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 20px;
        }
        
        .pricing-features {
            list-style: none;
            padding: 0;
            margin-bottom: 30px;
        }
        
        .pricing-features li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }
        
        .pricing-features li:last-child {
            border-bottom: none;
        }
        
        .pricing-features i {
            color: var(--gold);
            margin-right: 10px;
        }
        
        /* Contact Form */
        .contact-form {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Footer */
        footer {
            background: rgba(15, 48, 87, 0.9);
            padding: 50px 0 20px;
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .footer-logo {
            width: 150px;
            height: 150px;
            border-radius: 20px;
            margin-bottom: 20px;
        }
        
        .footer-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--gold);
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--gold);
            transform: translateX(5px);
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 180, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold);
            transition: all 0.3s;
        }
        
        .social-link:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-5px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-light);
        }
        
        /* Floating WhatsApp */
        .floating-wa {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 999;
            background: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 8px 20px rgba(37,211,102,0.4);
            animation: pulse-wa 2s infinite;
            text-decoration: none;
        }

        @keyframes pulse-wa {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 8px 20px rgba(37,211,102,0.4);
            }
            50% { 
                transform: scale(1.1); 
                box-shadow: 0 12px 30px rgba(37,211,102,0.6);
            }
        }
        
        /* Back to Top */
        #backToTop {
            position: fixed;
            bottom: 100px;
            right: 30px;
            z-index: 998;
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: none;
            box-shadow: 0 5px 15px rgba(255,180,0,0.4);
            transition: all 0.3s;
            cursor: pointer;
        }

        #backToTop:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255,180,0,0.6);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .btn-gold, .btn-outline-gold {
                padding: 12px 25px;
                font-size: 0.9rem;
            }
            
            .section {
                padding: 60px 0;
            }
            
            .pricing-card.featured {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="50" height="50" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.8rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                    style="border-color: var(--gold);">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link active" href="index.php"><?= $t['nav_home'] ?></a></li>
                    <li class="nav-item"><a class="nav-link" href="about.php"><?= $t['nav_about'] ?></a></li>
                    <li class="nav-item"><a class="nav-link" href="services.php"><?= $t['nav_services'] ?></a></li>
                    <li class="nav-item"><a class="nav-link" href="portfolio.php"><?= $t['nav_portfolio'] ?></a></li>
                    <li class="nav-item"><a class="nav-link" href="pricing.php"><?= $t['nav_pricing'] ?></a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.php"><?= $t['nav_contact'] ?></a></li>
                    <li class="nav-item"><a class="nav-link" href="calculator.php"><?= $t['nav_calculator'] ?></a></li>
                    
                    <?php if ($isLoggedIn): ?>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-person-circle me-1"></i> <?= htmlspecialchars($userName) ?>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                <li><a class="dropdown-item" href="auth/dashboard.php"><i class="bi bi-speedometer2 me-2"></i><?= $t['nav_dashboard'] ?></a></li>
                                <li><a class="dropdown-item" href="auth/profile.php"><i class="bi bi-person me-2"></i>Profil</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="auth/logout.php"><i class="bi bi-box-arrow-right me-2"></i><?= $t['nav_logout'] ?></a></li>
                            </ul>
                        </li>
                    <?php else: ?>
                        <li class="nav-item ms-3">
                            <a href="auth/login.php" class="btn btn-outline-warning btn-sm" style="border-radius: 50px; padding: 8px 20px;">
                                <i class="bi bi-box-arrow-in-right"></i> <?= $t['btn_login'] ?>
                            </a>
                        </li>
                        <li class="nav-item ms-2">
                            <a href="auth/register.php" class="btn btn-warning btn-sm" style="border-radius: 50px; padding: 8px 20px;">
                                <i class="bi bi-person-plus"></i> <?= $t['btn_register'] ?>
                            </a>
                        </li>
                    <?php endif; ?>
                    
                    <li class="nav-item ms-2">
                        <div class="lang-switcher">
                            <a href="?lang=id" class="lang-btn <?= $lang == 'id' ? 'active' : '' ?>">🇮🇩 ID</a>
                            <a href="?lang=en" class="lang-btn <?= $lang == 'en' ? 'active' : '' ?>">🇺🇸 EN</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6" data-aos="fade-up">
                    <h1 class="hero-title"><?= $t['hero_title'] ?></h1>
                    <p class="hero-subtitle"><?= $t['hero_subtitle'] ?></p>
                    <div class="hero-buttons">
                        <?php if ($isLoggedIn): ?>
                            <a href="auth/dashboard.php" class="btn-gold"><?= $t['nav_dashboard'] ?></a>
                            <a href="services.php" class="btn-outline-gold"><?= $t['btn_view_services'] ?></a>
                        <?php else: ?>
                            <a href="auth/register.php" class="btn-gold"><?= $t['btn_get_started'] ?></a>
                            <a href="services.php" class="btn-outline-gold"><?= $t['btn_view_services'] ?></a>
                        <?php endif; ?>
                    </div>
                </div>
                <div class="col-lg-6" data-aos="fade-up" data-aos-delay="200">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=600&fit=crop&q=80" alt="Digital Services" class="img-fluid rounded-4">
                </div>
            </div>
        </div>
    </section>
    
    <!-- Services Section -->
    <section class="section" id="services">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up"><?= $t['section_services_title'] ?></h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100"><?= $t['section_services_subtitle'] ?></p>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="bi bi-globe"></i>
                        </div>
                        <h3 class="service-title">Website Development</h3>
                        <p class="service-description">Website profesional yang responsif dan SEO-friendly untuk meningkatkan kehadiran online bisnis Anda.</p>
                        <a href="services.php" class="btn btn-outline-warning">Pelajari Lebih Lanjut</a>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="bi bi-search"></i>
                        </div>
                        <h3 class="service-title">SEO & Marketing</h3>
                        <p class="service-description">Optimasi mesin pencari dan strategi pemasaran digital untuk meningkatkan visibilitas dan traffic.</p>
                        <a href="services.php" class="btn btn-outline-warning">Pelajari Lebih Lanjut</a>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="bi bi-robot"></i>
                        </div>
                        <h3 class="service-title">Automation & AI</h3>
                        <p class="service-description">Solusi otomasi dan kecerdasan buatan untuk meningkatkan efisiensi operasional bisnis.</p>
                        <a href="services.php" class="btn btn-outline-warning">Pelajari Lebih Lanjut</a>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="500">
                <a href="services.php" class="btn btn-gold">Lihat Semua Layanan</a>
            </div>
        </div>
    </section>
    
    <!-- Portfolio Section -->
    <section class="section" id="portfolio">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up"><?= $t['section_portfolio_title'] ?></h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100"><?= $t['section_portfolio_subtitle'] ?></p>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
                    <div class="portfolio-card">
                        <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=600&h=400&fit=crop&q=80" alt="E-Commerce" class="portfolio-image">
                        <div class="portfolio-overlay">
                            <h3 class="portfolio-title">Toko Fashion "Bolaya"</h3>
                            <p class="portfolio-category">E-Commerce</p>
                            <a href="portfolio.php" class="portfolio-link">Lihat Detail <i class="bi bi-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
                    <div class="portfolio-card">
                        <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=600&h=400&fit=crop&q=80" alt="Healthcare" class="portfolio-image">
                        <div class="portfolio-overlay">
                            <h3 class="portfolio-title">Klinik Kecantikan "Beauty Clinic"</h3>
                            <p class="portfolio-category">Healthcare</p>
                            <a href="portfolio.php" class="portfolio-link">Lihat Detail <i class="bi bi-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
                    <div class="portfolio-card">
                        <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=600&h=400&fit=crop&q=80" alt="Restaurant" class="portfolio-image">
                        <div class="portfolio-overlay">
                            <h3 class="portfolio-title">Restoran "Rasa Nusantara"</h3>
                            <p class="portfolio-category">F&B</p>
                            <a href="portfolio.php" class="portfolio-link">Lihat Detail <i class="bi bi-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="500">
                <a href="portfolio.php" class="btn btn-gold">Lihat Semua Portfolio</a>
            </div>
        </div>
    </section>
    
    <!-- Testimonial Section -->
    <section class="section" id="testimonial">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up"><?= $t['section_testimonial_title'] ?></h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100"><?= $t['section_testimonial_subtitle'] ?></p>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
                    <div class="testimonial-card">
                        <p class="testimonial-content">Tim SITUNEO sangat profesional dan responsif. Website e-commerce yang mereka buat untuk bisnis saya meningkatkan penjualan hingga 200% dalam 3 bulan pertama.</p>
                        <div class="testimonial-author">
                            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&q=80" alt="Client" class="testimonial-avatar">
                            <div>
                                <h4 class="testimonial-name">Andi Wijaya</h4>
                                <p class="testimonial-position">CEO, Bolaya Fashion</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
                    <div class="testimonial-card">
                        <p class="testimonial-content">Sistem booking online yang dikembangkan oleh SITUNEO sangat membantu operasional klinik kami. Pasien lebih mudah membuat janji dan staf lebih efisien mengelola jadwal.</p>
                        <div class="testimonial-author">
                            <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=100&h=100&fit=crop&q=80" alt="Client" class="testimonial-avatar">
                            <div>
                                <h4 class="testimonial-name">Dr. Sarah Putri</h4>
                                <p class="testimonial-position">Owner, Beauty Clinic</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
                    <div class="testimonial-card">
                        <p class="testimonial-content">Layanan SEO dari SITUNEO membantu restoran kami mendapatkan peringkat pertama di Google untuk kata kunci "restoran Indonesia di Jakarta". Traffic organik meningkat drastis!</p>
                        <div class="testimonial-author">
                            <img src="https://images.unsplash.com/photo-1507003211169-0cfed4f6a45d?w=100&h=100&fit=crop&q=80" alt="Client" class="testimonial-avatar">
                            <div>
                                <h4 class="testimonial-name">Budi Santoso</h4>
                                <p class="testimonial-position">Manager, Rasa Nusantara</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Pricing Section -->
    <section class="section" id="pricing">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up"><?= $t['section_pricing_title'] ?></h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100"><?= $t['section_pricing_subtitle'] ?></p>
            
            <div class="row g-4 align-items-center">
                <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="pricing-card">
                        <h3 class="pricing-title">Starter</h3>
                        <div class="pricing-price">Rp 2.5jt</div>
                        <p class="pricing-period">per bulan</p>
                        <ul class="pricing-features">
                            <li><i class="bi bi-check-circle-fill"></i> Website Basic (5 halaman)</li>
                            <li><i class="bi bi-check-circle-fill"></i> SEO Basic</li>
                            <li><i class="bi bi-check-circle-fill"></i> 1 Revisi/bulan</li>
                            <li><i class="bi bi-check-circle-fill"></i> Email Support</li>
                            <li><i class="bi bi-check-circle-fill"></i> Hosting 1GB</li>
                        </ul>
                        <a href="pricing.php" class="btn btn-outline-warning w-100">Pilih Paket</a>
                    </div>
                </div>
                
                <div class="col-lg-4" data-aos="fade-up" data-aos-delay="300">
                    <div class="pricing-card featured">
                        <div class="pricing-badge">Paling Populer</div>
                        <h3 class="pricing-title">Professional</h3>
                        <div class="pricing-price">Rp 5jt</div>
                        <p class="pricing-period">per bulan</p>
                        <ul class="pricing-features">
                            <li><i class="bi bi-check-circle-fill"></i> Website Advanced (15 halaman)</li>
                            <li><i class="bi bi-check-circle-fill"></i> SEO Advanced</li>
                            <li><i class="bi bi-check-circle-fill"></i> 3 Revisi/bulan</li>
                            <li><i class="bi bi-check-circle-fill"></i> Priority Support</li>
                            <li><i class="bi bi-check-circle-fill"></i> Hosting 5GB</li>
                            <li><i class="bi bi-check-circle-fill"></i> Google Ads Management</li>
                        </ul>
                        <a href="pricing.php" class="btn btn-warning w-100">Pilih Paket</a>
                    </div>
                </div>
                
                <div class="col-lg-4" data-aos="fade-up" data-aos-delay="400">
                    <div class="pricing-card">
                        <h3 class="pricing-title">Enterprise</h3>
                        <div class="pricing-price">Rp 10jt</div>
                        <p class="pricing-period">per bulan</p>
                        <ul class="pricing-features">
                            <li><i class="bi bi-check-circle-fill"></i> Website Unlimited</li>
                            <li><i class="bi bi-check-circle-fill"></i> SEO Premium</li>
                            <li><i class="bi bi-check-circle-fill"></i> Unlimited Revisi</li>
                            <li><i class="bi bi-check-circle-fill"></i> 24/7 Support</li>
                            <li><i class="bi bi-check-circle-fill"></i> Unlimited Hosting</li>
                            <li><i class="bi bi-check-circle-fill"></i> Full Digital Marketing</li>
                        </ul>
                        <a href="pricing.php" class="btn btn-outline-warning w-100">Pilih Paket</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Contact Section -->
    <section class="section" id="contact">
        <div class="container">
            <h2 class="section-title" data-aos="fade-up"><?= $t['section_contact_title'] ?></h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100"><?= $t['section_contact_subtitle'] ?></p>
            
            <div class="row">
                <div class="col-lg-6" data-aos="fade-up" data-aos-delay="200">
                    <div class="contact-form">
                        <form id="contactForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name" class="form-label">Nama Lengkap</label>
                                    <input type="text" class="form-control" id="name" name="name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="subject" class="form-label">Subjek</label>
                                <input type="text" class="form-control" id="subject" name="subject" required>
                            </div>
                            <div class="mb-3">
                                <label for="message" class="form-label">Pesan</label>
                                <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-gold">Kirim Pesan</button>
                        </form>
                    </div>
                </div>
                
                <div class="col-lg-6" data-aos="fade-up" data-aos-delay="300">
                    <div class="ps-lg-5">
                        <div class="mb-4">
                            <h4 class="text-warning mb-3">Informasi Kontak</h4>
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-geo-alt-fill text-warning fs-4"></i>
                                </div>
                                <div class="ms-3">
                                    <p class="mb-0">Jl. Bekasi Timur IX Dalam No. 27, RT 002/RW 003, Kel. Rawa Bunga, Kec. Jatinegara, Jakarta Timur 13450, DKI Jakarta</p>
                                </div>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-telephone-fill text-warning fs-4"></i>
                                </div>
                                <div class="ms-3">
                                    <p class="mb-0">+62 831-7386-8915</p>
                                </div>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-envelope-fill text-warning fs-4"></i>
                                </div>
                                <div class="ms-3">
                                    <p class="mb-0">info@situneo.my.id</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h4 class="text-warning mb-3">Jam Operasional</h4>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Senin - Jumat:</span>
                                <span>09:00 - 18:00</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Sabtu:</span>
                                <span>10:00 - 16:00</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Minggu:</span>
                                <span>Tutup</span>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-warning mb-3">Ikuti Kami</h4>
                            <div class="social-links">
                                <a href="#" class="social-link"><i class="bi bi-facebook"></i></a>
                                <a href="#" class="social-link"><i class="bi bi-instagram"></i></a>
                                <a href="#" class="social-link"><i class="bi bi-twitter"></i></a>
                                <a href="#" class="social-link"><i class="bi bi-linkedin"></i></a>
                                <a href="#" class="social-link"><i class="bi bi-youtube"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <img src="https://situneo.my.id/logo" alt="Situneo" class="footer-logo">
                    <p><?= $t['footer_about'] ?></p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="social-link"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="social-link"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="social-link"><i class="bi bi-linkedin"></i></a>
                        <a href="#" class="social-link"><i class="bi bi-youtube"></i></a>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h4 class="footer-title"><?= $t['footer_services'] ?></h4>
                    <ul class="footer-links">
                        <li><a href="services.php">Website Development</a></li>
                        <li><a href="services.php">SEO & Marketing</a></li>
                        <li><a href="services.php">E-Commerce</a></li>
                        <li><a href="services.php">Mobile Apps</a></li>
                        <li><a href="services.php">Digital Advertising</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h4 class="footer-title"><?= $t['footer_company'] ?></h4>
                    <ul class="footer-links">
                        <li><a href="about.php">Tentang Kami</a></li>
                        <li><a href="portfolio.php">Portfolio</a></li>
                        <li><a href="team.php">Tim Kami</a></li>
                        <li><a href="careers.php">Karir</a></li>
                        <li><a href="blog.php">Blog</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h4 class="footer-title"><?= $t['footer_support'] ?></h4>
                    <ul class="footer-links">
                        <li><a href="contact.php">Hubungi Kami</a></li>
                        <li><a href="faq.php">FAQ</a></li>
                        <li><a href="terms.php">Syarat & Ketentuan</a></li>
                        <li><a href="privacy.php">Kebijakan Privasi</a></li>
                        <li><a href="calculator.php">Hitung Harga</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h4 class="footer-title">Newsletter</h4>
                    <p>Dapatkan tips dan penawaran terbaru dari kami</p>
                    <form id="newsletterForm">
                        <div class="input-group mb-3">
                            <input type="email" class="form-control" placeholder="Email Anda" required>
                            <button class="btn btn-warning" type="submit">
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="copyright">
                <p><?= $t['footer_copyright'] ?></p>
            </div>
        </div>
    </footer>
    
    <!-- Floating WhatsApp -->
    <a href="https://wa.me/6283173868915?text=Halo%20SITUNEO%20DIGITAL,%20saya%20tertarik%20dengan%20layanan%20Anda" 
       class="floating-wa" target="_blank">
        <i class="bi bi-whatsapp"></i>
    </a>
    
    <!-- Back to Top -->
    <button id="backToTop">
        <i class="bi bi-arrow-up"></i>
    </button>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Back to top button
        const backToTopButton = document.getElementById('backToTop');
        
        window.addEventListener('scroll', function() {
            if (window.scrollY > 300) {
                backToTopButton.style.display = 'flex';
            } else {
                backToTopButton.style.display = 'none';
            }
        });
        
        backToTopButton.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Contact form submission
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const name = formData.get('name');
            const email = formData.get('email');
            const subject = formData.get('subject');
            const message = formData.get('message');
            
            // Simple validation
            if (!name || !email || !subject || !message) {
                alert('Mohon lengkapi semua field!');
                return;
            }
            
            // Here you would normally send the data to a server
            // For demo purposes, we'll just show a success message
            alert('Pesan Anda telah terkirim! Kami akan segera menghubungi Anda.');
            this.reset();
        });
        
        // Newsletter form submission
        document.getElementById('newsletterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = this.querySelector('input[type="email"]').value;
            
            if (!email) {
                alert('Mohon masukkan email Anda!');
                return;
            }
            
            // Here you would normally send the data to a server
            // For demo purposes, we'll just show a success message
            alert('Terima kasih telah berlangganan newsletter kami!');
            this.reset();
        });
    </script>
</body>
</html>
```

## Langkah Selanjutnya

1. **Buat folder auth/** di root project Anda
2. **Buat semua file** yang telah saya berikan di dalam folder auth/
3. **Update file index.php** dengan kode yang saya berikan
4. **Jalankan query SQL** untuk membuat tabel yang diperlukan
5. **Test sistem autentikasi** dengan mencoba mendaftar, login, dan mengakses dashboard

Sistem autentikasi ini sudah terintegrasi dengan baik dengan halaman utama Project Situneo Digital. Pengguna yang sudah login akan melihat menu yang berbeda di navbar, dan dapat mengakses dashboard mereka.

Apakah Anda ingin saya bantu dengan file lainnya atau ada bagian tertentu dari sistem yang perlu kita jelaskan lebih detail?

### USER
ok next

### ASSISTANT
Baik, mari kita lanjutkan dengan implementasi file-file autentikasi lainnya. Saya akan membantu Anda membuat file `auth/orders.php` untuk mengelola pesanan pengguna.

### 11. auth/orders.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - User Orders Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Require login
requireLogin();

// Get current user
$user = getCurrentUser();

// Get filter parameters
$status = $_GET['status'] ?? 'all';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 10;
$offset = ($page - 1) * $limit;

// Build query based on status filter
$whereClause = "WHERE o.user_id = ?";
$params = [$user['id']];
$types = "i";

if ($status !== 'all') {
    $whereClause .= " AND o.status = ?";
    $params[] = $status;
    $types .= "s";
}

// Get total orders count
$countQuery = "SELECT COUNT(*) as total FROM orders o $whereClause";
$stmt = $conn->prepare($countQuery);
$stmt->bind_param($types, ...$params);
$stmt->execute();
$result = $stmt->get_result();
$totalOrders = $result->fetch_assoc()['total'];
$totalPages = ceil($totalOrders / $limit);

// Get orders with pagination
$query = "SELECT o.*, s.name as service_name, s.image as service_image 
          FROM orders o 
          LEFT JOIN services s ON o.service_id = s.id 
          $whereClause 
          ORDER BY o.created_at DESC 
          LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
$stmt->bind_param($types, ...$params);
$stmt->execute();
$orders = $stmt->get_result();

// Get order details if requested
$orderDetails = null;
if (isset($_GET['id'])) {
    $orderId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT o.*, s.name as service_name, s.description as service_description, s.image as service_image 
                           FROM orders o 
                           LEFT JOIN services s ON o.service_id = s.id 
                           WHERE o.id = ? AND o.user_id = ?");
    $stmt->bind_param("ii", $orderId, $user['id']);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $orderDetails = $result->fetch_assoc();
    }
}

// Process new order
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['create_order'])) {
    $serviceId = $_POST['service_id'];
    $requirements = $_POST['requirements'];
    $totalAmount = $_POST['total_amount'];
    
    // Generate order number
    $orderNumber = 'ORD-' . date('Ymd') . '-' . strtoupper(substr(md5(time()), 0, 6));
    
    // Insert new order
    $stmt = $conn->prepare("INSERT INTO orders (user_id, service_id, order_number, status, total_amount, requirements, created_at) 
                           VALUES (?, ?, ?, 'pending', ?, ?, NOW())");
    $stmt->bind_param("iisds", $user['id'], $serviceId, $orderNumber, $totalAmount, $requirements);
    
    if ($stmt->execute()) {
        $orderId = $conn->insert_id;
        
        // Log activity
        logActivity($user['id'], "Created order #$orderNumber");
        
        // Redirect to order details
        header("Location: orders.php?id=$orderId&success=order_created");
        exit;
    } else {
        $error = "Terjadi kesalahan saat membuat pesanan. Silakan coba lagi.";
    }
}

// Get services for new order form
$servicesQuery = "SELECT * FROM services WHERE status = 'active' ORDER BY category, name";
$servicesResult = $conn->query($servicesQuery);
$services = [];
while ($row = $servicesResult->fetch_assoc()) {
    $services[] = $row;
}

// Group services by category
$servicesByCategory = [];
foreach ($services as $service) {
    $servicesByCategory[$service['category']][] = $service;
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesanan Saya - SITUNEO DIGITAL</title>
    <meta name="description" content="Kelola pesanan layanan digital Anda">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Order Card */
        .order-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .order-number {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .order-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .status-processing {
            background: rgba(13, 202, 240, 0.2);
            color: #0dcaf0;
        }
        
        .status-completed {
            background: rgba(25, 135, 84, 0.2);
            color: #198754;
        }
        
        .status-cancelled {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .order-service {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .service-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .service-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .order-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .order-date {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .order-amount {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--gold);
        }
        
        .order-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 8px 15px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .filter-tab:hover, .filter-tab.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-link {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Order Details Modal */
        .modal-content {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .modal-footer {
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* New Order Form */
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }
        
        .service-option {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .service-option:hover {
            background: rgba(255, 180, 0, 0.1);
            border-color: rgba(255, 180, 0, 0.3);
        }
        
        .service-option.selected {
            background: rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .service-option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .service-option-name {
            font-weight: 600;
        }
        
        .service-option-price {
            color: var(--gold);
            font-weight: 700;
        }
        
        .service-option-description {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 5px;
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="orders.php" class="sidebar-item active">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <?php if (hasRole(ROLE_ADMIN)): ?>
            <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
            <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
            <a href="admin/users.php" class="sidebar-item">
                <i class="bi bi-people"></i> Kelola Pengguna
            </a>
            <a href="admin/orders.php" class="sidebar-item">
                <i class="bi bi-receipt"></i> Semua Pesanan
            </a>
            <a href="admin/services.php" class="sidebar-item">
                <i class="bi bi-gear"></i> Kelola Layanan
            </a>
            <a href="admin/reports.php" class="sidebar-item">
                <i class="bi bi-graph-up"></i> Laporan
            </a>
        <?php endif; ?>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (isset($_GET['success']) && $_GET['success'] === 'order_created'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Pesanan berhasil dibuat! Tim kami akan segera menghubungi Anda.
                </div>
            <?php endif; ?>
            
            <?php if (isset($error)): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $error ?>
                </div>
            <?php endif; ?>
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Pesanan Saya</h1>
                <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#newOrderModal">
                    <i class="bi bi-plus-circle me-2"></i>Buat Pesanan Baru
                </button>
            </div>
            
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <a href="?status=all" class="filter-tab <?= $status === 'all' ? 'active' : '' ?>">
                    Semua (<?= $totalOrders ?>)
                </a>
                <a href="?status=pending" class="filter-tab <?= $status === 'pending' ? 'active' : '' ?>">
                    Menunggu
                </a>
                <a href="?status=processing" class="filter-tab <?= $status === 'processing' ? 'active' : '' ?>">
                    Diproses
                </a>
                <a href="?status=completed" class="filter-tab <?= $status === 'completed' ? 'active' : '' ?>">
                    Selesai
                </a>
                <a href="?status=cancelled" class="filter-tab <?= $status === 'cancelled' ? 'active' : '' ?>">
                    Dibatalkan
                </a>
            </div>
            
            <!-- Orders List -->
            <?php if ($orders->num_rows > 0): ?>
                <div class="orders-list">
                    <?php while ($order = $orders->fetch_assoc()): ?>
                        <div class="order-card" data-aos="fade-up">
                            <div class="order-header">
                                <div class="order-number"><?= htmlspecialchars($order['order_number']) ?></div>
                                <div class="order-status status-<?= htmlspecialchars($order['status']) ?>">
                                    <?= ucfirst(htmlspecialchars($order['status'])) ?>
                                </div>
                            </div>
                            
                            <div class="order-service">
                                <?php if ($order['service_image']): ?>
                                    <img src="<?= htmlspecialchars($order['service_image']) ?>" alt="<?= htmlspecialchars($order['service_name']) ?>" class="service-image">
                                <?php else: ?>
                                    <div class="service-image d-flex align-items-center justify-content-center bg-secondary">
                                        <i class="bi bi-image fs-4"></i>
                                    </div>
                                <?php endif; ?>
                                <div>
                                    <div class="service-name"><?= htmlspecialchars($order['service_name']) ?></div>
                                    <div class="text-muted small">
                                        <?= date('d M Y, H:i', strtotime($order['created_at'])) ?>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="order-details">
                                <div class="order-date">
                                    <i class="bi bi-calendar3 me-1"></i>
                                    <?= date('d M Y', strtotime($order['created_at'])) ?>
                                </div>
                                <div class="order-amount">
                                    Rp <?= number_format($order['total_amount'], 0, ',', '.') ?>
                                </div>
                            </div>
                            
                            <div class="order-actions">
                                <a href="?id=<?= $order['id'] ?>" class="btn-outline-gold">
                                    <i class="bi bi-eye me-1"></i> Detail
                                </a>
                                <?php if ($order['status'] === 'pending'): ?>
                                    <a href="?id=<?= $order['id'] ?>&action=cancel" class="btn-outline-gold text-danger">
                                        <i class="bi bi-x-circle me-1"></i> Batalkan
                                    </a>
                                <?php endif; ?>
                            </div>
                        </div>
                    <?php endwhile; ?>
                </div>
                
                <!-- Pagination -->
                <?php if ($totalPages > 1): ?>
                    <div class="pagination">
                        <?php if ($page > 1): ?>
                            <a href="?status=<?= $status ?>&page=<?= $page - 1 ?>" class="page-link">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        <?php endif; ?>
                        
                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                            <?php if ($i == $page): ?>
                                <span class="page-link active"><?= $i ?></span>
                            <?php else: ?>
                                <a href="?status=<?= $status ?>&page=<?= $i ?>" class="page-link"><?= $i ?></a>
                            <?php endif; ?>
                        <?php endfor; ?>
                        
                        <?php if ($page < $totalPages): ?>
                            <a href="?status=<?= $status ?>&page=<?= $page + 1 ?>" class="page-link">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="text-center py-5">
                    <i class="bi bi-inbox fs-1 text-muted"></i>
                    <h4 class="mt-3">Belum ada pesanan</h4>
                    <p class="text-muted">Anda belum memiliki pesanan. Buat pesanan pertama Anda sekarang!</p>
                    <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#newOrderModal">
                        <i class="bi bi-plus-circle me-2"></i>Buat Pesanan Baru
                    </button>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <!-- Order Details Modal -->
    <?php if ($orderDetails): ?>
        <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-labelledby="orderDetailsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="orderDetailsModalLabel">Detail Pesanan</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p class="text-muted">Nomor Pesanan</p>
                                <h6><?= htmlspecialchars($orderDetails['order_number']) ?></h6>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted">Status</p>
                                <div class="order-status status-<?= htmlspecialchars($orderDetails['status']) ?>">
                                    <?= ucfirst(htmlspecialchars($orderDetails['status'])) ?>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p class="text-muted">Tanggal Pesanan</p>
                                <h6><?= date('d M Y, H:i', strtotime($orderDetails['created_at'])) ?></h6>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted">Total Harga</p>
                                <h6 class="text-warning">Rp <?= number_format($orderDetails['total_amount'], 0, ',', '.') ?></h6>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <p class="text-muted">Layanan</p>
                            <div class="d-flex align-items-center">
                                <?php if ($orderDetails['service_image']): ?>
                                    <img src="<?= htmlspecialchars($orderDetails['service_image']) ?>" alt="<?= htmlspecialchars($orderDetails['service_name']) ?>" class="service-image me-3">
                                <?php else: ?>
                                    <div class="service-image me-3 d-flex align-items-center justify-content-center bg-secondary">
                                        <i class="bi bi-image fs-4"></i>
                                    </div>
                                <?php endif; ?>
                                <div>
                                    <h6><?= htmlspecialchars($orderDetails['service_name']) ?></h6>
                                    <p class="text-muted small mb-0"><?= htmlspecialchars($orderDetails['service_description']) ?></p>
                                </div>
                            </div>
                        </div>
                        
                        <?php if (!empty($orderDetails['requirements'])): ?>
                            <div class="mb-3">
                                <p class="text-muted">Keperluan</p>
                                <p><?= nl2br(htmlspecialchars($orderDetails['requirements'])) ?></p>
                            </div>
                        <?php endif; ?>
                        
                        <?php if (!empty($orderDetails['notes'])): ?>
                            <div class="mb-3">
                                <p class="text-muted">Catatan</p>
                                <p><?= nl2br(htmlspecialchars($orderDetails['notes'])) ?></p>
                            </div>
                        <?php endif; ?>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <?php if ($orderDetails['status'] === 'pending'): ?>
                            <a href="?id=<?= $orderDetails['id'] ?>&action=cancel" class="btn btn-danger">Batalkan Pesanan</a>
                        <?php endif; ?>
                    </div>
                </div>
            </div>
        </div>
    <?php endif; ?>
    
    <!-- New Order Modal -->
    <div class="modal fade" id="newOrderModal" tabindex="-1" aria-labelledby="newOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newOrderModalLabel">Buat Pesanan Baru</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post" action="">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="service_id" class="form-label">Pilih Layanan</label>
                            <div class="service-options" id="serviceOptions">
                                <?php foreach ($servicesByCategory as $category => $categoryServices): ?>
                                    <h6 class="text-warning mt-3"><?= htmlspecialchars($category) ?></h6>
                                    <?php foreach ($categoryServices as $service): ?>
                                        <div class="service-option" data-service-id="<?= $service['id'] ?>" data-price="<?= $service['price_start'] ?>">
                                            <div class="service-option-header">
                                                <div class="service-option-name"><?= htmlspecialchars($service['name']) ?></div>
                                                <div class="service-option-price">Rp <?= number_format($service['price_start'], 0, ',', '.') ?></div>
                                            </div>
                                            <div class="service-option-description"><?= htmlspecialchars($service['description']) ?></div>
                                        </div>
                                    <?php endforeach; ?>
                                <?php endforeach; ?>
                            </div>
                            <input type="hidden" id="service_id" name="service_id" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="requirements" class="form-label">Keperluan</label>
                            <textarea class="form-control" id="requirements" name="requirements" rows="4" placeholder="Jelaskan keperluan Anda untuk layanan ini..." required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="total_amount" class="form-label">Total Harga</label>
                            <div class="input-group">
                                <span class="input-group-text">Rp</span>
                                <input type="text" class="form-control" id="total_amount" name="total_amount" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" name="create_order" class="btn btn-gold">Buat Pesanan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Service selection
        const serviceOptions = document.querySelectorAll('.service-option');
        const serviceIdInput = document.getElementById('service_id');
        const totalAmountInput = document.getElementById('total_amount');
        
        serviceOptions.forEach(option => {
            option.addEventListener('click', function() {
                // Remove selected class from all options
                serviceOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected class to clicked option
                this.classList.add('selected');
                
                // Set service ID and price
                const serviceId = this.getAttribute('data-service-id');
                const price = this.getAttribute('data-price');
                
                serviceIdInput.value = serviceId;
                totalAmountInput.value = parseInt(price).toLocaleString('id-ID');
            });
        });
        
        // Show order details modal if order ID is in URL
        <?php if ($orderDetails): ?>
            document.addEventListener('DOMContentLoaded', function() {
                const orderDetailsModal = new bootstrap.Modal(document.getElementById('orderDetailsModal'));
                orderDetailsModal.show();
            });
        <?php endif; ?>
        
        // Handle order cancellation
        document.querySelectorAll('a[href*="action=cancel"]').forEach(link => {
            link.addEventListener('click', function(e) {
                if (!confirm('Apakah Anda yakin ingin membatalkan pesanan ini?')) {
                    e.preventDefault();
                }
            });
        });
    </script>
</body>
</html>
```

### 12. auth/services.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Services Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Require login
requireLogin();

// Get current user
$user = getCurrentUser();

// Get filter parameters
$category = $_GET['category'] ?? 'all';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 12;
$offset = ($page - 1) * $limit;

// Build query based on category filter
$whereClause = "WHERE status = 'active'";
$params = [];
$types = "";

if ($category !== 'all') {
    $whereClause .= " AND category = ?";
    $params[] = $category;
    $types .= "s";
}

// Get total services count
$countQuery = "SELECT COUNT(*) as total FROM services $whereClause";
$stmt = $conn->prepare($countQuery);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$result = $stmt->get_result();
$totalServices = $result->fetch_assoc()['total'];
$totalPages = ceil($totalServices / $limit);

// Get services with pagination
$query = "SELECT * FROM services $whereClause ORDER BY category, name LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$services = $stmt->get_result();

// Get all categories for filter
$categoriesQuery = "SELECT DISTINCT category FROM services WHERE status = 'active' ORDER BY category";
$categoriesResult = $conn->query($categoriesQuery);
$categories = [];
while ($row = $categoriesResult->fetch_assoc()) {
    $categories[] = $row['category'];
}

// Get service details if requested
$serviceDetails = null;
if (isset($_GET['id'])) {
    $serviceId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT * FROM services WHERE id = ? AND status = 'active'");
    $stmt->bind_param("i", $serviceId);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $serviceDetails = $result->fetch_assoc();
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layanan - SITUNEO DIGITAL</title>
    <meta name="description" content="Layanan digital profesional dari SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Service Card */
        .service-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            overflow: hidden;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.3);
            border-color: var(--gold);
        }
        
        .service-image {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .service-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .service-card:hover .service-image img {
            transform: scale(1.1);
        }
        
        .service-icon-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 60px;
            height: 60px;
            background: var(--gradient-gold);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .service-icon-badge i {
            font-size: 1.5rem;
            color: var(--dark-blue);
        }
        
        .price-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,0,0,0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
        }
        
        .service-content {
            padding: 1.5rem;
        }
        
        .category-badge {
            display: inline-block;
            background: rgba(255,180,0,0.2);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }
        
        .service-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .service-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .service-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 1rem;
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px

### USER
kok kepotong ?

### ASSISTANT
Maaf, ternyata kode saya terpotong. Mari saya lanjutkan dengan file `auth/services.php` yang lengkap:

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Services Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Require login
requireLogin();

// Get current user
$user = getCurrentUser();

// Get filter parameters
$category = $_GET['category'] ?? 'all';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 12;
$offset = ($page - 1) * $limit;

// Build query based on category filter
$whereClause = "WHERE status = 'active'";
$params = [];
$types = "";

if ($category !== 'all') {
    $whereClause .= " AND category = ?";
    $params[] = $category;
    $types .= "s";
}

// Get total services count
$countQuery = "SELECT COUNT(*) as total FROM services $whereClause";
$stmt = $conn->prepare($countQuery);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$result = $stmt->get_result();
$totalServices = $result->fetch_assoc()['total'];
$totalPages = ceil($totalServices / $limit);

// Get services with pagination
$query = "SELECT * FROM services $whereClause ORDER BY category, name LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$services = $stmt->get_result();

// Get all categories for filter
$categoriesQuery = "SELECT DISTINCT category FROM services WHERE status = 'active' ORDER BY category";
$categoriesResult = $conn->query($categoriesQuery);
$categories = [];
while ($row = $categoriesResult->fetch_assoc()) {
    $categories[] = $row['category'];
}

// Get service details if requested
$serviceDetails = null;
if (isset($_GET['id'])) {
    $serviceId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT * FROM services WHERE id = ? AND status = 'active'");
    $stmt->bind_param("i", $serviceId);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $serviceDetails = $result->fetch_assoc();
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layanan - SITUNEO DIGITAL</title>
    <meta name="description" content="Layanan digital profesional dari SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Service Card */
        .service-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            overflow: hidden;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.3);
            border-color: var(--gold);
        }
        
        .service-image {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .service-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .service-card:hover .service-image img {
            transform: scale(1.1);
        }
        
        .service-icon-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 60px;
            height: 60px;
            background: var(--gradient-gold);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .service-icon-badge i {
            font-size: 1.5rem;
            color: var(--dark-blue);
        }
        
        .price-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,0,0,0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
        }
        
        .service-content {
            padding: 1.5rem;
        }
        
        .category-badge {
            display: inline-block;
            background: rgba(255,180,0,0.2);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }
        
        .service-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .service-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .service-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 1rem;
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.3);
        }
        
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
            color: var(--dark-blue);
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 180, 0, 0.6);
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .filter-tab:hover, .filter-tab.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-link {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Service Details Modal */
        .modal-content {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .modal-footer {
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            color: var(--text-light);
            font-size: 0.9rem;
            display: flex;
            align-items: start;
        }
        
        .feature-list li i {
            color: var(--gold);
            margin-right: 10px;
            margin-top: 3px;
            flex-shrink: 0;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="services.php" class="sidebar-item active">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <?php if (hasRole(ROLE_ADMIN)): ?>
            <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
            <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
            <a href="admin/users.php" class="sidebar-item">
                <i class="bi bi-people"></i> Kelola Pengguna
            </a>
            <a href="admin/orders.php" class="sidebar-item">
                <i class="bi bi-receipt"></i> Semua Pesanan
            </a>
            <a href="admin/services.php" class="sidebar-item">
                <i class="bi bi-gear"></i> Kelola Layanan
            </a>
            <a href="admin/reports.php" class="sidebar-item">
                <i class="bi bi-graph-up"></i> Laporan
            </a>
        <?php endif; ?>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Layanan Kami</h1>
                <a href="../services.php" class="btn btn-outline-gold">
                    <i class="bi bi-arrow-left me-2"></i>Kembali ke Halaman Utama
                </a>
            </div>
            
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <a href="?category=all" class="filter-tab <?= $category === 'all' ? 'active' : '' ?>">
                    Semua (<?= $totalServices ?>)
                </a>
                <?php foreach ($categories as $cat): ?>
                    <a href="?category=<?= urlencode($cat) ?>" class="filter-tab <?= $category === $cat ? 'active' : '' ?>">
                        <?= htmlspecialchars($cat) ?>
                    </a>
                <?php endforeach; ?>
            </div>
            
            <!-- Services Grid -->
            <?php if ($services->num_rows > 0): ?>
                <div class="row g-4">
                    <?php while ($service = $services->fetch_assoc()): ?>
                        <div class="col-lg-4 col-md-6" data-aos="fade-up">
                            <div class="service-card">
                                <div class="service-image">
                                    <img src="<?= htmlspecialchars($service['image']) ?>" alt="<?= htmlspecialchars($service['name']) ?>">
                                    <div class="service-icon-badge">
                                        <i class="bi bi-<?= htmlspecialchars($service['icon']) ?>"></i>
                                    </div>
                                    <div class="price-badge">
                                        Mulai Rp <?= number_format($service['price_start'], 0, ',', '.') ?>
                                    </div>
                                </div>
                                <div class="service-content">
                                    <div class="category-badge"><?= htmlspecialchars($service['category']) ?></div>
                                    <h3 class="service-title"><?= htmlspecialchars($service['name']) ?></h3>
                                    <p class="service-description"><?= htmlspecialchars($service['description']) ?></p>
                                    <div class="service-price">
                                        Rp <?= number_format($service['price_start'], 0, ',', '.') ?> / <?= htmlspecialchars($service['price_unit']) ?>
                                    </div>
                                    <div class="d-flex gap-2">
                                        <a href="?id=<?= $service['id'] ?>" class="btn btn-gold flex-fill">Detail</a>
                                        <a href="orders.php?action=new&service=<?= $service['id'] ?>" class="btn btn-outline-gold">Pesan</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <?php endwhile; ?>
                </div>
                
                <!-- Pagination -->
                <?php if ($totalPages > 1): ?>
                    <div class="pagination">
                        <?php if ($page > 1): ?>
                            <a href="?category=<?= $category ?>&page=<?= $page - 1 ?>" class="page-link">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        <?php endif; ?>
                        
                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                            <?php if ($i == $page): ?>
                                <span class="page-link active"><?= $i ?></span>
                            <?php else: ?>
                                <a href="?category=<?= $category ?>&page=<?= $i ?>" class="page-link"><?= $i ?></a>
                            <?php endif; ?>
                        <?php endfor; ?>
                        
                        <?php if ($page < $totalPages): ?>
                            <a href="?category=<?= $category ?>&page=<?= $page + 1 ?>" class="page-link">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="text-center py-5">
                    <i class="bi bi-inbox fs-1 text-muted"></i>
                    <h4 class="mt-3">Tidak ada layanan</h4>
                    <p class="text-muted">Tidak ada layanan yang tersedia untuk kategori ini.</p>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <!-- Service Details Modal -->
    <?php if ($serviceDetails): ?>
        <div class="modal fade" id="serviceDetailsModal" tabindex="-1" aria-labelledby="serviceDetailsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="serviceDetailsModalLabel"><?= htmlspecialchars($serviceDetails['name']) ?></h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6">
                                <img src="<?= htmlspecialchars($serviceDetails['image']) ?>" alt="<?= htmlspecialchars($serviceDetails['name']) ?>" class="img-fluid rounded">
                            </div>
                            <div class="col-md-6">
                                <div class="category-badge mb-3"><?= htmlspecialchars($serviceDetails['category']) ?></div>
                                <h4 class="text-warning mb-3">
                                    Rp <?= number_format($serviceDetails['price_start'], 0, ',', '.') ?> / <?= htmlspecialchars($serviceDetails['price_unit']) ?>
                                </h4>
                                <p><?= htmlspecialchars($serviceDetails['description']) ?></p>
                                
                                <?php if (!empty($serviceDetails['perfect_for'])): ?>
                                    <h6 class="mt-4">Cocok Untuk:</h6>
                                    <p><?= htmlspecialchars($serviceDetails['perfect_for']) ?></p>
                                <?php endif; ?>
                                
                                <?php if (!empty($serviceDetails['delivery_time'])): ?>
                                    <h6 class="mt-4">Waktu Pengerjaan:</h6>
                                    <p><?= htmlspecialchars($serviceDetails['delivery_time']) ?></p>
                                <?php endif; ?>
                            </div>
                        </div>
                        
                        <?php if (!empty($serviceDetails['features'])): ?>
                            <h6 class="mt-4">Fitur:</h6>
                            <ul class="feature-list">
                                <?php 
                                $features = json_decode($serviceDetails['features'], true);
                                if (is_array($features)) {
                                    foreach ($features as $feature) {
                                        echo '<li><i class="bi bi-check-circle-fill"></i>' . htmlspecialchars($feature) . '</li>';
                                    }
                                }
                                ?>
                            </ul>
                        <?php endif; ?>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <a href="orders.php?action=new&service=<?= $serviceDetails['id'] ?>" class="btn btn-gold">Pesan Sekarang</a>
                    </div>
                </div>
            </div>
        </div>
    <?php endif; ?>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Show service details modal if service ID is in URL
        <?php if ($serviceDetails): ?>
            document.addEventListener('DOMContentLoaded', function() {
                const serviceDetailsModal = new bootstrap.Modal(document.getElementById('serviceDetailsModal'));
                serviceDetailsModal.show();
            });
        <?php endif; ?>
    </script>
</body>
</html>
```

Sekarang saya akan lanjutkan dengan file `auth/invoices.php` untuk mengelola invoice pesanan:

### 13. auth/invoices.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - User Invoices Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once 'config.php';

// Require login
requireLogin();

// Get current user
$user = getCurrentUser();

// Get filter parameters
$status = $_GET['status'] ?? 'all';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 10;
$offset = ($page - 1) * $limit;

// Build query based on status filter
$whereClause = "WHERE o.user_id = ?";
$params = [$user['id']];
$types = "i";

if ($status !== 'all') {
    $whereClause .= " AND o.status = ?";
    $params[] = $status;
    $types .= "s";
}

// Get total invoices count
$countQuery = "SELECT COUNT(*) as total FROM orders o $whereClause";
$stmt = $conn->prepare($countQuery);
$stmt->bind_param($types, ...$params);
$stmt->execute();
$result = $stmt->get_result();
$totalInvoices = $result->fetch_assoc()['total'];
$totalPages = ceil($totalInvoices / $limit);

// Get invoices with pagination
$query = "SELECT o.*, s.name as service_name, s.image as service_image 
          FROM orders o 
          LEFT JOIN services s ON o.service_id = s.id 
          $whereClause 
          ORDER BY o.created_at DESC 
          LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
$stmt->bind_param($types, ...$params);
$stmt->execute();
$invoices = $stmt->get_result();

// Get invoice details if requested
$invoiceDetails = null;
if (isset($_GET['id'])) {
    $invoiceId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT o.*, s.name as service_name, s.description as service_description, s.image as service_image, u.name as user_name, u.email as user_email, u.phone as user_phone, u.address as user_address 
                           FROM orders o 
                           LEFT JOIN services s ON o.service_id = s.id 
                           LEFT JOIN users u ON o.user_id = u.id 
                           WHERE o.id = ? AND o.user_id = ?");
    $stmt->bind_param("ii", $invoiceId, $user['id']);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $invoiceDetails = $result->fetch_assoc();
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice - SITUNEO DIGITAL</title>
    <meta name="description" content="Kelola invoice pesanan Anda">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Invoice Card */
        .invoice-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .invoice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .invoice-number {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .invoice-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .status-processing {
            background: rgba(13, 202, 240, 0.2);
            color: #0dcaf0;
        }
        
        .status-completed {
            background: rgba(25, 135, 84, 0.2);
            color: #198754;
        }
        
        .status-cancelled {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .invoice-service {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .service-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .service-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .invoice-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .invoice-date {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .invoice-amount {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--gold);
        }
        
        .invoice-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 8px 15px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .filter-tab:hover, .filter-tab.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-link {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Invoice Details Modal */
        .modal-content {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .modal-footer {
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Invoice Print Styles */
        .invoice-print {
            background: white;
            color: black;
            padding: 30px;
        }
        
        .invoice-print-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .invoice-print-logo {
            width: 150px;
        }
        
        .invoice-print-details {
            text-align: right;
        }
        
        .invoice-print-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .invoice-print-number {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .invoice-print-date {
            margin-bottom: 0;
        }
        
        .invoice-print-section {
            margin-bottom: 20px;
        }
        
        .invoice-print-section-title {
            font-weight: 700;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .invoice-print-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .invoice-print-table th,
        .invoice-print-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .invoice-print-table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .invoice-print-total {
            text-align: right;
            font-weight: 700;
        }
        
        .invoice-print-footer {
            margin-top: 30px;
            text-align: center;
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="invoices.php" class="sidebar-item active">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <?php if (hasRole(ROLE_ADMIN)): ?>
            <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
            <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
            <a href="admin/users.php" class="sidebar-item">
                <i class="bi bi-people"></i> Kelola Pengguna
            </a>
            <a href="admin/orders.php" class="sidebar-item">
                <i class="bi bi-receipt"></i> Semua Pesanan
            </a>
            <a href="admin/services.php" class="sidebar-item">
                <i class="bi bi-gear"></i> Kelola Layanan
            </a>
            <a href="admin/reports.php" class="sidebar-item">
                <i class="bi bi-graph-up"></i> Laporan
            </a>
        <?php endif; ?>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Invoice Saya</h1>
            </div>
            
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <a href="?status=all" class="filter-tab <?= $status === 'all' ? 'active' : '' ?>">
                    Semua (<?= $totalInvoices ?>)
                </a>
                <a href="?status=pending" class="filter-tab <?= $status === 'pending' ? 'active' : '' ?>">
                    Menunggu
                </a>
                <a href="?status=processing" class="filter-tab <?= $status === 'processing' ? 'active' : '' ?>">
                    Diproses
                </a>
                <a href="?status=completed" class="filter-tab <?= $status === 'completed' ? 'active' : '' ?>">
                    Selesai
                </a>
                <a href="?status=cancelled" class="filter-tab <?= $status === 'cancelled' ? 'active' : '' ?>">
                    Dibatalkan
                </a>
            </div>
            
            <!-- Invoices List -->
            <?php if ($invoices->num_rows > 0): ?>
                <div class="invoices-list">
                    <?php while ($invoice = $invoices->fetch_assoc()): ?>
                        <div class="invoice-card" data-aos="fade-up">
                            <div class="invoice-header">
                                <div class="invoice-number">INV-<?= date('Ymd', strtotime($invoice['created_at'])) ?>-<?= str_pad($invoice['id'], 4, '0', STR_PAD_LEFT) ?></div>
                                <div class="invoice-status status-<?= htmlspecialchars($invoice['status']) ?>">
                                    <?= ucfirst(htmlspecialchars($invoice['status'])) ?>
                                </div>
                            </div>
                            
                            <div class="invoice-service">
                                <?php if ($invoice['service_image']): ?>
                                    <img src="<?= htmlspecialchars($invoice['service_image']) ?>" alt="<?= htmlspecialchars($invoice['service_name']) ?>" class="service-image">
                                <?php else: ?>
                                    <div class="service-image d-flex align-items-center justify-content-center bg-secondary">
                                        <i class="bi bi-image fs-4"></i>
                                    </div>
                                <?php endif; ?>
                                <div>
                                    <div class="service-name"><?= htmlspecialchars($invoice['service_name']) ?></div>
                                    <div class="text-muted small">
                                        <?= date('d M Y, H:i', strtotime($invoice['created_at'])) ?>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="invoice-details">
                                <div class="invoice-date">
                                    <i class="bi bi-calendar3 me-1"></i>
                                    <?= date('d M Y', strtotime($invoice['created_at'])) ?>
                                </div>
                                <div class="invoice-amount">
                                    Rp <?= number_format($invoice['total_amount'], 0, ',', '.') ?>
                                </div>
                            </div>
                            
                            <div class="invoice-actions">
                                <a href="?id=<?= $invoice['id'] ?>" class="btn-outline-gold">
                                    <i class="bi bi-eye me-1"></i> Detail
                                </a>
                                <a href="?id=<?= $invoice['id'] ?>&print=1" class="btn-outline-gold" target="_blank">
                                    <i class="bi bi-printer me-1"></i> Cetak
                                </a>
                            </div>
                        </div>
                    <?php endwhile; ?>
                </div>
                
                <!-- Pagination -->
                <?php if ($totalPages > 1): ?>
                    <div class="pagination">
                        <?php if ($page > 1): ?>
                            <a href="?status=<?= $status ?>&page=<?= $page - 1 ?>" class="page-link">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        <?php endif; ?>
                        
                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                            <?php if ($i == $page): ?>
                                <span class="page-link active"><?= $i ?></span>
                            <?php else: ?>
                                <a href="?status=<?= $status ?>&page=<?= $i ?>" class="page-link"><?= $i ?></a>
                            <?php endif; ?>
                        <?php endfor; ?>
                        
                        <?php if ($page < $totalPages): ?>
                            <a href="?status=<?= $status ?>&page=<?= $page + 1 ?>" class="page-link">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="text-center py-5">
                    <i class="bi bi-file-earmark-text fs-1 text-muted"></i>
                    <h4 class="mt-3">Belum ada invoice</h4>
                    <p class="text-muted">Anda belum memiliki invoice. Buat pesanan terlebih dahulu untuk menghasilkan invoice.</p>
                    <a href="services.php" class="btn btn-gold">Lihat Layanan</a>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <!-- Invoice Details Modal -->
    <?php if ($invoiceDetails): ?>
        <?php if (isset($_GET['print']) && $_GET['print'] == 1): ?>
            <!-- Invoice Print View -->
            <div class="invoice-print" id="invoicePrint">
                <div class="invoice-print-header">
                    <div>
                        <img src="https://situneo.my.id/logo" alt="Situneo" class="invoice-print-logo">
                    </div>
                    <div class="invoice-print-details">
                        <div class="invoice-print-title">INVOICE</div>
                        <div class="invoice-print-number">INV-<?= date('Ymd', strtotime($invoiceDetails['created_at'])) ?>-<?= str_pad($invoiceDetails['id'], 4, '0', STR_PAD_LEFT) ?></div>
                        <div class="invoice-print-date"><?= date('d F Y', strtotime($invoiceDetails['created_at'])) ?></div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="invoice-print-section">
                            <div class="invoice-print-section-title">Dari:</div>
                            <div><strong>SITUNEO DIGITAL</strong></div>
                            <div>Jl. Bekasi Timur IX Dalam No. 27, RT 002/RW 003</div>
                            <div>Kel. Rawa Bunga, Kec. Jatinegara</div>
                            <div>Jakarta Timur 13450, DKI Jakarta</div>
                            <div>Email: info@situneo.my.id</div>
                            <div>Telepon: +62 831-7386-8915</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="invoice-print-section">
                            <div class="invoice-print-section-title">Untuk:</div>
                            <div><strong><?= htmlspecialchars($invoiceDetails['user_name']) ?></strong></div>
                            <div><?= htmlspecialchars($invoiceDetails['user_email']) ?></div>
                            <div><?= htmlspecialchars($invoiceDetails['user_phone']) ?></div>
                            <div><?= htmlspecialchars($invoiceDetails['user_address']) ?></div>
                        </div>
                    </div>
                </div>
                
                <div class="invoice-print-section">
                    <div class="invoice-print-section-title">Detail Pesanan:</div>
                    <table class="invoice-print-table">
                        <thead>
                            <tr>
                                <th>Layanan</th>
                                <th>No. Pesanan</th>
                                <th>Tanggal</th>
                                <th>Status</th>
                                <th>Harga</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><?= htmlspecialchars($invoiceDetails['service_name']) ?></td>
                                <td><?= htmlspecialchars($invoiceDetails['order_number']) ?></td>
                                <td><?= date('d F Y', strtotime($invoiceDetails['created_at'])) ?></td>
                                <td><?= ucfirst(htmlspecialchars($invoiceDetails['status'])) ?></td>
                                <td>Rp <?= number_format($invoiceDetails['total_amount'], 0, ',', '.') ?></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <?php if (!empty($invoiceDetails['requirements'])): ?>
                    <div class="invoice-print-section">
                        <div class="invoice-print-section-title">Keperluan:</div>
                        <p><?= nl2br(htmlspecialchars($invoiceDetails['requirements'])) ?></p>
                    </div>
                <?php endif; ?>
                
                <div class="invoice-print-section">
                    <table class="invoice-print-table">
                        <tr>
                            <td colspan="4" class="text-end">Subtotal:</td>
                            <td>Rp <?= number_format($invoiceDetails['total_amount'], 0, ',', '.') ?></td>
                        </tr>
                        <tr>
                            <td colspan="4" class="text-end">PPN (11%):</td>
                            <td>Rp <?= number_format($invoiceDetails['total_amount'] * 0.11, 0, ',', '.') ?></td>
                        </tr>
                        <tr>
                            <td colspan="4" class="invoice-print-total">Total:</td>
                            <td class="invoice-print-total">Rp <?= number_format($invoiceDetails['total_amount'] * 1.11, 0, ',', '.') ?></td>
                        </tr>
                    </table>
                </div>
                
                <div class="invoice-print-footer">
                    <p>Terima kasih telah mempercayakan layanan digital Anda kepada SITUNEO DIGITAL.</p>
                    <p>Invoice ini sah dan telah dibuat secara otomatis oleh sistem.</p>
                </div>
            </div>
            
            <script>
                window.onload = function() {
                    window.print();
                };
            </script>
        <?php else: ?>
            <!-- Invoice Details Modal -->
            <div class="modal fade" id="invoiceDetailsModal" tabindex="-1" aria-labelledby="invoiceDetailsModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="invoiceDetailsModalLabel">Detail Invoice</h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <p class="text-muted">Nomor Invoice</p>
                                    <h6>INV-<?= date('Ymd', strtotime($invoiceDetails['created_at'])) ?>-<?= str_pad($invoiceDetails['id'], 4, '0', STR_PAD_LEFT) ?></h6>
                                </div>
                                <div class="col-md-6">
                                    <p class="text-muted">Status</p>
                                    <div class="invoice-status status-<?= htmlspecialchars($invoiceDetails['status']) ?>">
                                        <?= ucfirst(htmlspecialchars($invoiceDetails['status'])) ?>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <p class="text-muted">Tanggal Invoice</p>
                                    <h6><?= date('d M Y, H:i', strtotime($invoiceDetails['created_at'])) ?></h6>
                                </div>
                                <div class="col-md-6">
                                    <p class="text-muted">Total Harga</p>
                                    <h6 class="text-warning">Rp <?= number_format($invoiceDetails['total_amount'], 0, ',', '.') ?></h6>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <p class="text-muted">Layanan</p>
                                <div class="d-flex align-items-center">
                                    <?php if ($invoiceDetails['service_image']): ?>
                                        <img src="<?= htmlspecialchars($invoiceDetails['service_image']) ?>" alt="<?= htmlspecialchars($invoiceDetails['service_name']) ?>" class="service-image me-3">
                                    <?php else: ?>
                                        <div class="service-image me-3 d-flex align-items-center justify-content-center bg-secondary">
                                            <i class="bi bi-image fs-4"></i>
                                        </div>
                                    <?php endif; ?>
                                    <div>
                                        <h6><?= htmlspecialchars($invoiceDetails['service_name']) ?></h6>
                                        <p class="text-muted small mb-0"><?= htmlspecialchars($invoiceDetails['service_description']) ?></p>
                                    </div>
                                </div>
                            </div>
                            
                            <?php if (!empty($invoiceDetails['requirements'])): ?>
                                <div class="mb-3">
                                    <p class="text-muted">Keperluan</p>
                                    <p><?= nl2br(htmlspecialchars($invoiceDetails['requirements'])) ?></p>
                                </div>
                            <?php endif; ?>
                            
                            <div class="mb-3">
                                <p class="text-muted">Detail Pembayaran</p>
                                <table class="table table-dark table-striped">
                                    <tr>
                                        <td>Subtotal</td>
                                        <td class="text-end">Rp <?= number_format($invoiceDetails['total_amount'], 0, ',', '.') ?></td>
                                    </tr>
                                    <tr>
                                        <td>PPN (11%)</td>
                                        <td class="text-end">Rp <?= number_format($invoiceDetails['total_amount'] * 0.11, 0, ',', '.') ?></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Total</strong></td>
                                        <td class="text-end"><strong class="text-warning">Rp <?= number_format($invoiceDetails['total_amount'] * 1.11, 0, ',', '.') ?></strong></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                            <a href="?id=<?= $invoiceDetails['id'] ?>&print=1" class="btn btn-gold" target="_blank">
                                <i class="bi bi-printer me-2"></i>Cetak Invoice
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const invoiceDetailsModal = new bootstrap.Modal(document.getElementById('invoiceDetailsModal'));
                    invoiceDetailsModal.show();
                });
            </script>
        <?php endif; ?>
    <?php endif; ?>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
```

## Langkah Selanjutnya

Dengan menambahkan file `auth/orders.php`, `auth/services.php`, dan `auth/invoices.php`, sistem autentikasi Project Situneo Digital sekarang memiliki:

1. **Halaman Dashboard** - Menampilkan ringkasan aktivitas pengguna
2. **Halaman Profil** - Mengelola informasi profil pengguna
3. **Halaman Pesanan** - Melihat dan membuat pesanan layanan
4. **Halaman Layanan** - Melihat semua layanan yang tersedia
5. **Halaman Invoice** - Melihat dan mencetak invoice pesanan

Sistem ini sudah terintegrasi dengan baik dan memiliki fitur:
- Autentikasi dengan password hashing
- Sesi pengguna yang aman
- Role-based access control
- Manajemen pesanan dan invoice
- Desain yang responsif dan menarik

Apakah Anda ingin saya lanjutkan dengan membuat file admin untuk mengelola pengguna, pesanan, dan layanan? Atau ada bagian lain dari sistem yang ingin kita kembangkan?

### USER
ok next

### ASSISTANT
Baik, mari kita lanjutkan dengan membuat file admin untuk mengelola pengguna, pesanan, dan layanan. Pertama, kita akan membuat folder `auth/admin/` dan file-file yang diperlukan.

### 14. auth/admin/users.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Admin Users Management
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

// Get filter parameters
$role = $_GET['role'] ?? 'all';
$status = $_GET['status'] ?? 'all';
$search = $_GET['search'] ?? '';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 10;
$offset = ($page - 1) * $limit;

// Build query based on filters
$whereClause = "WHERE 1=1";
$params = [];
$types = "";

if ($role !== 'all') {
    $whereClause .= " AND u.role = ?";
    $params[] = $role;
    $types .= "i";
}

if ($status !== 'all') {
    $whereClause .= " AND u.status = ?";
    $params[] = $status;
    $types .= "s";
}

if (!empty($search)) {
    $whereClause .= " AND (u.name LIKE ? OR u.email LIKE ?)";
    $searchParam = "%$search%";
    $params[] = $searchParam;
    $params[] = $searchParam;
    $types .= "ss";
}

// Get total users count
$countQuery = "SELECT COUNT(*) as total FROM users u $whereClause";
$stmt = $conn->prepare($countQuery);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$result = $stmt->get_result();
$totalUsers = $result->fetch_assoc()['total'];
$totalPages = ceil($totalUsers / $limit);

// Get users with pagination
$query = "SELECT u.*, 
          (SELECT COUNT(*) FROM orders WHERE user_id = u.id) as order_count,
          (SELECT COUNT(*) FROM orders WHERE user_id = u.id AND status = 'completed') as completed_orders
          FROM users u 
          $whereClause 
          ORDER BY u.created_at DESC 
          LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$users = $stmt->get_result();

// Get user details if requested
$userDetails = null;
if (isset($_GET['id'])) {
    $userId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT u.*, 
                          (SELECT COUNT(*) FROM orders WHERE user_id = u.id) as order_count,
                          (SELECT COUNT(*) FROM orders WHERE user_id = u.id AND status = 'completed') as completed_orders,
                          (SELECT SUM(total_amount) FROM orders WHERE user_id = u.id) as total_spent
                          FROM users u 
                          WHERE u.id = ?");
    $stmt->bind_param("i", $userId);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $userDetails = $result->fetch_assoc();
    }
}

// Process user status update
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['update_status'])) {
    $userId = $_POST['user_id'];
    $status = $_POST['status'];
    
    $stmt = $conn->prepare("UPDATE users SET status = ? WHERE id = ?");
    $stmt->bind_param("si", $status, $userId);
    
    if ($stmt->execute()) {
        // Log activity
        logActivity($user['id'], "Updated user status to $status for user ID: $userId");
        
        header("Location: users.php?success=status_updated");
        exit;
    } else {
        $error = "Terjadi kesalahan saat memperbarui status pengguna.";
    }
}

// Process user role update
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['update_role'])) {
    $userId = $_POST['user_id'];
    $role = $_POST['role'];
    
    $stmt = $conn->prepare("UPDATE users SET role = ? WHERE id = ?");
    $stmt->bind_param("ii", $role, $userId);
    
    if ($stmt->execute()) {
        // Log activity
        logActivity($user['id'], "Updated user role to $role for user ID: $userId");
        
        header("Location: users.php?success=role_updated");
        exit;
    } else {
        $error = "Terjadi kesalahan saat memperbarui role pengguna.";
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelola Pengguna - SITUNEO DIGITAL</title>
    <meta name="description" content="Kelola pengguna SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* User Card */
        .user-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .user-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .user-avatar-placeholder {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--dark-blue);
            margin-right: 15px;
            font-size: 1.5rem;
        }
        
        .user-name {
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .user-email {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .user-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-active {
            background: rgba(25, 135, 84, 0.2);
            color: #198754;
        }
        
        .status-inactive {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .status-suspended {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .user-role {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .role-user {
            background: rgba(13, 202, 240, 0.2);
            color: #0dcaf0;
        }
        
        .role-admin {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
        }
        
        .role-super-admin {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .user-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .user-stat {
            text-align: center;
        }
        
        .user-stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .user-stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 8px 15px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .filter-tab:hover, .filter-tab.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Search Form */
        .search-form {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 10px 20px;
            color: var(--white);
            transition: all 0.3s;
            flex: 1;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
            outline: none;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .search-btn {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-link {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* User Details Modal */
        .modal-content {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .modal-footer {
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }
        
        .form-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-select:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="../profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="../settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="../dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="../orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="../services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="../invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="../support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
        <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
        <a href="users.php" class="sidebar-item active">
            <i class="bi bi-people"></i> Kelola Pengguna
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-receipt"></i> Semua Pesanan
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-gear"></i> Kelola Layanan
        </a>
        <a href="reports.php" class="sidebar-item">
            <i class="bi bi-graph-up"></i> Laporan
        </a>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (isset($_GET['success']) && $_GET['success'] === 'status_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Status pengguna berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($_GET['success']) && $_GET['success'] === 'role_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Role pengguna berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($error)): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $error ?>
                </div>
            <?php endif; ?>
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Kelola Pengguna</h1>
                <div class="d-flex gap-2">
                    <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#addUserModal">
                        <i class="bi bi-plus-circle me-2"></i>Tambah Pengguna
                    </button>
                    <a href="reports.php?export=users" class="btn btn-outline-gold">
                        <i class="bi bi-download me-2"></i>Export
                    </a>
                </div>
            </div>
            
            <!-- Search Form -->
            <form class="search-form" method="get" action="">
                <input type="text" class="search-input" name="search" placeholder="Cari nama atau email..." value="<?= htmlspecialchars($search) ?>">
                <button type="submit" class="search-btn">
                    <i class="bi bi-search"></i>
                </button>
            </form>
            
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <div>
                    <span class="me-2">Role:</span>
                    <a href="?role=all&status=<?= $status ?>&search=<?= $search ?>" class="filter-tab <?= $role === 'all' ? 'active' : '' ?>">
                        Semua
                    </a>
                    <a href="?role=1&status=<?= $status ?>&search=<?= $search ?>" class="filter-tab <?= $role === '1' ? 'active' : '' ?>">
                        User
                    </a>
                    <a href="?role=2&status=<?= $status ?>&search=<?= $search ?>" class="filter-tab <?= $role === '2' ? 'active' : '' ?>">
                        Admin
                    </a>
                    <a href="?role=3&status=<?= $status ?>&search=<?= $search ?>" class="filter-tab <?= $role === '3' ? 'active' : '' ?>">
                        Super Admin
                    </a>
                </div>
                
                <div>
                    <span class="me-2">Status:</span>
                    <a href="?status=all&role=<?= $role ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'all' ? 'active' : '' ?>">
                        Semua
                    </a>
                    <a href="?status=active&role=<?= $role ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'active' ? 'active' : '' ?>">
                        Aktif
                    </a>
                    <a href="?status=inactive&role=<?= $role ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'inactive' ? 'active' : '' ?>">
                        Tidak Aktif
                    </a>
                    <a href="?status=suspended&role=<?= $role ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'suspended' ? 'active' : '' ?>">
                        Disuspend
                    </a>
                </div>
            </div>
            
            <!-- Users List -->
            <?php if ($users->num_rows > 0): ?>
                <div class="users-list">
                    <?php while ($userData = $users->fetch_assoc()): ?>
                        <div class="user-card" data-aos="fade-up">
                            <div class="user-header">
                                <div class="user-info">
                                    <?php if ($userData['avatar']): ?>
                                        <img src="../../uploads/avatars/<?= htmlspecialchars($userData['avatar']) ?>" alt="<?= htmlspecialchars($userData['name']) ?>" class="user-avatar">
                                    <?php else: ?>
                                        <div class="user-avatar-placeholder"><?= strtoupper(substr($userData['name'], 0, 1)) ?></div>
                                    <?php endif; ?>
                                    <div>
                                        <div class="user-name"><?= htmlspecialchars($userData['name']) ?></div>
                                        <div class="user-email"><?= htmlspecialchars($userData['email']) ?></div>
                                    </div>
                                </div>
                                <div>
                                    <span class="user-status status-<?= htmlspecialchars($userData['status']) ?>">
                                        <?= ucfirst(htmlspecialchars($userData['status'])) ?>
                                    </span>
                                    <span class="user-role role-<?= $userData['role'] == 1 ? 'user' : ($userData['role'] == 2 ? 'admin' : 'super-admin') ?>">
                                        <?= $userData['role'] == 1 ? 'User' : ($userData['role'] == 2 ? 'Admin' : 'Super Admin') ?>
                                    </span>
                                </div>
                            </div>
                            
                            <div class="user-details">
                                <div class="user-stat">
                                    <div class="user-stat-value"><?= $userData['order_count'] ?></div>
                                    <div class="user-stat-label">Total Pesanan</div>
                                </div>
                                <div class="user-stat">
                                    <div class="user-stat-value"><?= $userData['completed_orders'] ?></div>
                                    <div class="user-stat-label">Selesai</div>
                                </div>
                                <div class="user-stat">
                                    <div class="user-stat-value"><?= date('d M Y', strtotime($userData['created_at'])) ?></div>
                                    <div class="user-stat-label">Bergabung</div>
                                </div>
                            </div>
                            
                            <div class="user-actions">
                                <a href="?id=<?= $userData['id'] ?>" class="btn-outline-gold">
                                    <i class="bi bi-eye me-1"></i> Detail
                                </a>
                                <button class="btn-outline-gold" data-bs-toggle="dropdown">
                                    <i class="bi bi-gear me-1"></i> Kelola
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li>
                                        <form method="post" action="">
                                            <input type="hidden" name="user_id" value="<?= $userData['id'] ?>">
                                            <input type="hidden" name="update_status" value="1">
                                            
                                            <?php if ($userData['status'] === 'active'): ?>
                                                <button type="submit" name="status" value="inactive" class="dropdown-item">
                                                    <i class="bi bi-pause-circle me-2"></i>Nonaktifkan
                                                </button>
                                                <button type="submit" name="status" value="suspended" class="dropdown-item">
                                                    <i class="bi bi-exclamation-triangle me-2"></i>Suspend
                                                </button>
                                            <?php elseif ($userData['status'] === 'inactive'): ?>
                                                <button type="submit" name="status" value="active" class="dropdown-item">
                                                    <i class="bi bi-play-circle me-2"></i>Aktifkan
                                                </button>
                                                <button type="submit" name="status" value="suspended" class="dropdown-item">
                                                    <i class="bi bi-exclamation-triangle me-2"></i>Suspend
                                                </button>
                                            <?php else: ?>
                                                <button type="submit" name="status" value="active" class="dropdown-item">
                                                    <i class="bi bi-play-circle me-2"></i>Aktifkan
                                                </button>
                                                <button type="submit" name="status" value="inactive" class="dropdown-item">
                                                    <i class="bi bi-pause-circle me-2"></i>Nonaktifkan
                                                </button>
                                            <?php endif; ?>
                                        </form>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <form method="post" action="">
                                            <input type="hidden" name="user_id" value="<?= $userData['id'] ?>">
                                            <input type="hidden" name="update_role" value="1">
                                            
                                            <?php if ($userData['role'] == 1): ?>
                                                <button type="submit" name="role" value="2" class="dropdown-item">
                                                    <i class="bi bi-shield-check me-2"></i>Jadikan Admin
                                                </button>
                                            <?php elseif ($userData['role'] == 2): ?>
                                                <button type="submit" name="role" value="1" class="dropdown-item">
                                                    <i class="bi bi-person me-2"></i>Jadikan User
                                                </button>
                                                <button type="submit" name="role" value="3" class="dropdown-item">
                                                    <i class="bi bi-shield-fill me-2"></i>Jadikan Super Admin
                                                </button>
                                            <?php else: ?>
                                                <button type="submit" name="role" value="2" class="dropdown-item">
                                                    <i class="bi bi-shield-check me-2"></i>Jadikan Admin
                                                </button>
                                                <button type="submit" name="role" value="1" class="dropdown-item">
                                                    <i class="bi bi-person me-2"></i>Jadikan User
                                                </button>
                                            <?php endif; ?>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    <?php endwhile; ?>
                </div>
                
                <!-- Pagination -->
                <?php if ($totalPages > 1): ?>
                    <div class="pagination">
                        <?php if ($page > 1): ?>
                            <a href="?role=<?= $role ?>&status=<?= $status ?>&search=<?= $search ?>&page=<?= $page - 1 ?>" class="page-link">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        <?php endif; ?>
                        
                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                            <?php if ($i == $page): ?>
                                <span class="page-link active"><?= $i ?></span>
                            <?php else: ?>
                                <a href="?role=<?= $role ?>&status=<?= $status ?>&search=<?= $search ?>&page=<?= $i ?>" class="page-link"><?= $i ?></a>
                            <?php endif; ?>
                        <?php endfor; ?>
                        
                        <?php if ($page < $totalPages): ?>
                            <a href="?role=<?= $role ?>&status=<?= $status ?>&search=<?= $search ?>&page=<?= $page + 1 ?>" class="page-link">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="text-center py-5">
                    <i class="bi bi-people fs-1 text-muted"></i>
                    <h4 class="mt-3">Tidak ada pengguna</h4>
                    <p class="text-muted">Tidak ada pengguna yang ditemukan dengan filter ini.</p>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <!-- User Details Modal -->
    <?php if ($userDetails): ?>
        <div class="modal fade" id="userDetailsModal" tabindex="-1" aria-labelledby="userDetailsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="userDetailsModalLabel">Detail Pengguna</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-3">
                            <div class="col-md-4 text-center">
                                <?php if ($userDetails['avatar']): ?>
                                    <img src="../../uploads/avatars/<?= htmlspecialchars($userDetails['avatar']) ?>" alt="<?= htmlspecialchars($userDetails['name']) ?>" class="img-fluid rounded-circle mb-3" style="max-width: 150px;">
                                <?php else: ?>
                                    <div class="user-avatar-placeholder mx-auto mb-3" style="width: 150px; height: 150px; font-size: 3rem;">
                                        <?= strtoupper(substr($userDetails['name'], 0, 1)) ?>
                                    </div>
                                <?php endif; ?>
                                <h4><?= htmlspecialchars($userDetails['name']) ?></h4>
                                <p class="text-muted"><?= htmlspecialchars($userDetails['email']) ?></p>
                            </div>
                            <div class="col-md-8">
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <p class="text-muted">Status</p>
                                        <span class="user-status status-<?= htmlspecialchars($userDetails['status']) ?>">
                                            <?= ucfirst(htmlspecialchars($userDetails['status'])) ?>
                                        </span>
                                    </div>
                                    <div class="col-sm-4">
                                        <p class="text-muted">Role</p>
                                        <span class="user-role role-<?= $userDetails['role'] == 1 ? 'user' : ($userDetails['role'] == 2 ? 'admin' : 'super-admin') ?>">
                                            <?= $userDetails['role'] == 1 ? 'User' : ($userDetails['role'] == 2 ? 'Admin' : 'Super Admin') ?>
                                        </span>
                                    </div>
                                    <div class="col-sm-4">
                                        <p class="text-muted">Email Verified</p>
                                        <span class="badge <?= $userDetails['email_verified'] ? 'bg-success' : 'bg-danger' ?>">
                                            <?= $userDetails['email_verified'] ? 'Verified' : 'Not Verified' ?>
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <p class="text-muted">Total Pesanan</p>
                                        <h5><?= $userDetails['order_count'] ?></h5>
                                    </div>
                                    <div class="col-sm-4">
                                        <p class="text-muted">Pesanan Selesai</p>
                                        <h5><?= $userDetails['completed_orders'] ?></h5>
                                    </div>
                                    <div class="col-sm-4">
                                        <p class="text-muted">Total Pengeluaran</p>
                                        <h5>Rp <?= number_format($userDetails['total_spent'] ?? 0, 0, ',', '.') ?></h5>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-sm-6">
                                        <p class="text-muted">Tanggal Bergabung</p>
                                        <h5><?= date('d M Y, H:i', strtotime($userDetails['created_at'])) ?></h5>
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="text-muted">Terakhir Update</p>
                                        <h5><?= date('d M Y, H:i', strtotime($userDetails['updated_at'])) ?></h5>
                                    </div>
                                </div>
                                
                                <?php if (!empty($userDetails['phone'])): ?>
                                    <div class="mb-3">
                                        <p class="text-muted">Nomor Telepon</p>
                                        <h5><?= htmlspecialchars($userDetails['phone']) ?></h5>
                                    </div>
                                <?php endif; ?>
                                
                                <?php if (!empty($userDetails['address'])): ?>
                                    <div class="mb-3">
                                        <p class="text-muted">Alamat</p>
                                        <h5><?= nl2br(htmlspecialchars($userDetails['address'])) ?></h5>
                                    </div>
                                <?php endif; ?>
                                
                                <?php if (!empty($userDetails['referral_code'])): ?>
                                    <div class="mb-3">
                                        <p class="text-muted">Kode Referral</p>
                                        <h5><?= htmlspecialchars($userDetails['referral_code']) ?></h5>
                                    </div>
                                <?php endif; ?>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <a href="orders.php?user=<?= $userDetails['id'] ?>" class="btn btn-outline-gold">
                            <i class="bi bi-receipt me-2"></i>Lihat Pesanan
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const userDetailsModal = new bootstrap.Modal(document.getElementById('userDetailsModal'));
                userDetailsModal.show();
            });
        </script>
    <?php endif; ?>
    
    <!-- Add User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addUserModalLabel">Tambah Pengguna Baru</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post" action="add_user.php">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="name" class="form-label">Nama Lengkap</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" name="password" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Nomor Telepon</label>
                            <input type="tel" class="form-control" id="phone" name="phone">
                        </div>
                        <div class="mb-3">
                            <label for="role" class="form-label">Role</label>
                            <select class="form-select" id="role" name="role" required>
                                <option value="1">User</option>
                                <option value="2">Admin</option>
                                <?php if ($user['role'] == 3): ?>
                                    <option value="3">Super Admin</option>
                                <?php endif; ?>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-select" id="status" name="status" required>
                                <option value="active">Aktif</option>
                                <option value="inactive">Tidak Aktif</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn-gold">Tambah Pengguna</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
```

### 15. auth/admin/add_user.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Add User Process
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

$errors = [];
$success = '';

// Process add user form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $name = trim($_POST['name']);
    $email = trim($_POST['email']);
    $password = $_POST['password'];
    $phone = trim($_POST['phone']);
    $role = $_POST['role'];
    $status = $_POST['status'];
    
    // Validation
    if (empty($name)) {
        $errors['name'] = 'Nama lengkap harus diisi';
    }
    
    if (empty($email)) {
        $errors['email'] = 'Email harus diisi';
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = 'Format email tidak valid';
    } else {
        // Check if email already exists
        $stmt = $conn->prepare("SELECT id FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        $result = $stmt->get_result();
        
        if ($result->num_rows > 0) {
            $errors['email'] = 'Email sudah terdaftar';
        }
    }
    
    if (empty($password)) {
        $errors['password'] = 'Password harus diisi';
    } elseif (strlen($password) < MIN_PASSWORD_LENGTH) {
        $errors['password'] = 'Password minimal ' . MIN_PASSWORD_LENGTH . ' karakter';
    }
    
    if (empty($phone)) {
        $errors['phone'] = 'Nomor telepon harus diisi';
    }
    
    // If no errors, add user
    if (empty($errors)) {
        $hashed_password = hashPassword($password);
        $referral_code = strtoupper(substr(md5(time()), 0, 6));
        
        $stmt = $conn->prepare("INSERT INTO users (name, email, password, phone, role, status, email_verified, referral_code, created_at) 
                               VALUES (?, ?, ?, ?, ?, ?, 1, ?, NOW())");
        $email_verified = 1; // Auto-verify admin-created accounts
        $stmt->bind_param("ssssiss", $name, $email, $hashed_password, $phone, $role, $status, $referral_code);
        
        if ($stmt->execute()) {
            $userId = $conn->insert_id;
            
            // Log activity
            logActivity($user['id'], "Created new user: $name (ID: $userId)");
            
            header("Location: users.php?success=user_added");
            exit;
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// If there are errors, redirect back with error messages
if (!empty($errors)) {
    $_SESSION['errors'] = $errors;
    $_SESSION['form_data'] = $_POST;
    header("Location: users.php?error=add_user_failed");
    exit;
}
?>
```

### 16. auth/admin/orders.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Admin Orders Management
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

// Get filter parameters
$status = $_GET['status'] ?? 'all';
$search = $_GET['search'] ?? '';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 10;
$offset = ($page - 1) * $limit;

// Build query based on filters
$whereClause = "WHERE 1=1";
$params = [];
$types = "";

if ($status !== 'all') {
    $whereClause .= " AND o.status = ?";
    $params[] = $status;
    $types .= "s";
}

if (!empty($search)) {
    $whereClause .= " AND (o.order_number LIKE ? OR u.name LIKE ? OR u.email LIKE ?)";
    $searchParam = "%$search%";
    $params[] = $searchParam;
    $params[] = $searchParam;
    $params[] = $searchParam;
    $types .= "sss";
}

// Get total orders count
$countQuery = "SELECT COUNT(*) as total FROM orders o LEFT JOIN users u ON o.user_id = u.id $whereClause";
$stmt = $conn->prepare($countQuery);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$result = $stmt->get_result();
$totalOrders = $result->fetch_assoc()['total'];
$totalPages = ceil($totalOrders / $limit);

// Get orders with pagination
$query = "SELECT o.*, u.name as user_name, u.email as user_email, s.name as service_name, s.image as service_image 
          FROM orders o 
          LEFT JOIN users u ON o.user_id = u.id 
          LEFT JOIN services s ON o.service_id = s.id 
          $whereClause 
          ORDER BY o.created_at DESC 
          LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$orders = $stmt->get_result();

// Get order details if requested
$orderDetails = null;
if (isset($_GET['id'])) {
    $orderId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT o.*, u.name as user_name, u.email as user_email, u.phone as user_phone, u.address as user_address, 
                           s.name as service_name, s.description as service_description, s.image as service_image 
                           FROM orders o 
                           LEFT JOIN users u ON o.user_id = u.id 
                           LEFT JOIN services s ON o.service_id = s.id 
                           WHERE o.id = ?");
    $stmt->bind_param("i", $orderId);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $orderDetails = $result->fetch_assoc();
    }
}

// Process order status update
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['update_status'])) {
    $orderId = $_POST['order_id'];
    $status = $_POST['status'];
    $notes = $_POST['notes'] ?? '';
    
    $stmt = $conn->prepare("UPDATE orders SET status = ?, notes = ?, updated_at = NOW() WHERE id = ?");
    $stmt->bind_param("ssi", $status, $notes, $orderId);
    
    if ($stmt->execute()) {
        // Log activity
        logActivity($user['id'], "Updated order status to $status for order ID: $orderId");
        
        header("Location: orders.php?success=status_updated");
        exit;
    } else {
        $error = "Terjadi kesalahan saat memperbarui status pesanan.";
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelola Pesanan - SITUNEO DIGITAL</title>
    <meta name="description" content="Kelola pesanan SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Order Card */
        .order-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .order-number {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .order-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        
        .status-processing {
            background: rgba(13, 202, 240, 0.2);
            color: #0dcaf0;
        }
        
        .status-completed {
            background: rgba(25, 135, 84, 0.2);
            color: #198754;
        }
        
        .status-cancelled {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .order-service {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .service-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .service-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .order-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .order-date {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .order-amount {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--gold);
        }
        
        .order-customer {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .customer-name {
            font-weight: 600;
        }
        
        .customer-email {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .order-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 8px 15px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .filter-tab:hover, .filter-tab.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Search Form */
        .search-form {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 10px 20px;
            color: var(--white);
            transition: all 0.3s;
            flex: 1;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
            outline: none;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .search-btn {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-link {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Order Details Modal */
        .modal-content {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .modal-footer {
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }
        
        .form-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-select:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="../profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="../settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="../dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="../orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="../services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="../invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="../support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
        <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
        <a href="users.php" class="sidebar-item">
            <i class="bi bi-people"></i> Kelola Pengguna
        </a>
        <a href="orders.php" class="sidebar-item active">
            <i class="bi bi-receipt"></i> Semua Pesanan
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-gear"></i> Kelola Layanan
        </a>
        <a href="reports.php" class="sidebar-item">
            <i class="bi bi-graph-up"></i> Laporan
        </a>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (isset($_GET['success']) && $_GET['success'] === 'status_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Status pesanan berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($error)): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $error ?>
                </div>
            <?php endif; ?>
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Kelola Semua Pesanan</h1>
                <div class="d-flex gap-2">
                    <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#addOrderModal">
                        <i class="bi bi-plus-circle me-2"></i>Tambah Pesanan
                    </button>
                    <a href="reports.php?export=orders" class="btn btn-outline-gold">
                        <i class="bi bi-download me-2"></i>Export
                    </a>
                </div>
            </div>
            
            <!-- Search Form -->
            <form class="search-form" method="get" action="">
                <input type="text" class="search-input" name="search" placeholder="Cari nomor pesanan, nama atau email..." value="<?= htmlspecialchars($search) ?>">
                <button type="submit" class="search-btn">
                    <i class="bi bi-search"></i>
                </button>
            </form>
            
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <span class="me-2">Status:</span>
                <a href="?status=all&search=<?= $search ?>" class="filter-tab <?= $status === 'all' ? 'active' : '' ?>">
                    Semua (<?= $totalOrders ?>)
                </a>
                <a href="?status=pending&search=<?= $search ?>" class="filter-tab <?= $status === 'pending' ? 'active' : '' ?>">
                    Menunggu
                </a>
                <a href="?status=processing&search=<?= $search ?>" class="filter-tab <?= $status === 'processing' ? 'active' : '' ?>">
                    Diproses
                </a>
                <a href="?status=completed&search=<?= $search ?>" class="filter-tab <?= $status === 'completed' ? 'active' : '' ?>">
                    Selesai
                </a>
                <a href="?status=cancelled&search=<?= $search ?>" class="filter-tab <?= $status === 'cancelled' ? 'active' : '' ?>">
                    Dibatalkan
                </a>
            </div>
            
            <!-- Orders List -->
            <?php if ($orders->num_rows > 0): ?>
                <div class="orders-list">
                    <?php while ($order = $orders->fetch_assoc()): ?>
                        <div class="order-card" data-aos="fade-up">
                            <div class="order-header">
                                <div class="order-number"><?= htmlspecialchars($order['order_number']) ?></div>
                                <div class="order-status status-<?= htmlspecialchars($order['status']) ?>">
                                    <?= ucfirst(htmlspecialchars($order['status'])) ?>
                                </div>
                            </div>
                            
                            <div class="order-service">
                                <?php if ($order['service_image']): ?>
                                    <img src="<?= htmlspecialchars($order['service_image']) ?>" alt="<?= htmlspecialchars($order['service_name']) ?>" class="service-image">
                                <?php else: ?>
                                    <div class="service-image d-flex align-items-center justify-content-center bg-secondary">
                                        <i class="bi bi-image fs-4"></i>
                                    </div>
                                <?php endif; ?>
                                <div>
                                    <div class="service-name"><?= htmlspecialchars($order['service_name']) ?></div>
                                    <div class="text-muted small">
                                        <?= date('d M Y, H:i', strtotime($order['created_at'])) ?>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="order-customer">
                                <div>
                                    <div class="customer-name"><?= htmlspecialchars($order['user_name']) ?></div>
                                    <div class="customer-email"><?= htmlspecialchars($order['user_email']) ?></div>
                                </div>
                                <div class="order-amount">
                                    Rp <?= number_format($order['total_amount'], 0, ',', '.') ?>
                                </div>
                            </div>
                            
                            <div class="order-actions">
                                <a href="?id=<?= $order['id'] ?>" class="btn-outline-gold">
                                    <i class="bi bi-eye me-1"></i> Detail
                                </a>
                                <button class="btn-outline-gold" data-bs-toggle="dropdown">
                                    <i class="bi bi-gear me-1"></i> Kelola
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li>
                                        <form method="post" action="">
                                            <input type="hidden" name="order_id" value="<?= $order['id'] ?>">
                                            <input type="hidden" name="update_status" value="1">
                                            
                                            <?php if ($order['status'] === 'pending'): ?>
                                                <button type="submit" name="status" value="processing" class="dropdown-item">
                                                    <i class="bi bi-play-circle me-2"></i>Proses
                                                </button>
                                                <button type="submit" name="status" value="completed" class="dropdown-item">
                                                    <i class="bi bi-check-circle me-2"></i>Selesaikan
                                                </button>
                                                <button type="submit" name="status" value="cancelled" class="dropdown-item">
                                                    <i class="bi bi-x-circle me-2"></i>Batalkan
                                                </button>
                                            <?php elseif ($order['status'] === 'processing'): ?>
                                                <button type="submit" name="status" value="completed" class="dropdown-item">
                                                    <i class="bi bi-check-circle me-2"></i>Selesaikan
                                                </button>
                                                <button type="submit" name="status" value="cancelled" class="dropdown-item">
                                                    <i class="bi bi-x-circle me-2"></i>Batalkan
                                                </button>
                                            <?php elseif ($order['status'] === 'completed'): ?>
                                                <button type="submit" name="status" value="processing" class="dropdown-item">
                                                    <i class="bi bi-arrow-clockwise me-2"></i>Kembali ke Proses
                                                </button>
                                                <button type="submit" name="status" value="cancelled" class="dropdown-item">
                                                    <i class="bi bi-x-circle me-2"></i>Batalkan
                                                </button>
                                            <?php else: ?>
                                                <button type="submit" name="status" value="pending" class="dropdown-item">
                                                    <i class="bi bi-arrow-counterclockwise me-2"></i>Kembali ke Menunggu
                                                </button>
                                                <button type="submit" name="status" value="processing" class="dropdown-item">
                                                    <i class="bi bi-play-circle me-2"></i>Proses
                                                </button>
                                                <button type="submit" name="status" value="completed" class="dropdown-item">
                                                    <i class="bi bi-check-circle me-2"></i>Selesaikan
                                                </button>
                                            <?php endif; ?>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    <?php endwhile; ?>
                </div>
                
                <!-- Pagination -->
                <?php if ($totalPages > 1): ?>
                    <div class="pagination">
                        <?php if ($page > 1): ?>
                            <a href="?status=<?= $status ?>&search=<?= $search ?>&page=<?= $page - 1 ?>" class="page-link">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        <?php endif; ?>
                        
                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                            <?php if ($i == $page): ?>
                                <span class="page-link active"><?= $i ?></span>
                            <?php else: ?>
                                <a href="?status=<?= $status ?>&search=<?= $search ?>&page=<?= $i ?>" class="page-link"><?= $i ?></a>
                            <?php endif; ?>
                        <?php endfor; ?>
                        
                        <?php if ($page < $totalPages): ?>
                            <a href="?status=<?= $status ?>&search=<?= $search ?>&page=<?= $page + 1 ?>" class="page-link">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="text-center py-5">
                    <i class="bi bi-receipt fs-1 text-muted"></i>
                    <h4 class="mt-3">Tidak ada pesanan</h4>
                    <p class="text-muted">Tidak ada pesanan yang ditemukan dengan filter ini.</p>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <!-- Order Details Modal -->
    <?php if ($orderDetails): ?>
        <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-labelledby="orderDetailsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="orderDetailsModalLabel">Detail Pesanan</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p class="text-muted">Nomor Pesanan</p>
                                <h6><?= htmlspecialchars($orderDetails['order_number']) ?></h6>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted">Status</p>
                                <div class="order-status status-<?= htmlspecialchars($orderDetails['status']) ?>">
                                    <?= ucfirst(htmlspecialchars($orderDetails['status'])) ?>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p class="text-muted">Tanggal Pesanan</p>
                                <h6><?= date('d M Y, H:i', strtotime($orderDetails['created_at'])) ?></h6>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted">Total Harga</p>
                                <h6 class="text-warning">Rp <?= number_format($orderDetails['total_amount'], 0, ',', '.') ?></h6>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p class="text-muted">Informasi Pelanggan</p>
                                <h6><?= htmlspecialchars($orderDetails['user_name']) ?></h6>
                                <p class="text-muted small"><?= htmlspecialchars($orderDetails['user_email']) ?></p>
                                <?php if (!empty($orderDetails['user_phone'])): ?>
                                    <p class="text-muted small"><?= htmlspecialchars($orderDetails['user_phone']) ?></p>
                                <?php endif; ?>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted">Layanan</p>
                                <div class="d-flex align-items-center">
                                    <?php if ($orderDetails['service_image']): ?>
                                        <img src="<?= htmlspecialchars($orderDetails['service_image']) ?>" alt="<?= htmlspecialchars($orderDetails['service_name']) ?>" class="service-image me-3">
                                    <?php else: ?>
                                        <div class="service-image me-3 d-flex align-items-center justify-content-center bg-secondary">
                                            <i class="bi bi-image fs-4"></i>
                                        </div>
                                    <?php endif; ?>
                                    <div>
                                        <h6><?= htmlspecialchars($orderDetails['service_name']) ?></h6>
                                        <p class="text-muted small mb-0"><?= htmlspecialchars($orderDetails['service_description']) ?></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <?php if (!empty($orderDetails['requirements'])): ?>
                            <div class="mb-3">
                                <p class="text-muted">Keperluan</p>
                                <p><?= nl2br(htmlspecialchars($orderDetails['requirements'])) ?></p>
                            </div>
                        <?php endif; ?>
                        
                        <?php if (!empty($orderDetails['notes'])): ?>
                            <div class="mb-3">
                                <p class="text-muted">Catatan</p>
                                <p><?= nl2br(htmlspecialchars($orderDetails['notes'])) ?></p>
                            </div>
                        <?php endif; ?>
                        
                        <div class="mb-3">
                            <p class="text-muted">Update Status</p>
                            <form method="post" action="">
                                <input type="hidden" name="order_id" value="<?= $orderDetails['id'] ?>">
                                <input type="hidden" name="update_status" value="1">
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <select class="form-select" name="status">
                                            <option value="pending" <?= $orderDetails['status'] === 'pending' ? 'selected' : '' ?>>Menunggu</option>
                                            <option value="processing" <?= $orderDetails['status'] === 'processing' ? 'selected' : '' ?>>Diproses</option>
                                            <option value="completed" <?= $orderDetails['status'] === 'completed' ? 'selected' : '' ?>>Selesai</option>
                                            <option value="cancelled" <?= $orderDetails['status'] === 'cancelled' ? 'selected' : '' ?>>Dibatalkan</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <input type="text" class="form-control" name="notes" placeholder="Catatan (opsional)" value="<?= htmlspecialchars($orderDetails['notes'] ?? '') ?>">
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-gold">Update Status</button>
                            </form>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <a href="../invoices.php?id=<?= $orderDetails['id'] ?>" class="btn btn-outline-gold" target="_blank">
                            <i class="bi bi-file-earmark-text me-2"></i>Lihat Invoice
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const orderDetailsModal = new bootstrap.Modal(document.getElementById('orderDetailsModal'));
                orderDetailsModal.show();
            });
        </script>
    <?php endif; ?>
    
    <!-- Add Order Modal -->
    <div class="modal fade" id="addOrderModal" tabindex="-1" aria-labelledby="addOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addOrderModalLabel">Tambah Pesanan Baru</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post" action="add_order.php">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="user_id" class="form-label">Pelanggan</label>
                            <select class="form-select" id="user_id" name="user_id" required>
                                <option value="">Pilih Pelanggan</option>
                                <?php
                                $usersQuery = "SELECT id, name, email FROM users WHERE status = 'active' ORDER BY name";
                                $usersResult = $conn->query($usersQuery);
                                while ($userOption = $usersResult->fetch_assoc()) {
                                    echo '<option value="' . $userOption['id'] . '">' . htmlspecialchars($userOption['name']) . ' (' . htmlspecialchars($userOption['email']) . ')</option>';
                                }
                                ?>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="service_id" class="form-label">Layanan</label>
                            <select class="form-select" id="service_id" name="service_id" required>
                                <option value="">Pilih Layanan</option>
                                <?php
                                $servicesQuery = "SELECT id, name, price_start FROM services WHERE status = 'active' ORDER BY name";
                                $servicesResult = $conn->query($servicesQuery);
                                while ($serviceOption = $servicesResult->fetch_assoc()) {
                                    echo '<option value="' . $serviceOption['id'] . '">' . htmlspecialchars($serviceOption['name']) . ' - Rp ' . number_format($serviceOption['price_start'], 0, ',', '.') . '</option>';
                                }
                                ?>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="total_amount" class="form-label">Total Harga</label>
                            <div class="input-group">
                                <span class="input-group-text">Rp</span>
                                <input type="text" class="form-control" id="total_amount" name="total_amount" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="requirements" class="form-label">Keperluan</label>
                            <textarea class="form-control" id="requirements" name="requirements" rows="4" placeholder="Jelaskan keperluan pelanggan..." required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-select" id="status" name="status" required>
                                <option value="pending">Menunggu</option>
                                <option value="processing">Diproses</option>
                                <option value="completed">Selesai</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn-gold">Tambah Pesanan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Update total amount when service is selected
        document.getElementById('service_id').addEventListener('change', function() {
            const serviceId = this.value;
            if (serviceId) {
                // Fetch service price via AJAX
                fetch(`get_service_price.php?id=${serviceId}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            document.getElementById('total_amount').value = data.price.toLocaleString('id-ID');
                        }
                    })
                    .catch(error => console.error('Error:', error));
            } else {
                document.getElementById('total_amount').value = '';
            }
        });
    </script>
</body>
</html>
```

### 17. auth/admin/get_service_price.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Get Service Price
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

header('Content-Type: application/json');

if (isset($_GET['id'])) {
    $serviceId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT price_start FROM services WHERE id = ? AND status = 'active'");
    $stmt->bind_param("i", $serviceId);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $service = $result->fetch_assoc();
        echo json_encode([
            'success' => true,
            'price' => $service['price_start']
        ]);
    } else {
        echo json_encode([
            'success' => false,
            'message' => 'Service not found'
        ]);
    }
} else {
    echo json_encode([
        'success' => false,
        'message' => 'Service ID not provided'
    ]);
}
?>
```

### 18. auth/admin/add_order.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Add Order Process
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

$errors = [];
$success = '';

// Process add order form
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $userId = $_POST['user_id'];
    $serviceId = $_POST['service_id'];
    $totalAmount = str_replace('.', '', $_POST['total_amount']);
    $requirements = $_POST['requirements'];
    $status = $_POST['status'];
    
    // Validation
    if (empty($userId)) {
        $errors['user_id'] = 'Pelanggan harus dipilih';
    }
    
    if (empty($serviceId)) {
        $errors['service_id'] = 'Layanan harus dipilih';
    }
    
    if (empty($totalAmount)) {
        $errors['total_amount'] = 'Total harga harus diisi';
    }
    
    if (empty($requirements)) {
        $errors['requirements'] = 'Keperluan harus diisi';
    }
    
    // If no errors, add order
    if (empty($errors)) {
        // Generate order number
        $orderNumber = 'ORD-' . date('Ymd') . '-' . strtoupper(substr(md5(time()), 0, 6));
        
        $stmt = $conn->prepare("INSERT INTO orders (user_id, service_id, order_number, status, total_amount, requirements, created_at) 
                               VALUES (?, ?, ?, ?, ?, ?, NOW())");
        $stmt->bind_param("iissss", $userId, $serviceId, $orderNumber, $status, $totalAmount, $requirements);
        
        if ($stmt->execute()) {
            $orderId = $conn->insert_id;
            
            // Log activity
            logActivity($user['id'], "Created new order: $orderNumber for user ID: $userId");
            
            header("Location: orders.php?success=order_added");
            exit;
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// If there are errors, redirect back with error messages
if (!empty($errors)) {
    $_SESSION['errors'] = $errors;
    $_SESSION['form_data'] = $_POST;
    header("Location: orders.php?error=add_order_failed");
    exit;
}
?>
```

## Langkah Selanjutnya

Dengan menambahkan file-file admin, sistem autentikasi Project Situneo Digital sekarang memiliki:

1. **Halaman Admin Users** - Mengelola pengguna, status, dan role
2. **Halaman Admin Orders** - Mengelola semua pesanan dan statusnya
3. **Fungsi Tambah Pengguna** - Menambah pengguna baru dari admin panel
4. **Fungsi Tambah Pesanan** - Menambah pesanan baru dari admin panel
5. **Fungsi Get Service Price** - Mendapatkan harga layanan via AJAX

Sistem ini sudah memiliki fitur lengkap untuk:
- Manajemen pengguna dengan role-based access control
- Manajemen pesanan dengan status tracking
- Filter dan pencarian untuk pengguna dan pesanan
- Desain yang responsif dan menarik
- Logging aktivitas admin

Apakah Anda ingin saya lanjutkan dengan membuat file `auth/admin/services.php` untuk mengelola layanan, atau file `auth/admin/reports.php` untuk laporan? Atau ada bagian lain dari sistem yang ingin kita kembangkan?

### USER
ok next

### ASSISTANT
Baik, mari kita lanjutkan dengan membuat file `auth/admin/services.php` untuk mengelola layanan dan `auth/admin/reports.php` untuk laporan.

### 19. auth/admin/services.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Admin Services Management
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

// Get filter parameters
$category = $_GET['category'] ?? 'all';
$status = $_GET['status'] ?? 'all';
$search = $_GET['search'] ?? '';
$page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
$limit = 12;
$offset = ($page - 1) * $limit;

// Build query based on filters
$whereClause = "WHERE 1=1";
$params = [];
$types = "";

if ($category !== 'all') {
    $whereClause .= " AND category = ?";
    $params[] = $category;
    $types .= "s";
}

if ($status !== 'all') {
    $whereClause .= " AND status = ?";
    $params[] = $status;
    $types .= "s";
}

if (!empty($search)) {
    $whereClause .= " AND (name LIKE ? OR description LIKE ?)";
    $searchParam = "%$search%";
    $params[] = $searchParam;
    $params[] = $searchParam;
    $types .= "ss";
}

// Get total services count
$countQuery = "SELECT COUNT(*) as total FROM services $whereClause";
$stmt = $conn->prepare($countQuery);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$result = $stmt->get_result();
$totalServices = $result->fetch_assoc()['total'];
$totalPages = ceil($totalServices / $limit);

// Get services with pagination
$query = "SELECT * FROM services $whereClause ORDER BY category, name LIMIT $limit OFFSET $offset";
$stmt = $conn->prepare($query);
if (!empty($params)) {
    $stmt->bind_param($types, ...$params);
}
$stmt->execute();
$services = $stmt->get_result();

// Get all categories for filter
$categoriesQuery = "SELECT DISTINCT category FROM services ORDER BY category";
$categoriesResult = $conn->query($categoriesQuery);
$categories = [];
while ($row = $categoriesResult->fetch_assoc()) {
    $categories[] = $row['category'];
}

// Get service details if requested
$serviceDetails = null;
if (isset($_GET['id'])) {
    $serviceId = $_GET['id'];
    
    $stmt = $conn->prepare("SELECT * FROM services WHERE id = ?");
    $stmt->bind_param("i", $serviceId);
    $stmt->execute();
    $result = $stmt->get_result();
    
    if ($result->num_rows > 0) {
        $serviceDetails = $result->fetch_assoc();
    }
}

// Process service status update
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['update_status'])) {
    $serviceId = $_POST['service_id'];
    $status = $_POST['status'];
    
    $stmt = $conn->prepare("UPDATE services SET status = ?, updated_at = NOW() WHERE id = ?");
    $stmt->bind_param("si", $status, $serviceId);
    
    if ($stmt->execute()) {
        // Log activity
        logActivity($user['id'], "Updated service status to $status for service ID: $serviceId");
        
        header("Location: services.php?success=status_updated");
        exit;
    } else {
        $error = "Terjadi kesalahan saat memperbarui status layanan.";
    }
}

// Process service update
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['update_service'])) {
    $serviceId = $_POST['service_id'];
    $name = $_POST['name'];
    $category = $_POST['category'];
    $description = $_POST['description'];
    $priceStart = $_POST['price_start'];
    $priceUnit = $_POST['price_unit'];
    $image = $_POST['image'];
    $features = $_POST['features'];
    $perfectFor = $_POST['perfect_for'];
    $deliveryTime = $_POST['delivery_time'];
    $status = $_POST['status'];
    
    // Validation
    if (empty($name)) {
        $errors['name'] = 'Nama layanan harus diisi';
    }
    
    if (empty($category)) {
        $errors['category'] = 'Kategori harus diisi';
    }
    
    if (empty($description)) {
        $errors['description'] = 'Deskripsi harus diisi';
    }
    
    if (empty($priceStart)) {
        $errors['price_start'] = 'Harga awal harus diisi';
    }
    
    if (empty($priceUnit)) {
        $errors['price_unit'] = 'Satuan harga harus diisi';
    }
    
    // If no errors, update service
    if (empty($errors)) {
        // Convert features array to JSON
        $featuresArray = is_array($features) ? $features : [];
        $featuresJson = json_encode($featuresArray);
        
        $stmt = $conn->prepare("UPDATE services SET name = ?, category = ?, description = ?, price_start = ?, price_unit = ?, image = ?, features = ?, perfect_for = ?, delivery_time = ?, status = ?, updated_at = NOW() WHERE id = ?");
        $stmt->bind_param("sssissssssi", $name, $category, $description, $priceStart, $priceUnit, $image, $featuresJson, $perfectFor, $deliveryTime, $status, $serviceId);
        
        if ($stmt->execute()) {
            // Log activity
            logActivity($user['id'], "Updated service: $name (ID: $serviceId)");
            
            header("Location: services.php?success=service_updated");
            exit;
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// Process add service
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['add_service'])) {
    $name = $_POST['name'];
    $category = $_POST['category'];
    $description = $_POST['description'];
    $priceStart = $_POST['price_start'];
    $priceUnit = $_POST['price_unit'];
    $image = $_POST['image'];
    $features = $_POST['features'];
    $perfectFor = $_POST['perfect_for'];
    $deliveryTime = $_POST['delivery_time'];
    $status = $_POST['status'];
    
    // Validation
    if (empty($name)) {
        $errors['name'] = 'Nama layanan harus diisi';
    }
    
    if (empty($category)) {
        $errors['category'] = 'Kategori harus diisi';
    }
    
    if (empty($description)) {
        $errors['description'] = 'Deskripsi harus diisi';
    }
    
    if (empty($priceStart)) {
        $errors['price_start'] = 'Harga awal harus diisi';
    }
    
    if (empty($priceUnit)) {
        $errors['price_unit'] = 'Satuan harga harus diisi';
    }
    
    // If no errors, add service
    if (empty($errors)) {
        // Convert features array to JSON
        $featuresArray = is_array($features) ? $features : [];
        $featuresJson = json_encode($featuresArray);
        
        $stmt = $conn->prepare("INSERT INTO services (name, category, description, price_start, price_unit, image, features, perfect_for, delivery_time, status, created_at) 
                               VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW())");
        $stmt->bind_param("sssisssssss", $name, $category, $description, $priceStart, $priceUnit, $image, $featuresJson, $perfectFor, $deliveryTime, $status);
        
        if ($stmt->execute()) {
            $serviceId = $conn->insert_id;
            
            // Log activity
            logActivity($user['id'], "Added new service: $name (ID: $serviceId)");
            
            header("Location: services.php?success=service_added");
            exit;
        } else {
            $errors['general'] = 'Terjadi kesalahan. Silakan coba lagi.';
        }
    }
}

// If there are errors, redirect back with error messages
if (!empty($errors)) {
    $_SESSION['errors'] = $errors;
    $_SESSION['form_data'] = $_POST;
    header("Location: services.php?error=form_failed");
    exit;
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelola Layanan - SITUNEO DIGITAL</title>
    <meta name="description" content="Kelola layanan SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Service Card */
        .service-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            overflow: hidden;
            height: 100%;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(255, 180, 0, 0.3);
            border-color: var(--gold);
        }
        
        .service-image {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .service-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .service-card:hover .service-image img {
            transform: scale(1.1);
        }
        
        .service-icon-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 60px;
            height: 60px;
            background: var(--gradient-gold);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .service-icon-badge i {
            font-size: 1.5rem;
            color: var(--dark-blue);
        }
        
        .price-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,0,0,0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
        }
        
        .service-content {
            padding: 1.5rem;
        }
        
        .category-badge {
            display: inline-block;
            background: rgba(255,180,0,0.2);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }
        
        .service-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .service-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3

### USER
lanjut yang terpotong

### ASSISTANT
Maaf, kode saya terpotong lagi. Mari saya lanjutkan dengan file `auth/admin/services.php` yang lengkap:

```php
        .service-description {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .service-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 1rem;
        }
        
        .service-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: inline-block;
        }
        
        .status-active {
            background: rgba(25, 135, 84, 0.2);
            color: #198754;
        }
        
        .status-inactive {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .service-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 8px 15px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .filter-tab:hover, .filter-tab.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Search Form */
        .search-form {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 10px 20px;
            color: var(--white);
            transition: all 0.3s;
            flex: 1;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
            outline: none;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .search-btn {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 30px;
        }
        
        .page-link {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--text-light);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .page-link:hover, .page-link.active {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border-color: var(--gold);
        }
        
        /* Service Details Modal */
        .modal-content {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .modal-header {
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .modal-footer {
            border-top: 1px solid rgba(255, 180, 0, 0.2);
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }
        
        .form-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-select:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Feature List */
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .feature-item input {
            margin-right: 10px;
        }
        
        .feature-item button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .feature-item button:hover {
            background: rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="../profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="../settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="../dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="../orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="../services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="../invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="../support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
        <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
        <a href="users.php" class="sidebar-item">
            <i class="bi bi-people"></i> Kelola Pengguna
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-receipt"></i> Semua Pesanan
        </a>
        <a href="services.php" class="sidebar-item active">
            <i class="bi bi-gear"></i> Kelola Layanan
        </a>
        <a href="reports.php" class="sidebar-item">
            <i class="bi bi-graph-up"></i> Laporan
        </a>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (isset($_GET['success']) && $_GET['success'] === 'status_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Status layanan berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($_GET['success']) && $_GET['success'] === 'service_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Layanan berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($_GET['success']) && $_GET['success'] === 'service_added'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Layanan berhasil ditambahkan!
                </div>
            <?php endif; ?>
            
            <?php if (isset($error)): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $error ?>
                </div>
            <?php endif; ?>
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0">Kelola Layanan</h1>
                <div class="d-flex gap-2">
                    <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#addServiceModal">
                        <i class="bi bi-plus-circle me-2"></i>Tambah Layanan
                    </button>
                    <a href="reports.php?export=services" class="btn btn-outline-gold">
                        <i class="bi bi-download me-2"></i>Export
                    </a>
                </div>
            </div>
            
            <!-- Search Form -->
            <form class="search-form" method="get" action="">
                <input type="text" class="search-input" name="search" placeholder="Cari nama atau deskripsi layanan..." value="<?= htmlspecialchars($search) ?>">
                <button type="submit" class="search-btn">
                    <i class="bi bi-search"></i>
                </button>
            </form>
            
            <!-- Filter Tabs -->
            <div class="filter-tabs">
                <div>
                    <span class="me-2">Kategori:</span>
                    <a href="?category=all&status=<?= $status ?>&search=<?= $search ?>" class="filter-tab <?= $category === 'all' ? 'active' : '' ?>">
                        Semua
                    </a>
                    <?php foreach ($categories as $cat): ?>
                        <a href="?category=<?= urlencode($cat) ?>&status=<?= $status ?>&search=<?= $search ?>" class="filter-tab <?= $category === $cat ? 'active' : '' ?>">
                            <?= htmlspecialchars($cat) ?>
                        </a>
                    <?php endforeach; ?>
                </div>
                
                <div>
                    <span class="me-2">Status:</span>
                    <a href="?status=all&category=<?= $category ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'all' ? 'active' : '' ?>">
                        Semua
                    </a>
                    <a href="?status=active&category=<?= $category ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'active' ? 'active' : '' ?>">
                        Aktif
                    </a>
                    <a href="?status=inactive&category=<?= $category ?>&search=<?= $search ?>" class="filter-tab <?= $status === 'inactive' ? 'active' : '' ?>">
                        Tidak Aktif
                    </a>
                </div>
            </div>
            
            <!-- Services List -->
            <?php if ($services->num_rows > 0): ?>
                <div class="row g-4">
                    <?php while ($service = $services->fetch_assoc()): ?>
                        <div class="col-lg-4 col-md-6" data-aos="fade-up">
                            <div class="service-card">
                                <div class="service-image">
                                    <img src="<?= htmlspecialchars($service['image']) ?>" alt="<?= htmlspecialchars($service['name']) ?>">
                                    <div class="service-icon-badge">
                                        <i class="bi bi-<?= htmlspecialchars($service['icon']) ?>"></i>
                                    </div>
                                    <div class="price-badge">
                                        Rp <?= number_format($service['price_start'], 0, ',', '.') ?>
                                    </div>
                                </div>
                                <div class="service-content">
                                    <div class="category-badge"><?= htmlspecialchars($service['category']) ?></div>
                                    <h3 class="service-title"><?= htmlspecialchars($service['name']) ?></h3>
                                    <p class="service-description"><?= htmlspecialchars($service['description']) ?></p>
                                    <div class="service-price">
                                        Rp <?= number_format($service['price_start'], 0, ',', '.') ?> / <?= htmlspecialchars($service['price_unit']) ?>
                                    </div>
                                    <div class="service-status status-<?= htmlspecialchars($service['status']) ?>">
                                        <?= $service['status'] === 'active' ? 'Aktif' : 'Tidak Aktif' ?>
                                    </div>
                                    <div class="service-actions">
                                        <a href="?id=<?= $service['id'] ?>" class="btn-outline-gold">
                                            <i class="bi bi-eye me-1"></i> Detail
                                        </a>
                                        <button class="btn-outline-gold" data-bs-toggle="dropdown">
                                            <i class="bi bi-gear me-1"></i> Kelola
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li>
                                                <form method="post" action="">
                                                    <input type="hidden" name="service_id" value="<?= $service['id'] ?>">
                                                    <input type="hidden" name="update_status" value="1">
                                                    
                                                    <?php if ($service['status'] === 'active'): ?>
                                                        <button type="submit" name="status" value="inactive" class="dropdown-item">
                                                            <i class="bi bi-pause-circle me-2"></i>Nonaktifkan
                                                        </button>
                                                    <?php else: ?>
                                                        <button type="submit" name="status" value="active" class="dropdown-item">
                                                            <i class="bi bi-play-circle me-2"></i>Aktifkan
                                                        </button>
                                                    <?php endif; ?>
                                                </form>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <?php endwhile; ?>
                </div>
                
                <!-- Pagination -->
                <?php if ($totalPages > 1): ?>
                    <div class="pagination">
                        <?php if ($page > 1): ?>
                            <a href="?category=<?= $category ?>&status=<?= $status ?>&search=<?= $search ?>&page=<?= $page - 1 ?>" class="page-link">
                                <i class="bi bi-chevron-left"></i>
                            </a>
                        <?php endif; ?>
                        
                        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
                            <?php if ($i == $page): ?>
                                <span class="page-link active"><?= $i ?></span>
                            <?php else: ?>
                                <a href="?category=<?= $category ?>&status=<?= $status ?>&search=<?= $search ?>&page=<?= $i ?>" class="page-link"><?= $i ?></a>
                            <?php endif; ?>
                        <?php endfor; ?>
                        
                        <?php if ($page < $totalPages): ?>
                            <a href="?category=<?= $category ?>&status=<?= $status ?>&search=<?= $search ?>&page=<?= $page + 1 ?>" class="page-link">
                                <i class="bi bi-chevron-right"></i>
                            </a>
                        <?php endif; ?>
                    </div>
                <?php endif; ?>
            <?php else: ?>
                <div class="text-center py-5">
                    <i class="bi bi-gear fs-1 text-muted"></i>
                    <h4 class="mt-3">Tidak ada layanan</h4>
                    <p class="text-muted">Tidak ada layanan yang ditemukan dengan filter ini.</p>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <!-- Service Details Modal -->
    <?php if ($serviceDetails): ?>
        <div class="modal fade" id="serviceDetailsModal" tabindex="-1" aria-labelledby="serviceDetailsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="serviceDetailsModalLabel">Detail Layanan</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <img src="<?= htmlspecialchars($serviceDetails['image']) ?>" alt="<?= htmlspecialchars($serviceDetails['name']) ?>" class="img-fluid rounded">
                            </div>
                            <div class="col-md-6">
                                <div class="category-badge mb-3"><?= htmlspecialchars($serviceDetails['category']) ?></div>
                                <h4 class="text-warning mb-3">
                                    Rp <?= number_format($serviceDetails['price_start'], 0, ',', '.') ?> / <?= htmlspecialchars($serviceDetails['price_unit']) ?>
                                </h4>
                                <p><?= htmlspecialchars($serviceDetails['description']) ?></p>
                                
                                <?php if (!empty($serviceDetails['perfect_for'])): ?>
                                    <h6 class="mt-4">Cocok Untuk:</h6>
                                    <p><?= htmlspecialchars($serviceDetails['perfect_for']) ?></p>
                                <?php endif; ?>
                                
                                <?php if (!empty($serviceDetails['delivery_time'])): ?>
                                    <h6 class="mt-4">Waktu Pengerjaan:</h6>
                                    <p><?= htmlspecialchars($serviceDetails['delivery_time']) ?></p>
                                <?php endif; ?>
                                
                                <div class="service-status status-<?= htmlspecialchars($serviceDetails['status']) ?> mt-3">
                                    <?= $serviceDetails['status'] === 'active' ? 'Aktif' : 'Tidak Aktif' ?>
                                </div>
                            </div>
                        </div>
                        
                        <?php if (!empty($serviceDetails['features'])): ?>
                            <h6 class="mt-4">Fitur:</h6>
                            <ul class="feature-list">
                                <?php 
                                $features = json_decode($serviceDetails['features'], true);
                                if (is_array($features)) {
                                    foreach ($features as $feature) {
                                        echo '<li><i class="bi bi-check-circle-fill text-warning me-2"></i>' . htmlspecialchars($feature) . '</li>';
                                    }
                                }
                                ?>
                            </ul>
                        <?php endif; ?>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                        <button class="btn btn-gold" data-bs-toggle="modal" data-bs-target="#editServiceModal">
                            <i class="bi bi-pencil me-2"></i>Edit Layanan
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Edit Service Modal -->
        <div class="modal fade" id="editServiceModal" tabindex="-1" aria-labelledby="editServiceModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editServiceModalLabel">Edit Layanan</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form method="post" action="">
                        <div class="modal-body">
                            <input type="hidden" name="service_id" value="<?= $serviceDetails['id'] ?>">
                            <input type="hidden" name="update_service" value="1">
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="name" class="form-label">Nama Layanan</label>
                                    <input type="text" class="form-control" id="name" name="name" value="<?= htmlspecialchars($serviceDetails['name']) ?>" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="category" class="form-label">Kategori</label>
                                    <select class="form-select" id="category" name="category" required>
                                        <?php foreach ($categories as $cat): ?>
                                            <option value="<?= htmlspecialchars($cat) ?>" <?= $serviceDetails['category'] === $cat ? 'selected' : '' ?>>
                                                <?= htmlspecialchars($cat) ?>
                                            </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="description" class="form-label">Deskripsi</label>
                                <textarea class="form-control" id="description" name="description" rows="3" required><?= htmlspecialchars($serviceDetails['description']) ?></textarea>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="price_start" class="form-label">Harga Awal</label>
                                    <div class="input-group">
                                        <span class="input-group-text">Rp</span>
                                        <input type="number" class="form-control" id="price_start" name="price_start" value="<?= $serviceDetails['price_start'] ?>" required>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="price_unit" class="form-label">Satuan Harga</label>
                                    <input type="text" class="form-control" id="price_unit" name="price_unit" value="<?= htmlspecialchars($serviceDetails['price_unit']) ?>" required>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="image" class="form-label">URL Gambar</label>
                                <input type="text" class="form-control" id="image" name="image" value="<?= htmlspecialchars($serviceDetails['image']) ?>">
                            </div>
                            
                            <div class="mb-3">
                                <label for="perfect_for" class="form-label">Cocok Untuk</label>
                                <textarea class="form-control" id="perfect_for" name="perfect_for" rows="2"><?= htmlspecialchars($serviceDetails['perfect_for']) ?></textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label for="delivery_time" class="form-label">Waktu Pengerjaan</label>
                                <input type="text" class="form-control" id="delivery_time" name="delivery_time" value="<?= htmlspecialchars($serviceDetails['delivery_time']) ?>">
                            </div>
                            
                            <div class="mb-3">
                                <label for="status" class="form-label">Status</label>
                                <select class="form-select" id="status" name="status" required>
                                    <option value="active" <?= $serviceDetails['status'] === 'active' ? 'selected' : '' ?>>Aktif</option>
                                    <option value="inactive" <?= $serviceDetails['status'] === 'inactive' ? 'selected' : '' ?>>Tidak Aktif</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Fitur</label>
                                <div id="featuresContainer">
                                    <?php 
                                    $features = json_decode($serviceDetails['features'], true);
                                    if (is_array($features)) {
                                        foreach ($features as $index => $feature) {
                                            echo '<div class="feature-item">';
                                            echo '<input type="text" class="form-control" name="features[]" value="' . htmlspecialchars($feature) . '">';
                                            echo '<button type="button" class="btn btn-sm btn-outline-danger" onclick="removeFeature(this)">Hapus</button>';
                                            echo '</div>';
                                        }
                                    }
                                    ?>
                                </div>
                                <button type="button" class="btn btn-outline-gold btn-sm" onclick="addFeature()">
                                    <i class="bi bi-plus-circle me-1"></i>Tambah Fitur
                                </button>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                            <button type="submit" class="btn btn-gold">Simpan Perubahan</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const serviceDetailsModal = new bootstrap.Modal(document.getElementById('serviceDetailsModal'));
                serviceDetailsModal.show();
            });
            
            // When edit button is clicked, hide details modal and show edit modal
            document.querySelector('[data-bs-target="#editServiceModal"]').addEventListener('click', function() {
                const serviceDetailsModal = bootstrap.Modal.getInstance(document.getElementById('serviceDetailsModal'));
                serviceDetailsModal.hide();
                
                setTimeout(() => {
                    const editServiceModal = new bootstrap.Modal(document.getElementById('editServiceModal'));
                    editServiceModal.show();
                }, 300);
            });
        });
        
        function addFeature() {
            const container = document.getElementById('featuresContainer');
            const featureItem = document.createElement('div');
            featureItem.className = 'feature-item';
            featureItem.innerHTML = `
                <input type="text" class="form-control" name="features[]" placeholder="Masukkan fitur...">
                <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeFeature(this)">Hapus</button>
            `;
            container.appendChild(featureItem);
        }
        
        function removeFeature(button) {
            button.parentElement.remove();
        }
        </script>
    <?php endif; ?>
    
    <!-- Add Service Modal -->
    <div class="modal fade" id="addServiceModal" tabindex="-1" aria-labelledby="addServiceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addServiceModalLabel">Tambah Layanan Baru</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post" action="">
                    <div class="modal-body">
                        <input type="hidden" name="add_service" value="1">
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Nama Layanan</label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">Kategori</label>
                                <select class="form-select" id="category" name="category" required>
                                    <?php foreach ($categories as $cat): ?>
                                        <option value="<?= htmlspecialchars($cat) ?>"><?= htmlspecialchars($cat) ?></option>
                                    <?php endforeach; ?>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Deskripsi</label>
                            <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="price_start" class="form-label">Harga Awal</label>
                                <div class="input-group">
                                    <span class="input-group-text">Rp</span>
                                    <input type="number" class="form-control" id="price_start" name="price_start" required>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="price_unit" class="form-label">Satuan Harga</label>
                                <input type="text" class="form-control" id="price_unit" name="price_unit" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="image" class="form-label">URL Gambar</label>
                            <input type="text" class="form-control" id="image" name="image" placeholder="https://example.com/image.jpg">
                        </div>
                        
                        <div class="mb-3">
                            <label for="perfect_for" class="form-label">Cocok Untuk</label>
                            <textarea class="form-control" id="perfect_for" name="perfect_for" rows="2"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="delivery_time" class="form-label">Waktu Pengerjaan</label>
                            <input type="text" class="form-control" id="delivery_time" name="delivery_time">
                        </div>
                        
                        <div class="mb-3">
                            <label for="status" class="form-label">Status</label>
                            <select class="form-select" id="status" name="status" required>
                                <option value="active">Aktif</option>
                                <option value="inactive">Tidak Aktif</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Fitur</label>
                            <div id="newFeaturesContainer">
                                <div class="feature-item">
                                    <input type="text" class="form-control" name="features[]" placeholder="Masukkan fitur...">
                                    <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeFeature(this)">Hapus</button>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-gold btn-sm" onclick="addNewFeature()">
                                <i class="bi bi-plus-circle me-1"></i>Tambah Fitur
                            </button>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                        <button type="submit" class="btn btn-gold">Tambah Layanan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Feature management functions
        function addNewFeature() {
            const container = document.getElementById('newFeaturesContainer');
            const featureItem = document.createElement('div');
            featureItem.className = 'feature-item';
            featureItem.innerHTML = `
                <input type="text" class="form-control" name="features[]" placeholder="Masukkan fitur...">
                <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeFeature(this)">Hapus</button>
            `;
            container.appendChild(featureItem);
        }
        
        function removeFeature(button) {
            button.parentElement.remove();
        }
    </script>
</body>
</html>
```

### 20. auth/admin/reports.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Admin Reports
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

// Get report type
$reportType = $_GET['type'] ?? 'overview';
$export = $_GET['export'] ?? '';

// Process export requests
if (!empty($export)) {
    switch ($export) {
        case 'users':
            exportUsers();
            break;
        case 'orders':
            exportOrders();
            break;
        case 'services':
            exportServices();
            break;
        default:
            header('Location: reports.php');
            exit;
    }
}

// Get date range for reports
$startDate = $_GET['start_date'] ?? date('Y-m-01');
$endDate = $_GET['end_date'] ?? date('Y-m-t');

// Overview statistics
$totalUsers = 0;
$totalOrders = 0;
$totalRevenue = 0;
$activeServices = 0;
$completedOrders = 0;
$pendingOrders = 0;

// Get total users
$stmt = $conn->query("SELECT COUNT(*) as count FROM users");
$result = $stmt->get_result();
if ($result->num_rows > 0) {
    $totalUsers = $result->fetch_assoc()['count'];
}

// Get total orders
$stmt = $conn->query("SELECT COUNT(*) as count FROM orders");
$result = $stmt->get_result();
if ($result->num_rows > 0) {
    $totalOrders = $result->fetch_assoc()['count'];
}

// Get total revenue
$stmt = $conn->query("SELECT SUM(total_amount) as total FROM orders WHERE status = 'completed'");
$result = $stmt->get_result();
if ($result->num_rows > 0) {
    $totalRevenue = $result->fetch_assoc()['total'];
}

// Get active services
$stmt = $conn->query("SELECT COUNT(*) as count FROM services WHERE status = 'active'");
$result = $stmt->get_result();
if ($result->num_rows > 0) {
    $activeServices = $result->fetch_assoc()['count'];
}

// Get completed orders
$stmt = $conn->query("SELECT COUNT(*) as count FROM orders WHERE status = 'completed'");
$result = $stmt->get_result();
if ($result->num_rows > 0) {
    $completedOrders = $result->fetch_assoc()['count'];
}

// Get pending orders
$stmt = $conn->query("SELECT COUNT(*) as count FROM orders WHERE status = 'pending'");
$result = $stmt->get_result();
if ($result->num_rows > 0) {
    $pendingOrders = $result->fetch_assoc()['count'];
}

// Monthly revenue data
$monthlyRevenue = [];
$stmt = $conn->prepare("SELECT DATE_FORMAT(created_at, '%Y-%m') as month, SUM(total_amount) as revenue 
                          FROM orders 
                          WHERE status = 'completed' AND created_at BETWEEN ? AND ?
                          GROUP BY DATE_FORMAT(created_at, '%Y-%m')
                          ORDER BY month");
$stmt->bind_param("ss", $startDate, $endDate);
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    $monthlyRevenue[] = [
        'month' => $row['month'],
        'revenue' => $row['revenue']
    ];
}

// Top services by revenue
$topServices = [];
$stmt = $conn->prepare("SELECT s.name, SUM(o.total_amount) as revenue 
                          FROM services s 
                          JOIN orders o ON s.id = o.service_id 
                          WHERE o.status = 'completed' AND o.created_at BETWEEN ? AND ?
                          GROUP BY s.id 
                          ORDER BY revenue DESC 
                          LIMIT 10");
$stmt->bind_param("ss", $startDate, $endDate);
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    $topServices[] = [
        'name' => $row['name'],
        'revenue' => $row['revenue']
    ];
}

// Top customers by spending
$topCustomers = [];
$stmt = $conn->prepare("SELECT u.name, u.email, SUM(o.total_amount) as spending 
                          FROM users u 
                          JOIN orders o ON u.id = o.user_id 
                          WHERE o.status = 'completed' AND o.created_at BETWEEN ? AND ?
                          GROUP BY u.id 
                          ORDER BY spending DESC 
                          LIMIT 10");
$stmt->bind_param("ss", $startDate, $endDate);
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    $topCustomers[] = [
        'name' => $row['name'],
        'email' => $row['email'],
        'spending' => $row['spending']
    ];
}

// Orders by status
$ordersByStatus = [];
$stmt = $conn->prepare("SELECT status, COUNT(*) as count 
                          FROM orders 
                          WHERE created_at BETWEEN ? AND ?
                          GROUP BY status");
$stmt->bind_param("ss", $startDate, $endDate);
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    $ordersByStatus[] = [
        'status' => $row['status'],
        'count' => $row['count']
    ];
}

// Users by role
$usersByRole = [];
$stmt = $conn->query("SELECT role, COUNT(*) as count FROM users GROUP BY role");
$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    $usersByRole[] = [
        'role' => $row['role'] == 1 ? 'User' : ($row['role'] == 2 ? 'Admin' : 'Super Admin'),
        'count' => $row['count']
    ];
}

// Services by category
$servicesByCategory = [];
$stmt = $conn->prepare("SELECT category, COUNT(*) as count 
                          FROM services 
                          WHERE status = 'active'
                          GROUP BY category");
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    $servicesByCategory[] = [
        'category' => $row['category'],
        'count' => $row['count']
    ];
}

function exportUsers() {
    global $conn;
    
    header('Content-Type: text/csv');
    header('Content-Disposition: attachment; filename="users_export_' . date('Y-m-d') . '.csv"');
    
    $output = fopen('php://output', 'w');
    
    // Header
    fputcsv($output, ['ID', 'Name', 'Email', 'Phone', 'Role', 'Status', 'Email Verified', 'Created At']);
    
    // Data
    $stmt = $conn->query("SELECT id, name, email, phone, role, status, email_verified, created_at FROM users ORDER BY created_at DESC");
    while ($row = $stmt->fetch_assoc()) {
        fputcsv($output, [
            $row['id'],
            $row['name'],
            $row['email'],
            $row['phone'],
            $row['role'] == 1 ? 'User' : ($row['role'] == 2 ? 'Admin' : 'Super Admin'),
            $row['status'],
            $row['email_verified'] ? 'Yes' : 'No',
            $row['created_at']
        ]);
    }
    
    fclose($output);
    exit;
}

function exportOrders() {
    global $conn;
    
    header('Content-Type: text/csv');
    header('Content-Disposition: attachment; filename="orders_export_' . date('Y-m-d') . '.csv"');
    
    $output = fopen('php://output', 'w');
    
    // Header
    fputcsv($output, ['ID', 'Order Number', 'User Name', 'User Email', 'Service Name', 'Total Amount', 'Status', 'Created At']);
    
    // Data
    $stmt = $conn->query("SELECT o.id, o.order_number, u.name as user_name, u.email as user_email, s.name as service_name, o.total_amount, o.status, o.created_at 
                          FROM orders o 
                          LEFT JOIN users u ON o.user_id = u.id 
                          LEFT JOIN services s ON o.service_id = s.id 
                          ORDER BY o.created_at DESC");
    while ($row = $stmt->fetch_assoc()) {
        fputcsv($output, [
            $row['id'],
            $row['order_number'],
            $row['user_name'],
            $row['user_email'],
            $row['service_name'],
            $row['total_amount'],
            $row['status'],
            $row['created_at']
        ]);
    }
    
    fclose($output);
    exit;
}

function exportServices() {
    global $conn;
    
    header('Content-Type: text/csv');
    header('Content-Disposition: attachment; filename="services_export_' . date('Y-m-d') . '.csv"');
    
    $output = fopen('php://output', 'w');
    
    // Header
    fputcsv($output, ['ID', 'Name', 'Category', 'Price Start', 'Price Unit', 'Status', 'Created At']);
    
    // Data
    $stmt = $conn->query("SELECT id, name, category, price_start, price_unit, status, created_at FROM services ORDER BY created_at DESC");
    while ($row = $stmt->fetch_assoc()) {
        fputcsv($output, [
            $row['id'],
            $row['name'],
            $row['category'],
            $row['price_start'],
            $row['price_unit'],
            $row['status'],
            $row['created_at']
        ]);
    }
    
    fclose($output);
    exit;
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan - SITUNEO DIGITAL</title>
    <meta name="description" content="Laporan dan analisis SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Report Card */
        .report-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .report-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .report-actions {
            display: flex;
            gap: 10px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .stat-icon {
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--gold);
        }
        
        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        /* Chart Container */
        .chart-container {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            height: 300px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .chart-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        /* Table */
        .table-dark {
            background: rgba(15, 48, 87, 0.5);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .table-dark th {
            background: rgba(30, 92, 153, 0.7);
            border-color: rgba(255, 180, 0, 0.2);
            color: var(--white);
            font-weight: 600;
        }
        
        .table-dark td {
            border-color: rgba(255, 255, 255, 0.1);
            color: var(--white);
        }
        
        .table-dark tbody tr:hover {
            background: rgba(255, 180, 0, 0.1);
        }
        
        /* Date Range Form */
        .date-range-form {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            align-items: center;
        }
        
        .date-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .date-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
            outline: none;
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 10px 20px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 20px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="../profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="../settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="../dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="../orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="../services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="../invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="../support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
        <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
        <a href="users.php" class="sidebar-item">
            <i class="bi bi-people"></i> Kelola Pengguna
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-receipt"></i> Semua Pesanan
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-gear"></i> Kelola Layanan
        </a>
        <a href="reports.php" class="sidebar-item active">
            <i class="bi bi-graph-up"></i> Laporan
        </a>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <div class="report-header">
                <h1 class="report-title">Laporan</h1>
                <div class="report-actions">
                    <a href="?type=overview" class="btn-outline-gold <?= $reportType === 'overview' ? 'active' : '' ?>">
                        Ringkasan
                    </a>
                    <a href="?type=sales" class="btn-outline-gold <?= $reportType === 'sales' ? 'active' : '' ?>">
                        Penjualan
                    </a>
                    <a href="?type=users" class="btn-outline-gold <?= $reportType === 'users' ? 'active' : '' ?>">
                        Pengguna
                    </a>
                    <a href="?type=services" class="btn-outline-gold <?= $reportType === 'services' ? 'active' : '' ?>">
                        Layanan
                    </a>
                </div>
            </div>
            
            <!-- Date Range Form -->
            <form class="date-range-form" method="get" action="">
                <label for="start_date" class="me-2">Dari:</label>
                <input type="date" class="date-input" id="start_date" name="start_date" value="<?= $startDate ?>">
                
                <label for="end_date" class="me-2">Sampai:</label>
                <input type="date" class="date-input" id="end_date" name="end_date" value="<?= $endDate ?>">
                
                <button type="submit" class="btn-gold">
                    <i class="bi bi-calendar3 me-2"></i>Filter
                </button>
            </form>
            
            <?php if ($reportType === 'overview'): ?>
                <!-- Overview Report -->
                <div class="row g-4 mb-4" data-aos="fade-up">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-people"></i>
                            </div>
                            <div class="stat-value"><?= number_format($totalUsers) ?></div>
                            <div class="stat-label">Total Pengguna</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-receipt"></i>
                            </div>
                            <div class="stat-value"><?= number_format($totalOrders) ?></div>
                            <div class="stat-label">Total Pesanan</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-currency-dollar"></i>
                            </div>
                            <div class="stat-value">Rp <?= number_format($totalRevenue, 0, ',', '.') ?></div>
                            <div class="stat-label">Total Pendapatan</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="bi bi-gear"></i>
                            </div>
                            <div class="stat-value"><?= number_format($activeServices) ?></div>
                            <div class="stat-label">Layanan Aktif</div>
                        </div>
                    </div>
                </div>
                
                <div class="row g-4 mb-4" data-aos="fade-up" data-aos-delay="100">
                    <div class="col-md-6">
                        <div class="chart-container">
                            <h5 class="mb-3">Pendapatan Bulanan</h5>
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="chart-container">
                            <h5 class="mb-3">Status Pesanan</h5>
                            <canvas id="ordersStatusChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="row g-4 mb-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="col-md-6">
                        <div class="chart-container">
                            <h5 class="mb-3">Layanan Terpopuler</h5>
                            <canvas id="topServicesChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="chart-container">
                            <h5 class="mb-3">Pelanggan Terbaik</h5>
                            <canvas id="topCustomersChart"></canvas>
                        </div>
                    </div>
                </div>
            <?php elseif ($reportType === 'sales'): ?>
                <!-- Sales Report -->
                <div class="report-card" data-aos="fade-up">
                    <h5 class="mb-3">Ringkasan Penjualan</h5>
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Bulan</th>
                                <th>Pendapatan</th>
                                <th>Pesanan</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach ($monthlyRevenue as $month): ?>
                                <tr>
                                    <td><?= date('F Y', strtotime($month['month'] . '-01')) ?></td>
                                    <td>Rp <?= number_format($month['revenue'], 0, ',', '.') ?></td>
                                    <td>
                                        <?php
                                        $stmt = $conn->prepare("SELECT COUNT(*) as count FROM orders WHERE DATE_FORMAT(created_at, '%Y-%m') = ? AND status = 'completed'");
                                        $stmt->bind_param("s", $month['month']);
                                        $stmt->execute();
                                        $result = $stmt->get_result();
                                        echo $result->fetch_assoc()['count'];
                                        ?>
                                    </td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
                
                <div class="report-card" data-aos="fade-up" data-aos-delay="100">
                    <h5 class="mb-3">Layanan Terlaris</h5>
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Layanan</th>
                                <th>Pendapatan</th>
                                <th>Pesanan</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach ($topServices as $service): ?>
                                <tr>
                                    <td><?= htmlspecialchars($service['name']) ?></td>
                                    <td>Rp <?= number_format($service['revenue'], 0, ',', '.') ?></td>
                                    <td>
                                        <?php
                                        $stmt = $conn->prepare("SELECT COUNT(*) as count FROM orders o JOIN services s ON o.service_id = s.id WHERE s.name = ? AND o.status = 'completed'");
                                        $stmt->bind_param("s", $service['name']);
                                        $stmt->execute();
                                        $result = $stmt->get_result();
                                        echo $result->fetch_assoc()['count'];
                                        ?>
                                    </td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            <?php elseif ($reportType === 'users'): ?>
                <!-- Users Report -->
                <div class="report-card" data-aos="fade-up">
                    <h5 class="mb-3">Pengguna Berdasarkan Role</h5>
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Role</th>
                                <th>Jumlah</th>
                                <th>Persentase</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach ($usersByRole as $role): ?>
                                <tr>
                                    <td><?= htmlspecialchars($role['role']) ?></td>
                                    <td><?= number_format($role['count']) ?></td>
                                    <td><?= round(($role['count'] / $totalUsers) * 100, 1) ?>%</td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
                
                <div class="report-card" data-aos="fade-up" data-aos-delay="100">
                    <h5 class="mb-3">Pelanggan Terbaik</h5>
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Nama</th>
                                <th>Email</th>
                                <th>Total Pengeluaran</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach ($topCustomers as $customer): ?>
                                <tr>
                                    <td><?= htmlspecialchars($customer['name']) ?></td>
                                    <td><?= htmlspecialchars($customer['email']) ?></td>
                                    <td>Rp <?= number_format($customer['spending'], 0, ',', '.') ?></td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            <?php elseif ($reportType === 'services'): ?>
                <!-- Services Report -->
                <div class="report-card" data-aos="fade-up">
                    <h5 class="mb-3">Layanan Berdasarkan Kategori</h5>
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Kategori</th>
                                <th>Jumlah</th>
                                <th>Persentase</th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php foreach ($servicesByCategory as $category): ?>
                                <tr>
                                    <td><?= htmlspecialchars($category['category']) ?></td>
                                    <td><?= number_format($category['count']) ?></td>
                                    <td><?= round(($category['count'] / $activeServices) * 100, 1) ?>%</td>
                                </tr>
                            <?php endforeach; ?>
                        </tbody>
                    </table>
                </div>
            <?php endif; ?>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Initialize charts based on report type
        <?php if ($reportType === 'overview'): ?>
            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: <?php
                        $labels = [];
                        $data = [];
                        foreach ($monthlyRevenue as $month) {
                            $labels[] = date('M Y', strtotime($month['month'] . '-01'));
                            $data[] = $month['revenue'];
                        }
                        echo json_encode($labels);
                    ?>,
                    datasets: [{
                        label: 'Pendapatan',
                        data: <?php echo json_encode($data); ?>,
                        borderColor: '#FFB400',
                        backgroundColor: 'rgba(255, 180, 0, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#e9ecef'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#e9ecef'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
            
            // Orders Status Chart
            const ordersStatusCtx = document.getElementById('ordersStatusChart').getContext('2d');
            const ordersStatusChart = new Chart(ordersStatusCtx, {
                type: 'doughnut',
                data: {
                    labels: <?php
                        $labels = [];
                        $data = [];
                        foreach ($ordersByStatus as $status) {
                            $labels[] = ucfirst($status['status']);
                            $data[] = $status['count'];
                        }
                        echo json_encode($labels);
                    ?>,
                    datasets: [{
                        data: <?php echo json_encode($data); ?>,
                        backgroundColor: [
                            'rgba(255, 193, 7, 0.8)',
                            'rgba(13, 202, 240, 0.8)',
                            'rgba(25, 135, 84, 0.8)',
                            'rgba(220, 53, 69, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#e9ecef'
                            }
                        }
                    }
                }
            });
            
            // Top Services Chart
            const topServicesCtx = document.getElementById('topServicesChart').getContext('2d');
            const topServicesChart = new Chart(topServicesCtx, {
                type: 'bar',
                data: {
                    labels: <?php
                        $labels = [];
                        $data = [];
                        foreach ($topServices as $service) {
                            $labels[] = $service['name'];
                            $data[] = $service['revenue'];
                        }
                        echo json_encode($labels);
                    ?>,
                    datasets: [{
                        label: 'Pendapatan',
                        data: <?php echo json_encode($data); ?>,
                        backgroundColor: 'rgba(255, 180, 0, 0.8)',
                        borderColor: 'rgba(255, 180, 0, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#e9ecef'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#e9ecef'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
            
            // Top Customers Chart
            const topCustomersCtx = document.getElementById('topCustomersChart').getContext('2d');
            const topCustomersChart = new Chart(topCustomersCtx, {
                type: 'bar',
                data: {
                    labels: <?php
                        $labels = [];
                        $data = [];
                        foreach ($topCustomers as $customer) {
                            $labels[] = $customer['name'];
                            $data[] = $customer['spending'];
                        }
                        echo json_encode($labels);
                    ?>,
                    datasets: [{
                        label: 'Total Pengeluaran',
                        data: <?php echo json_encode($data); ?>,
                        backgroundColor: 'rgba(255, 180, 0, 0.8)',
                        borderColor: 'rgba(255, 180, 0, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#e9ecef'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#e9ecef'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        <?php endif; ?>
    </script>
</body>
</html>
```

## Langkah Selanjutnya

Dengan menambahkan file `auth/admin/services.php` dan `auth/admin/reports.php`, sistem autentikasi Project Situneo Digital sekarang memiliki fitur admin yang lengkap:

1. **Manajemen Layanan** - Admin dapat menambah, mengedit, dan mengubah status layanan
2. **Laporan Komprehensif** - Menampilkan berbagai laporan dengan grafik interaktif
3. **Export Data** - Kemampuan mengekspor data pengguna, pesanan, dan layanan ke CSV
4. **Filter Tanggal** - Filter laporan berdasarkan rentang tanggal
5. **Visualisasi Data** - Grafik interaktif menggunakan Chart.js untuk visualisasi data

Sistem ini sudah memiliki fitur lengkap untuk:
- Manajemen pengguna dengan role-based access control
- Manajemen pesanan dengan status tracking
- Manajemen layanan dengan fitur lengkap
- Laporan dan analisis data dengan visualisasi
- Export data untuk analisis lebih lanjutan
- Desain yang responsif dan menarik

Apakah Anda ingin saya tambahkan fitur lainnya atau ada bagian dari sistem yang ingin kita kembangkan? Atau apakah Anda ingin saya jelaskan lebih detail tentang cara menggunakan sistem ini?

### USER
ok next

### ASSISTANT
Baik, mari kita lanjutkan dengan membuat file `auth/admin/settings.php` untuk pengaturan sistem dan `auth/admin/dashboard.php` untuk dashboard admin yang lebih lengkap.

### 21. auth/admin/settings.php

```php
<?php
/**
 * ========================================
 * SITUNEO DIGITAL - Admin Settings Page
 * NIB: 20250-9261-4570-4515-5453
 * ========================================
 */

require_once '../config.php';

// Require admin role
requireRole(ROLE_ADMIN);

// Get current user
$user = getCurrentUser();

// Get settings from database
$settings = [];
$stmt = $conn->query("SELECT setting_key, setting_value FROM settings");
while ($row = $stmt->fetch_assoc()) {
    $settings[$row['setting_key']] = $settings[$row['setting_key']] ?? $row['setting_value'];
}

// Process settings update
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $companyName = $_POST['company_name'] ?? '';
    $companyTagline = $_POST['company_tagline'] ?? '';
    $companyEmail = $_POST['company_email'] ?? '';
    $supportEmail = $_POST['support_email'] ?? '';
    $companyPhone = $_POST['company_phone'] ?? '';
    $companyAddress = $_POST['company_address'] ?? '';
    $companyWebsite = $_POST['company_website'] ?? '';
    $whatsappNumber = $_POST['whatsapp_number'] ?? '';
    
    // Update settings in database
    $updateQueries = [
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'company_name'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'company_tagline'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'company_email'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'support_email'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'company_phone'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'company_address'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'company_website'",
        "UPDATE settings SET setting_value = ? WHERE setting_key = 'whatsapp_number'"
    ];
    
    $updateParams = [
        [$companyName, 'company_name'],
        [$companyTagline, 'company_tagline'],
        [$companyEmail, 'company_email'],
        [$supportEmail, 'support_email'],
        [$companyPhone, 'company_phone'],
        [$companyAddress, 'company_address'],
        [$companyWebsite, 'company_website'],
        [$whatsappNumber, 'whatsapp_number']
    ];
    
    $success = true;
    foreach ($updateQueries as $index => $query) {
        $stmt = $conn->prepare($query);
        if (!$stmt->execute($updateParams[$index])) {
            $success = false;
        }
    }
    
    if ($success) {
        // Log activity
        logActivity($user['id'], "Updated system settings");
        
        header("Location: settings.php?success=settings_updated");
        exit;
    } else {
        $error = "Terjadi kesalahan saat memperbarui pengaturan.";
    }
}

// Process logo upload
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_FILES['logo'])) {
    $logo = $_FILES['logo'];
    
    // Check if file is an image
    $allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    $maxSize = 2 * 1024 * 1024; // 2MB
    
    if (in_array($logo['type'], $allowedTypes) && $logo['size'] <= $maxSize) {
        // Create directory if not exists
        if (!is_dir('../../uploads')) {
            mkdir('../../uploads', 0777, true);
        }
        
        // Generate unique filename
        $filename = 'logo_' . time() . '.' . pathinfo($logo['name'], PATHINFO_EXTENSION);
        $uploadPath = '../../uploads/' . $filename;
        
        // Upload file
        if (move_uploaded_file($logo['tmp_name'], $uploadPath)) {
            // Update logo setting in database
            $stmt = $conn->prepare("UPDATE settings SET setting_value = ? WHERE setting_key = 'company_logo'");
            $stmt->bind_param("s", $filename);
            
            if ($stmt->execute()) {
                // Log activity
                logActivity($user['id'], "Updated company logo");
                
                header("Location: settings.php?success=logo_updated");
                exit;
            } else {
                $error = "Terjadi kesalahan saat mengupload logo.";
            }
        } else {
            $error = "Terjadi kesalahan saat mengupload logo.";
        }
    } else {
        $error = "Format file tidak didukung atau ukuran file terlalu besar (maksimal 2MB).";
    }
}
?>

<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pengaturan - SITUNEO DIGITAL</title>
    <meta name="description" content="Pengaturan sistem SITUNEO DIGITAL">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://situneo.my.id/logo">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <style>
        :root {
            --primary-blue: #1E5C99;
            --dark-blue: #0F3057;
            --gold: #FFB400;
            --bright-gold: #FFD700;
            --white: #ffffff;
            --text-light: #e9ecef;
            --gradient-primary: linear-gradient(135deg, #1E5C99 0%, #0F3057 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFB400 100%);
        }
        
        * {
            margin: 0;
            preview: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-blue);
            color: var(--white);
            min-height: 100vh;
        }
        
        /* Network Background */
        .network-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
            overflow: hidden;
            opacity: 0.3;
        }
        
        .network-bg canvas {
            width: 100%;
            height: 100%;
        }
        
        /* Circuit Pattern */
        .circuit-pattern {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.05;
            background-image: 
                linear-gradient(90deg, var(--gold) 1px, transparent 1px),
                linear-gradient(180deg, var(--gold) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: circuit-move 60s linear infinite;
        }
        
        @keyframes circuit-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        /* Navbar */
        .navbar-premium {
            background: rgba(15, 48, 87, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 998;
            border-bottom: 1px solid rgba(255, 180, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .navbar-premium.scrolled {
            padding: 0.5rem 0;
            background: rgba(15, 48, 87, 0.98);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .nav-link {
            color: var(--white) !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link:hover {
            color: var(--gold) !important;
            transform: translateY(-2px);
        }
        
        .nav-link.active {
            color: <

### USER
lanjut yang terpotong

### ASSISTANT
Maaf, kode saya terpotong lagi. Mari saya lanjutkan dengan file `auth/admin/settings.php` yang lengkap:

```php
            color: var(--gold) !important;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            width: 250px;
            background: rgba(15, 48, 87, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 180, 0, 0.2);
            padding: 20px 0;
            z-index: 997;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 180, 0, 0.1);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item.active {
            background: rgba(255, 180, 0, 0.2);
            color: var(--gold);
            border-left-color: var(--gold);
        }
        
        .sidebar-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 100px 20px 40px;
            min-height: 100vh;
        }
        
        /* Settings Card */
        .settings-card {
            background: linear-gradient(135deg, rgba(30, 92, 153, 0.1) 0%, rgba(15, 48, 87, 0.2) 100%);
            border: 1px solid rgba(255, 180, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.4s;
            backdrop-filter: blur(10px);
        }
        
        .settings-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .settings-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .settings-actions {
            display: flex;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-light);
        }
        
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: var(--white);
            transition: all 0.3s;
        }
        
        .form-select:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 0 0.25rem rgba(255, 180, 0, 0.25);
            color: var(--white);
        }
        
        .btn-gold {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            border: none;
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 180, 0, 0.4);
        }
        
        .btn-outline-gold {
            background: transparent;
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 10px 25px;
            font-weight: 700;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }
        
        .btn-outline-gold:hover {
            background: var(--gradient-gold);
            color: var(--dark-blue);
            transform: translateY(-2px);
        }
        
        /* Logo Upload */
        .logo-upload {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .current-logo {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            object-fit: cover;
            margin-right: 20px;
            border: 2px solid rgba(255, 180, 0, 0.3);
        }
        
        .upload-btn {
            background: rgba(255, 180, 0, 0.1);
            border: 1px solid rgba(255, 180, 0, 0.3);
            color: var(--gold);
            padding: 10px 20px;
            font-weight: 600;
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-btn:hover {
            background: rgba(255, 180, 0, 0.2);
            border-color: var(--gold);
        }
        
        /* Alert */
        .alert {
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }
        
        .alert-success {
            background: rgba(25, 135, 84, 0.2);
            border: 1px solid rgba(25, 135, 84, 0.3);
            color: #d1e7dd;
        }
        
        /* Company Info */
        .company-info {
            background: rgba(15, 48, 87, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .company-name {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 5px;
        }
        
        .company-detail {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .company-detail i {
            color: var(--gold);
            margin-right: 10px;
        }
        
        .company-detail span {
            color: var(--text-light);
        }
        
        /* System Info */
        .system-info {
            background: rgba(15, 48, 87, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .system-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 15px;
        }
        
        .system-detail {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .system-detail i {
            color: var(--gold);
            margin-right: 10px;
        }
        
        .system-detail span {
            color: var(--text-light);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Network Background -->
    <div class="network-bg" id="networkBg"></div>
    
    <!-- Circuit Pattern -->
    <div class="circuit-pattern"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-premium">
        <div class="container-fluid">
            <button class="navbar-toggler d-lg-none" type="button" id="sidebarToggle">
                <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="../../index.php" style="text-decoration: none;">
                <img src="https://situneo.my.id/logo" 
                     alt="Situneo" width="40" height="40" 
                     style="margin-right: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(255,180,0,0.4);">
                <div>
                    <span style="font-family: 'Plus Jakarta Sans', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--gold);">SITUNEO</span>
                    <small style="display: block; font-size: 0.7rem; color: var(--text-light); margin-top: -5px;">Digital Harmony</small>
                </div>
            </a>
            <div class="ms-auto d-flex align-items-center">
                <div class="dropdown">
                    <button class="btn btn-link text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle fs-4"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="../profile.php"><i class="bi bi-person me-2"></i> Profil Saya</a></li>
                        <li><a class="dropdown-item" href="../settings.php"><i class="bi bi-gear me-2"></i> Pengaturan</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../logout.php"><i class="bi bi-box-arrow-right me-2"></i> Keluar</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="user-profile">
            <div class="user-avatar">
                <?php if ($user['avatar']): ?>
                    <img src="../../uploads/avatars/<?= htmlspecialchars($user['avatar']) ?>" alt="<?= htmlspecialchars($user['name']) ?>">
                <?php else: ?>
                    <?= strtoupper(substr($user['name'], 0, 1)) ?>
                <?php endif; ?>
            </div>
            <div class="user-info">
                <h5><?= htmlspecialchars($user['name']) ?></h5>
                <p><?= htmlspecialchars($user['email']) ?></p>
            </div>
        </div>
        
        <a href="../dashboard.php" class="sidebar-item">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
        <a href="../orders.php" class="sidebar-item">
            <i class="bi bi-cart-check"></i> Pesanan Saya
        </a>
        <a href="../services.php" class="sidebar-item">
            <i class="bi bi-grid"></i> Layanan
        </a>
        <a href="../invoices.php" class="sidebar-item">
            <i class="bi bi-file-earmark-text"></i> Invoice
        </a>
        <a href="../support.php" class="sidebar-item">
            <i class="bi bi-headset"></i> Bantuan
        </a>
        
        <hr class="my-3" style="border-color: rgba(255, 180, 0, 0.2);">
        <h6 class="px-3 text-uppercase small text-muted">Admin</h6>
        <a href="users.php" class="sidebar-item">
            <i class="bi bi-people"></i> Kelola Pengguna
        </a>
        <a href="orders.php" class="sidebar-item">
            <i class="bi bi-receipt"></i> Semua Pesanan
        </a>
        <a href="services.php" class="sidebar-item">
            <i class="bi bi-gear"></i> Kelola Layanan
        </a>
        <a href="reports.php" class="sidebar-item active">
            <i class="bi bi-graph-up"></i> Laporan
        </a>
        <a href="settings.php" class="sidebar-item active">
            <i class="bi bi-gear"></i> Pengaturan
        </a>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="container-fluid">
            <?php if (isset($_GET['success']) && $_GET['success'] === 'settings_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Pengaturan berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($_GET['success']) && $_GET['success'] === 'logo_updated'): ?>
                <div class="alert alert-success">
                    <i class="bi bi-check-circle-fill me-2"></i>Logo berhasil diperbarui!
                </div>
            <?php endif; ?>
            
            <?php if (isset($error)): ?>
                <div class="alert alert-danger">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i><?= $error ?>
                </div>
            <?php endif; ?>
            
            <div class="settings-header">
                <h3 class="settings-title">Pengaturan Sistem</h3>
                <div class="settings-actions">
                    <a href="?export=settings" class="btn btn-outline-gold">
                        <i class="bi bi-download me-2"></i>Export Pengaturan
                    </a>
                </div>
            </div>
            
            <!-- Company Information -->
            <div class="company-info" data-aos="fade-up">
                <h5 class="company-name">Informasi Perusahaan</h5>
                
                <div class="company-detail">
                    <i class="bi bi-building"></i>
                    <span><?= htmlspecialchars($settings['company_name']) ?></span>
                </div>
                
                <div class="company-detail">
                    <i class="bi bi-envelope"></i>
                    <span><?= htmlspecialchars($settings['company_email']) ?></span>
                </div>
                
                <div class="company-detail">
                    <i class="bi bi-telephone"></i>
                    <span><?= htmlspecialchars($settings['company_phone']) ?></span>
                </div>
                
                <div class="company-detail">
                    <i class="bi bi-geo-alt"></i>
                    <span><?= htmlspecialchars($settings['company_address']) ?></span>
                </div>
                
                <div class="company-detail">
                    <i class="bi bi-globe"></i>
                    <span><?= htmlspecialchars($settings['company_website']) ?></span>
                </div>
                
                <div class="company-detail">
                    <i class="bi-whatsapp"></i>
                    <span><?= htmlspecialchars($settings['whatsapp_number']) ?></span>
                </div>
                
                <div class="company-detail">
                    <i class="bi bi-tagline"></i>
                    <span><?= htmlspecialchars($settings['company_tagline']) ?></span>
                </div>
            </div>
            
            <!-- System Information -->
            <div class="system-info" data-aos="fade-up" data-aos-delay="100">
                <h5 class="system-title">Informasi Sistem</h5>
                
                <div class="system-detail">
                    <i class="bi bi-server"></i>
                    <span>PHP Version: <?= PHP_VERSION ?></span>
                </div>
                
                <div class="system-detail">
                    <i class="bi bi-database"></i>
                    <span>MySQL Version: <?= $conn->server_info ?></span>
                </div>
                
                <div class="system-detail">
                    <i class="bi-hdd"></i>
                    <span>Server OS: <?= PHP_OS ?></span>
                </div>
                
                <div class="system-detail">
                    <i class="bi-calendar-check"></i>
                    <span>Server Time: <?= date('Y-m-d H:i:s') ?></span>
                </div>
            </div>
            
            <!-- General Settings -->
            <div class="settings-card" data-aos="fade-up" data-aos-delay="200">
                <h5 class="mb-4">Pengaturan Umum</h5>
                <form method="post" action="">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="company_name" class="form-label">Nama Perusahaan</label>
                            <input type="text" class="form-control" id="company_name" name="company_name" value="<?= htmlspecialchars($settings['company_name']) ?>" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="company_tagline" class="form-label">Tagline</label>
                            <input type="text" class="form-control" id="company_tagline" name="company_tagline" value="<?= htmlspecialchars($settings['company_tagline']) ?>">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="company_email" class="form-label">Email Perusahaan</label>
                            <input type="email" class="form-control" id="company_email" name="company_email" value="<?= htmlspecialchars($settings['company_email']) ?>" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="support_email" class="form-label">Email Support</label>
                            <input type="email" class="form-control" id="support_email" name="support_email" value="<?= htmlspecialchars($settings['support_email']) ?>">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="company_phone" class="form-label">Telepon</label>
                            <input type="tel" class="form-control" id="company_phone" name="company_phone" value="<?= htmlspecialchars($settings['company_phone']) ?>">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="company_address" class="form-label">Alamat</label>
                            <textarea class="form-control" id="company_address" name="company_address" rows="3"><?= htmlspecialchars($settings['company_address']) ?></textarea>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="company_website" class="form-label">Website</label>
                            <input type="url" class="form-control" id="company_website" name="company_website" value="<?= htmlspecialchars($settings['company_website']) ?>">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="whatsapp_number" class="form-label">WhatsApp</label>
                            <input type="tel" class="form-control" id="whatsapp_number" name="whatsapp_number" value="<?= htmlspecialchars($settings['whatsapp_number']) ?>">
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-gold">Simpan Perubahan</button>
                    </div>
                </form>
            </div>
            
            <!-- Logo Upload -->
            <div class="settings-card" data-aos="fade-up" data-aos-delay="300">
                <h5 class="mb-4">Logo Perusahaan</h5>
                <div class="logo-upload">
                    <?php if (!empty($settings['company_logo']): ?>
                        <img src="../../uploads/<?= htmlspecialchars($settings['company_logo']) ?>" alt="Company Logo" class="current-logo">
                    <?php else: ?>
                        <div class="current-logo d-flex align-items-center justify-content-center">
                            <i class="bi bi-image fs-1"></i>
                        </div>
                    <?php endif; ?>
                    
                    <form method="post" action="" enctype="multipart/form-data">
                        <div class="upload-btn">
                            <label for="logo" class="btn btn-outline-gold">
                                <i class="bi bi-upload"></i> Upload Logo Baru
                            </label>
                            <input type="file" id="logo" name="logo" accept="image/*" style="display: none;">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Network Background Animation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const networkBg = document.getElementById('networkBg');
        networkBg.appendChild(canvas);
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const nodes = [];
        const nodeCount = 50;
        const connectionDistance = 150;
        
        class Node {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
                if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 180, 0, 0.7)';
                ctx.fill();
            }
        }
        
        for (let i = 0; i < nodeCount; i++) {
            nodes.push(new Node());
        }
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw nodes
            nodes.forEach(node => {
                node.update();
                node.draw();
            });
            
            // Draw connections
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy * dy);
                    
                    if (distance < connectionDistance) {
                        ctx.beginPath();
                        ctx.moveTo(nodes[i].x, nodes[i].y);
                        ctx.lineTo(nodes[j].x, nodes[j].y);
                        ctx.strokeStyle = `rgba(255, 180, 0, ${0.2 * (1 - distance / connectionDistance)})`;
                        ctx.stroke();
                    }
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('show');
        });
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar-premium');
            if (window.scrollY > 50) {
                navbar.classList.add('scroll

### USER
lanjut yang terpotong

### ASSISTANT